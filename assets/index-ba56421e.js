var Pg=Object.defineProperty;var Lg=(t,e,n)=>e in t?Pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ma=(t,e,n)=>(Lg(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zl(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const gt={},Fi=[],Bn=()=>{},Fg=()=>!1,Mg=/^on[^a-z]/,To=t=>Mg.test(t),jl=t=>t.startsWith("onUpdate:"),Ft=Object.assign,Wl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Ug=Object.prototype.hasOwnProperty,rt=(t,e)=>Ug.call(t,e),Ue=Array.isArray,Mi=t=>ko(t)==="[object Map]",ud=t=>ko(t)==="[object Set]",$e=t=>typeof t=="function",Bt=t=>typeof t=="string",ql=t=>typeof t=="symbol",pt=t=>t!==null&&typeof t=="object",ld=t=>pt(t)&&$e(t.then)&&$e(t.catch),cd=Object.prototype.toString,ko=t=>cd.call(t),zg=t=>ko(t).slice(8,-1),fd=t=>ko(t)==="[object Object]",$l=t=>Bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ia=zl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Oo=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},jg=/-(\w)/g,Vn=Oo(t=>t.replace(jg,(e,n)=>n?n.toUpperCase():"")),Wg=/\B([A-Z])/g,Ji=Oo(t=>t.replace(Wg,"-$1").toLowerCase()),Ro=Oo(t=>t.charAt(0).toUpperCase()+t.slice(1)),su=Oo(t=>t?`on${Ro(t)}`:""),Ps=(t,e)=>!Object.is(t,e),Na=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ga=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Mu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},qg=t=>{const e=Bt(t)?Number(t):NaN;return isNaN(e)?t:e};let rf;const Uu=()=>rf||(rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ci(t){if(Ue(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Bt(r)?Kg(r):ci(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(Bt(t))return t;if(pt(t))return t}}const $g=/;(?![^(]*\))/g,Hg=/:([^]+)/,Vg=/\/\*[^]*?\*\//g;function Kg(t){const e={};return t.replace(Vg,"").split($g).forEach(n=>{if(n){const r=n.split(Hg);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Jt(t){let e="";if(Bt(t))e=t;else if(Ue(t))for(let n=0;n<t.length;n++){const r=Jt(t[n]);r&&(e+=r+" ")}else if(pt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Yg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gg=zl(Yg);function hd(t){return!!t||t===""}const En=t=>Bt(t)?t:t==null?"":Ue(t)||pt(t)&&(t.toString===cd||!$e(t.toString))?JSON.stringify(t,dd,2):String(t),dd=(t,e)=>e&&e.__v_isRef?dd(t,e.value):Mi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ud(e)?{[`Set(${e.size})`]:[...e.values()]}:pt(e)&&!Ue(e)&&!fd(e)?String(e):e;let mn;class pd{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mn,!e&&mn&&(this.index=(mn.scopes||(mn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=mn;try{return mn=this,e()}finally{mn=n}}}on(){mn=this}off(){mn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function md(t){return new pd(t)}function Zg(t,e=mn){e&&e.active&&e.effects.push(t)}function Hl(){return mn}function gd(t){mn&&mn.cleanups.push(t)}const Vl=t=>{const e=new Set(t);return e.w=0,e.n=0,e},vd=t=>(t.w&Nr)>0,yd=t=>(t.n&Nr)>0,Xg=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Nr},Qg=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];vd(i)&&!yd(i)?i.delete(t):e[n++]=i,i.w&=~Nr,i.n&=~Nr}e.length=n}},Za=new WeakMap;let ys=0,Nr=1;const zu=30;let In;const Jr=Symbol(""),ju=Symbol("");class Kl{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Zg(this,r)}run(){if(!this.active)return this.fn();let e=In,n=Rr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=In,In=this,Rr=!0,Nr=1<<++ys,ys<=zu?Xg(this):sf(this),this.fn()}finally{ys<=zu&&Qg(this),Nr=1<<--ys,In=this.parent,Rr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){In===this?this.deferStop=!0:this.active&&(sf(this),this.onStop&&this.onStop(),this.active=!1)}}function sf(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Rr=!0;const bd=[];function es(){bd.push(Rr),Rr=!1}function ts(){const t=bd.pop();Rr=t===void 0?!0:t}function fn(t,e,n){if(Rr&&In){let r=Za.get(t);r||Za.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Vl()),_d(i)}}function _d(t,e){let n=!1;ys<=zu?yd(t)||(t.n|=Nr,n=!vd(t)):n=!t.has(In),n&&(t.add(In),In.deps.push(t))}function or(t,e,n,r,i,s){const a=Za.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(n==="length"&&Ue(t)){const u=Number(r);a.forEach((l,c)=>{(c==="length"||c>=u)&&o.push(l)})}else switch(n!==void 0&&o.push(a.get(n)),e){case"add":Ue(t)?$l(n)&&o.push(a.get("length")):(o.push(a.get(Jr)),Mi(t)&&o.push(a.get(ju)));break;case"delete":Ue(t)||(o.push(a.get(Jr)),Mi(t)&&o.push(a.get(ju)));break;case"set":Mi(t)&&o.push(a.get(Jr));break}if(o.length===1)o[0]&&Wu(o[0]);else{const u=[];for(const l of o)l&&u.push(...l);Wu(Vl(u))}}function Wu(t,e){const n=Ue(t)?t:[...t];for(const r of n)r.computed&&af(r);for(const r of n)r.computed||af(r)}function af(t,e){(t!==In||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Jg(t,e){var n;return(n=Za.get(t))==null?void 0:n.get(e)}const ev=zl("__proto__,__v_isRef,__isVue"),wd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ql)),tv=Yl(),nv=Yl(!1,!0),rv=Yl(!0),of=iv();function iv(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=nt(this);for(let s=0,a=this.length;s<a;s++)fn(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(nt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){es();const r=nt(this)[e].apply(this,n);return ts(),r}}),t}function sv(t){const e=nt(this);return fn(e,"has",t),e.hasOwnProperty(t)}function Yl(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?wv:Dd:e?Ad:Cd).get(r))return r;const a=Ue(r);if(!t){if(a&&rt(of,i))return Reflect.get(of,i,s);if(i==="hasOwnProperty")return sv}const o=Reflect.get(r,i,s);return(ql(i)?wd.has(i):ev(i))||(t||fn(r,"get",i),e)?o:wt(o)?a&&$l(i)?o:o.value:pt(o)?t?Td(o):na(o):o}}const av=Ed(),ov=Ed(!0);function Ed(t=!1){return function(n,r,i,s){let a=n[r];if($i(a)&&wt(a)&&!wt(i))return!1;if(!t&&(!Xa(i)&&!$i(i)&&(a=nt(a),i=nt(i)),!Ue(n)&&wt(a)&&!wt(i)))return a.value=i,!0;const o=Ue(n)&&$l(r)?Number(r)<n.length:rt(n,r),u=Reflect.set(n,r,i,s);return n===nt(s)&&(o?Ps(i,a)&&or(n,"set",r,i):or(n,"add",r,i)),u}}function uv(t,e){const n=rt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&or(t,"delete",e,void 0),r}function lv(t,e){const n=Reflect.has(t,e);return(!ql(e)||!wd.has(e))&&fn(t,"has",e),n}function cv(t){return fn(t,"iterate",Ue(t)?"length":Jr),Reflect.ownKeys(t)}const xd={get:tv,set:av,deleteProperty:uv,has:lv,ownKeys:cv},fv={get:rv,set(t,e){return!0},deleteProperty(t,e){return!0}},hv=Ft({},xd,{get:nv,set:ov}),Gl=t=>t,Io=t=>Reflect.getPrototypeOf(t);function ga(t,e,n=!1,r=!1){t=t.__v_raw;const i=nt(t),s=nt(e);n||(e!==s&&fn(i,"get",e),fn(i,"get",s));const{has:a}=Io(i),o=r?Gl:n?Ql:Ls;if(a.call(i,e))return o(t.get(e));if(a.call(i,s))return o(t.get(s));t!==i&&t.get(e)}function va(t,e=!1){const n=this.__v_raw,r=nt(n),i=nt(t);return e||(t!==i&&fn(r,"has",t),fn(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function ya(t,e=!1){return t=t.__v_raw,!e&&fn(nt(t),"iterate",Jr),Reflect.get(t,"size",t)}function uf(t){t=nt(t);const e=nt(this);return Io(e).has.call(e,t)||(e.add(t),or(e,"add",t,t)),this}function lf(t,e){e=nt(e);const n=nt(this),{has:r,get:i}=Io(n);let s=r.call(n,t);s||(t=nt(t),s=r.call(n,t));const a=i.call(n,t);return n.set(t,e),s?Ps(e,a)&&or(n,"set",t,e):or(n,"add",t,e),this}function cf(t){const e=nt(this),{has:n,get:r}=Io(e);let i=n.call(e,t);i||(t=nt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&or(e,"delete",t,void 0),s}function ff(){const t=nt(this),e=t.size!==0,n=t.clear();return e&&or(t,"clear",void 0,void 0),n}function ba(t,e){return function(r,i){const s=this,a=s.__v_raw,o=nt(a),u=e?Gl:t?Ql:Ls;return!t&&fn(o,"iterate",Jr),a.forEach((l,c)=>r.call(i,u(l),u(c),s))}}function _a(t,e,n){return function(...r){const i=this.__v_raw,s=nt(i),a=Mi(s),o=t==="entries"||t===Symbol.iterator&&a,u=t==="keys"&&a,l=i[t](...r),c=n?Gl:e?Ql:Ls;return!e&&fn(s,"iterate",u?ju:Jr),{next(){const{value:f,done:h}=l.next();return h?{value:f,done:h}:{value:o?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function vr(t){return function(...e){return t==="delete"?!1:this}}function dv(){const t={get(s){return ga(this,s)},get size(){return ya(this)},has:va,add:uf,set:lf,delete:cf,clear:ff,forEach:ba(!1,!1)},e={get(s){return ga(this,s,!1,!0)},get size(){return ya(this)},has:va,add:uf,set:lf,delete:cf,clear:ff,forEach:ba(!1,!0)},n={get(s){return ga(this,s,!0)},get size(){return ya(this,!0)},has(s){return va.call(this,s,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:ba(!0,!1)},r={get(s){return ga(this,s,!0,!0)},get size(){return ya(this,!0)},has(s){return va.call(this,s,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:ba(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=_a(s,!1,!1),n[s]=_a(s,!0,!1),e[s]=_a(s,!1,!0),r[s]=_a(s,!0,!0)}),[t,n,e,r]}const[pv,mv,gv,vv]=dv();function Zl(t,e){const n=e?t?vv:gv:t?mv:pv;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(rt(n,i)&&i in r?n:r,i,s)}const yv={get:Zl(!1,!1)},bv={get:Zl(!1,!0)},_v={get:Zl(!0,!1)},Cd=new WeakMap,Ad=new WeakMap,Dd=new WeakMap,wv=new WeakMap;function Ev(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xv(t){return t.__v_skip||!Object.isExtensible(t)?0:Ev(zg(t))}function na(t){return $i(t)?t:Xl(t,!1,xd,yv,Cd)}function Sd(t){return Xl(t,!1,hv,bv,Ad)}function Td(t){return Xl(t,!0,fv,_v,Dd)}function Xl(t,e,n,r,i){if(!pt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const a=xv(t);if(a===0)return t;const o=new Proxy(t,a===2?r:n);return i.set(t,o),o}function rr(t){return $i(t)?rr(t.__v_raw):!!(t&&t.__v_isReactive)}function $i(t){return!!(t&&t.__v_isReadonly)}function Xa(t){return!!(t&&t.__v_isShallow)}function kd(t){return rr(t)||$i(t)}function nt(t){const e=t&&t.__v_raw;return e?nt(e):t}function si(t){return Ga(t,"__v_skip",!0),t}const Ls=t=>pt(t)?na(t):t,Ql=t=>pt(t)?Td(t):t;function Od(t){Rr&&In&&(t=nt(t),_d(t.dep||(t.dep=Vl())))}function Rd(t,e){t=nt(t);const n=t.dep;n&&Wu(n)}function wt(t){return!!(t&&t.__v_isRef===!0)}function Ot(t){return Id(t,!1)}function Cv(t){return Id(t,!0)}function Id(t,e){return wt(t)?t:new Av(t,e)}class Av{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:nt(e),this._value=n?e:Ls(e)}get value(){return Od(this),this._value}set value(e){const n=this.__v_isShallow||Xa(e)||$i(e);e=n?e:nt(e),Ps(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Ls(e),Rd(this))}}function Ie(t){return wt(t)?t.value:t}const Dv={get:(t,e,n)=>Ie(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return wt(i)&&!wt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Nd(t){return rr(t)?t:new Proxy(t,Dv)}function rn(t){const e=Ue(t)?new Array(t.length):{};for(const n in t)e[n]=Bd(t,n);return e}class Sv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Jg(nt(this._object),this._key)}}class Tv{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function kv(t,e,n){return wt(t)?t:$e(t)?new Tv(t):pt(t)&&arguments.length>1?Bd(t,e,n):Ot(t)}function Bd(t,e,n){const r=t[e];return wt(r)?r:new Sv(t,e,n)}class Ov{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Kl(e,()=>{this._dirty||(this._dirty=!0,Rd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=nt(this);return Od(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Rv(t,e,n=!1){let r,i;const s=$e(t);return s?(r=t,i=Bn):(r=t.get,i=t.set),new Ov(r,i,s||!i,n)}function Ir(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){No(s,e,n)}return i}function Cn(t,e,n,r){if($e(t)){const s=Ir(t,e,n,r);return s&&ld(s)&&s.catch(a=>{No(a,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Cn(t[s],e,n,r));return i}function No(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=n;for(;s;){const l=s.ec;if(l){for(let c=0;c<l.length;c++)if(l[c](t,a,o)===!1)return}s=s.parent}const u=e.appContext.config.errorHandler;if(u){Ir(u,null,10,[t,a,o]);return}}Iv(t,n,i,r)}function Iv(t,e,n,r=!0){console.error(t)}let Fs=!1,qu=!1;const Gt=[];let Wn=0;const Ui=[];let Qn=null,Kr=0;const Pd=Promise.resolve();let Jl=null;function ec(t){const e=Jl||Pd;return t?e.then(this?t.bind(this):t):e}function Nv(t){let e=Wn+1,n=Gt.length;for(;e<n;){const r=e+n>>>1;Ms(Gt[r])<t?e=r+1:n=r}return e}function tc(t){(!Gt.length||!Gt.includes(t,Fs&&t.allowRecurse?Wn+1:Wn))&&(t.id==null?Gt.push(t):Gt.splice(Nv(t.id),0,t),Ld())}function Ld(){!Fs&&!qu&&(qu=!0,Jl=Pd.then(Md))}function Bv(t){const e=Gt.indexOf(t);e>Wn&&Gt.splice(e,1)}function Pv(t){Ue(t)?Ui.push(...t):(!Qn||!Qn.includes(t,t.allowRecurse?Kr+1:Kr))&&Ui.push(t),Ld()}function hf(t,e=Fs?Wn+1:0){for(;e<Gt.length;e++){const n=Gt[e];n&&n.pre&&(Gt.splice(e,1),e--,n())}}function Fd(t){if(Ui.length){const e=[...new Set(Ui)];if(Ui.length=0,Qn){Qn.push(...e);return}for(Qn=e,Qn.sort((n,r)=>Ms(n)-Ms(r)),Kr=0;Kr<Qn.length;Kr++)Qn[Kr]();Qn=null,Kr=0}}const Ms=t=>t.id==null?1/0:t.id,Lv=(t,e)=>{const n=Ms(t)-Ms(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Md(t){qu=!1,Fs=!0,Gt.sort(Lv);const e=Bn;try{for(Wn=0;Wn<Gt.length;Wn++){const n=Gt[Wn];n&&n.active!==!1&&Ir(n,null,14)}}finally{Wn=0,Gt.length=0,Fd(),Fs=!1,Jl=null,(Gt.length||Ui.length)&&Md()}}function Fv(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||gt;let i=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=r[c]||gt;h&&(i=n.map(p=>Bt(p)?p.trim():p)),f&&(i=n.map(Mu))}let o,u=r[o=su(e)]||r[o=su(Vn(e))];!u&&s&&(u=r[o=su(Ji(e))]),u&&Cn(u,t,6,i);const l=r[o+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Cn(l,t,6,i)}}function Ud(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let a={},o=!1;if(!$e(t)){const u=l=>{const c=Ud(l,e,!0);c&&(o=!0,Ft(a,c))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!s&&!o?(pt(t)&&r.set(t,null),null):(Ue(s)?s.forEach(u=>a[u]=null):Ft(a,s),pt(t)&&r.set(t,a),a)}function Bo(t,e){return!t||!To(e)?!1:(e=e.slice(2).replace(/Once$/,""),rt(t,e[0].toLowerCase()+e.slice(1))||rt(t,Ji(e))||rt(t,e))}let Wt=null,Po=null;function Qa(t){const e=Wt;return Wt=t,Po=t&&t.type.__scopeId||null,e}function dr(t){Po=t}function pr(){Po=null}function yt(t,e=Wt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Cf(-1);const s=Qa(e);let a;try{a=t(...i)}finally{Qa(s),r._d&&Cf(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function au(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:o,attrs:u,emit:l,render:c,renderCache:f,data:h,setupState:p,ctx:E,inheritAttrs:x}=t;let v,d;const m=Qa(t);try{if(n.shapeFlag&4){const w=i||r;v=jn(c.call(w,w,f,s,p,h,E)),d=u}else{const w=e;v=jn(w.length>1?w(s,{attrs:u,slots:o,emit:l}):w(s,null)),d=e.props?u:Mv(u)}}catch(w){As.length=0,No(w,t,1),v=We(Dn)}let y=v;if(d&&x!==!1){const w=Object.keys(d),{shapeFlag:g}=y;w.length&&g&7&&(a&&w.some(jl)&&(d=Uv(d,a)),y=Br(y,d))}return n.dirs&&(y=Br(y),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),v=y,Qa(m),v}const Mv=t=>{let e;for(const n in t)(n==="class"||n==="style"||To(n))&&((e||(e={}))[n]=t[n]);return e},Uv=(t,e)=>{const n={};for(const r in t)(!jl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function zv(t,e,n){const{props:r,children:i,component:s}=t,{props:a,children:o,patchFlag:u}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?df(r,a,l):!!a;if(u&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==r[h]&&!Bo(l,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?df(r,a,l):!0:!!a;return!1}function df(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Bo(n,s))return!0}return!1}function jv({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Wv=t=>t.__isSuspense;function qv(t,e){e&&e.pendingBranch?Ue(t)?e.effects.push(...t):e.effects.push(t):Pv(t)}function zd(t,e){return nc(t,null,e)}const wa={};function ei(t,e,n){return nc(t,e,n)}function nc(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=gt){var o;const u=Hl()===((o=Ut)==null?void 0:o.scope)?Ut:null;let l,c=!1,f=!1;if(wt(t)?(l=()=>t.value,c=Xa(t)):rr(t)?(l=()=>t,r=!0):Ue(t)?(f=!0,c=t.some(w=>rr(w)||Xa(w)),l=()=>t.map(w=>{if(wt(w))return w.value;if(rr(w))return Zr(w);if($e(w))return Ir(w,u,2)})):$e(t)?e?l=()=>Ir(t,u,2):l=()=>{if(!(u&&u.isUnmounted))return h&&h(),Cn(t,u,3,[p])}:l=Bn,e&&r){const w=l;l=()=>Zr(w())}let h,p=w=>{h=m.onStop=()=>{Ir(w,u,4)}},E;if(js)if(p=Bn,e?n&&Cn(e,u,3,[l(),f?[]:void 0,p]):l(),i==="sync"){const w=M0();E=w.__watcherHandles||(w.__watcherHandles=[])}else return Bn;let x=f?new Array(t.length).fill(wa):wa;const v=()=>{if(m.active)if(e){const w=m.run();(r||c||(f?w.some((g,_)=>Ps(g,x[_])):Ps(w,x)))&&(h&&h(),Cn(e,u,3,[w,x===wa?void 0:f&&x[0]===wa?[]:x,p]),x=w)}else m.run()};v.allowRecurse=!!e;let d;i==="sync"?d=v:i==="post"?d=()=>ln(v,u&&u.suspense):(v.pre=!0,u&&(v.id=u.uid),d=()=>tc(v));const m=new Kl(l,d);e?n?v():x=m.run():i==="post"?ln(m.run.bind(m),u&&u.suspense):m.run();const y=()=>{m.stop(),u&&u.scope&&Wl(u.scope.effects,m)};return E&&E.push(y),y}function $v(t,e,n){const r=this.proxy,i=Bt(t)?t.includes(".")?jd(r,t):()=>r[t]:t.bind(r,r);let s;$e(e)?s=e:(s=e.handler,n=e);const a=Ut;Hi(this);const o=nc(i,s.bind(r),n);return a?Hi(a):ti(),o}function jd(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Zr(t,e){if(!pt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),wt(t))Zr(t.value,e);else if(Ue(t))for(let n=0;n<t.length;n++)Zr(t[n],e);else if(ud(t)||Mi(t))t.forEach(n=>{Zr(n,e)});else if(fd(t))for(const n in t)Zr(t[n],e);return t}function Hv(t,e){const n=Wt;if(n===null)return t;const r=zo(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,u,l=gt]=e[s];a&&($e(a)&&(a={mounted:a,updated:a}),a.deep&&Zr(o),i.push({dir:a,instance:r,value:o,oldValue:void 0,arg:u,modifiers:l}))}return t}function jr(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let u=o.dir[r];u&&(es(),Cn(u,n,8,[t.el,o,t,e]),ts())}}function Vv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ns(()=>{t.isMounted=!0}),Vd(()=>{t.isUnmounting=!0}),t}const _n=[Function,Array],Wd={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_n,onEnter:_n,onAfterEnter:_n,onEnterCancelled:_n,onBeforeLeave:_n,onLeave:_n,onAfterLeave:_n,onLeaveCancelled:_n,onBeforeAppear:_n,onAppear:_n,onAfterAppear:_n,onAppearCancelled:_n},Kv={name:"BaseTransition",props:Wd,setup(t,{slots:e}){const n=O0(),r=Vv();let i;return()=>{const s=e.default&&$d(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const x of s)if(x.type!==Dn){a=x;break}}const o=nt(t),{mode:u}=o;if(r.isLeaving)return ou(a);const l=pf(a);if(!l)return ou(a);const c=$u(l,o,r,n);Hu(l,c);const f=n.subTree,h=f&&pf(f);let p=!1;const{getTransitionKey:E}=l.type;if(E){const x=E();i===void 0?i=x:x!==i&&(i=x,p=!0)}if(h&&h.type!==Dn&&(!Yr(l,h)||p)){const x=$u(h,o,r,n);if(Hu(h,x),u==="out-in")return r.isLeaving=!0,x.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},ou(a);u==="in-out"&&l.type!==Dn&&(x.delayLeave=(v,d,m)=>{const y=qd(r,h);y[String(h.key)]=h,v._leaveCb=()=>{d(),v._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=m})}return a}}},Yv=Kv;function qd(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function $u(t,e,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:u,onAfterEnter:l,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:E,onBeforeAppear:x,onAppear:v,onAfterAppear:d,onAppearCancelled:m}=e,y=String(t.key),w=qd(n,t),g=(S,O)=>{S&&Cn(S,r,9,O)},_=(S,O)=>{const B=O[1];g(S,O),Ue(S)?S.every(q=>q.length<=1)&&B():S.length<=1&&B()},C={mode:s,persisted:a,beforeEnter(S){let O=o;if(!n.isMounted)if(i)O=x||o;else return;S._leaveCb&&S._leaveCb(!0);const B=w[y];B&&Yr(t,B)&&B.el._leaveCb&&B.el._leaveCb(),g(O,[S])},enter(S){let O=u,B=l,q=c;if(!n.isMounted)if(i)O=v||u,B=d||l,q=m||c;else return;let M=!1;const X=S._enterCb=he=>{M||(M=!0,he?g(q,[S]):g(B,[S]),C.delayedLeave&&C.delayedLeave(),S._enterCb=void 0)};O?_(O,[S,X]):X()},leave(S,O){const B=String(t.key);if(S._enterCb&&S._enterCb(!0),n.isUnmounting)return O();g(f,[S]);let q=!1;const M=S._leaveCb=X=>{q||(q=!0,O(),X?g(E,[S]):g(p,[S]),S._leaveCb=void 0,w[B]===t&&delete w[B])};w[B]=t,h?_(h,[S,M]):M()},clone(S){return $u(S,e,n,r)}};return C}function ou(t){if(Lo(t))return t=Br(t),t.children=null,t}function pf(t){return Lo(t)?t.children?t.children[0]:void 0:t}function Hu(t,e){t.shapeFlag&6&&t.component?Hu(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function $d(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let a=t[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===Tt?(a.patchFlag&128&&i++,r=r.concat($d(a.children,e,o))):(e||a.type!==Dn)&&r.push(o!=null?Br(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function ct(t,e){return $e(t)?(()=>Ft({name:t.name},e,{setup:t}))():t}const xs=t=>!!t.type.__asyncLoader,Lo=t=>t.type.__isKeepAlive;function Gv(t,e){Hd(t,"a",e)}function Zv(t,e){Hd(t,"da",e)}function Hd(t,e,n=Ut){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Fo(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Lo(i.parent.vnode)&&Xv(r,e,n,i),i=i.parent}}function Xv(t,e,n,r){const i=Fo(e,t,r,!0);Kd(()=>{Wl(r[e],i)},n)}function Fo(t,e,n=Ut,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;es(),Hi(n);const o=Cn(e,n,t,a);return ti(),ts(),o});return r?i.unshift(s):i.push(s),s}}const mr=t=>(e,n=Ut)=>(!js||t==="sp")&&Fo(t,(...r)=>e(...r),n),Qv=mr("bm"),ns=mr("m"),Jv=mr("bu"),e0=mr("u"),Vd=mr("bum"),Kd=mr("um"),t0=mr("sp"),n0=mr("rtg"),r0=mr("rtc");function i0(t,e=Ut){Fo("ec",t,e)}const rc="components";function rs(t,e){return Gd(rc,t,!0,e)||t}const Yd=Symbol.for("v-ndc");function s0(t){return Bt(t)?Gd(rc,t,!1)||t:t||Yd}function Gd(t,e,n=!0,r=!1){const i=Wt||Ut;if(i){const s=i.type;if(t===rc){const o=P0(s,!1);if(o&&(o===e||o===Vn(e)||o===Ro(Vn(e))))return s}const a=mf(i[t]||s[t],e)||mf(i.appContext[t],e);return!a&&r?s:a}}function mf(t,e){return t&&(t[e]||t[Vn(e)]||t[Ro(Vn(e))])}function Mr(t,e,n,r){let i;const s=n&&n[r];if(Ue(t)||Bt(t)){i=new Array(t.length);for(let a=0,o=t.length;a<o;a++)i[a]=e(t[a],a,void 0,s&&s[a])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(pt(t))if(t[Symbol.iterator])i=Array.from(t,(a,o)=>e(a,o,void 0,s&&s[o]));else{const a=Object.keys(t);i=new Array(a.length);for(let o=0,u=a.length;o<u;o++){const l=a[o];i[o]=e(t[l],l,o,s&&s[o])}}else i=[];return n&&(n[r]=i),i}function Vu(t,e,n={},r,i){if(Wt.isCE||Wt.parent&&xs(Wt.parent)&&Wt.parent.isCE)return e!=="default"&&(n.name=e),We("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),xe();const a=s&&Zd(s(n)),o=St(Tt,{key:n.key||a&&a.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Zd(t){return t.some(e=>eo(e)?!(e.type===Dn||e.type===Tt&&!Zd(e.children)):!0)?t:null}const Ku=t=>t?op(t)?zo(t)||t.proxy:Ku(t.parent):null,Cs=Ft(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ku(t.parent),$root:t=>Ku(t.root),$emit:t=>t.emit,$options:t=>ic(t),$forceUpdate:t=>t.f||(t.f=()=>tc(t.update)),$nextTick:t=>t.n||(t.n=ec.bind(t.proxy)),$watch:t=>$v.bind(t)}),uu=(t,e)=>t!==gt&&!t.__isScriptSetup&&rt(t,e),a0={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:u}=t;let l;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(uu(r,e))return a[e]=1,r[e];if(i!==gt&&rt(i,e))return a[e]=2,i[e];if((l=t.propsOptions[0])&&rt(l,e))return a[e]=3,s[e];if(n!==gt&&rt(n,e))return a[e]=4,n[e];Yu&&(a[e]=0)}}const c=Cs[e];let f,h;if(c)return e==="$attrs"&&fn(t,"get",e),c(t);if((f=o.__cssModules)&&(f=f[e]))return f;if(n!==gt&&rt(n,e))return a[e]=4,n[e];if(h=u.config.globalProperties,rt(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return uu(i,e)?(i[e]=n,!0):r!==gt&&rt(r,e)?(r[e]=n,!0):rt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||t!==gt&&rt(t,a)||uu(e,a)||(o=s[0])&&rt(o,a)||rt(r,a)||rt(Cs,a)||rt(i.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:rt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function gf(t){return Ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Yu=!0;function o0(t){const e=ic(t),n=t.proxy,r=t.ctx;Yu=!1,e.beforeCreate&&vf(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:o,provide:u,inject:l,created:c,beforeMount:f,mounted:h,beforeUpdate:p,updated:E,activated:x,deactivated:v,beforeDestroy:d,beforeUnmount:m,destroyed:y,unmounted:w,render:g,renderTracked:_,renderTriggered:C,errorCaptured:S,serverPrefetch:O,expose:B,inheritAttrs:q,components:M,directives:X,filters:he}=e;if(l&&u0(l,r,null),a)for(const te in a){const ie=a[te];$e(ie)&&(r[te]=ie.bind(n))}if(i){const te=i.call(n,n);pt(te)&&(t.data=na(te))}if(Yu=!0,s)for(const te in s){const ie=s[te],Pe=$e(ie)?ie.bind(n,n):$e(ie.get)?ie.get.bind(n,n):Bn,Ke=!$e(ie)&&$e(ie.set)?ie.set.bind(n):Bn,He=kt({get:Pe,set:Ke});Object.defineProperty(r,te,{enumerable:!0,configurable:!0,get:()=>He.value,set:Ce=>He.value=Ce})}if(o)for(const te in o)Xd(o[te],r,n,te);if(u){const te=$e(u)?u.call(n):u;Reflect.ownKeys(te).forEach(ie=>{Ba(ie,te[ie])})}c&&vf(c,t,"c");function ee(te,ie){Ue(ie)?ie.forEach(Pe=>te(Pe.bind(n))):ie&&te(ie.bind(n))}if(ee(Qv,f),ee(ns,h),ee(Jv,p),ee(e0,E),ee(Gv,x),ee(Zv,v),ee(i0,S),ee(r0,_),ee(n0,C),ee(Vd,m),ee(Kd,w),ee(t0,O),Ue(B))if(B.length){const te=t.exposed||(t.exposed={});B.forEach(ie=>{Object.defineProperty(te,ie,{get:()=>n[ie],set:Pe=>n[ie]=Pe})})}else t.exposed||(t.exposed={});g&&t.render===Bn&&(t.render=g),q!=null&&(t.inheritAttrs=q),M&&(t.components=M),X&&(t.directives=X)}function u0(t,e,n=Bn){Ue(t)&&(t=Gu(t));for(const r in t){const i=t[r];let s;pt(i)?"default"in i?s=An(i.from||r,i.default,!0):s=An(i.from||r):s=An(i),wt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function vf(t,e,n){Cn(Ue(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Xd(t,e,n,r){const i=r.includes(".")?jd(n,r):()=>n[r];if(Bt(t)){const s=e[t];$e(s)&&ei(i,s)}else if($e(t))ei(i,t.bind(n));else if(pt(t))if(Ue(t))t.forEach(s=>Xd(s,e,n,r));else{const s=$e(t.handler)?t.handler.bind(n):e[t.handler];$e(s)&&ei(i,s,t)}}function ic(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let u;return o?u=o:!i.length&&!n&&!r?u=e:(u={},i.length&&i.forEach(l=>Ja(u,l,a,!0)),Ja(u,e,a)),pt(e)&&s.set(e,u),u}function Ja(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Ja(t,s,n,!0),i&&i.forEach(a=>Ja(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const o=l0[a]||n&&n[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const l0={data:yf,props:bf,emits:bf,methods:bs,computed:bs,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:bs,directives:bs,watch:f0,provide:yf,inject:c0};function yf(t,e){return e?t?function(){return Ft($e(t)?t.call(this,this):t,$e(e)?e.call(this,this):e)}:e:t}function c0(t,e){return bs(Gu(t),Gu(e))}function Gu(t){if(Ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function tn(t,e){return t?[...new Set([].concat(t,e))]:e}function bs(t,e){return t?Ft(Object.create(null),t,e):e}function bf(t,e){return t?Ue(t)&&Ue(e)?[...new Set([...t,...e])]:Ft(Object.create(null),gf(t),gf(e??{})):e}function f0(t,e){if(!t)return e;if(!e)return t;const n=Ft(Object.create(null),t);for(const r in e)n[r]=tn(t[r],e[r]);return n}function Qd(){return{app:null,config:{isNativeTag:Fg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let h0=0;function d0(t,e){return function(r,i=null){$e(r)||(r=Ft({},r)),i!=null&&!pt(i)&&(i=null);const s=Qd(),a=new Set;let o=!1;const u=s.app={_uid:h0++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:U0,get config(){return s.config},set config(l){},use(l,...c){return a.has(l)||(l&&$e(l.install)?(a.add(l),l.install(u,...c)):$e(l)&&(a.add(l),l(u,...c))),u},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),u},component(l,c){return c?(s.components[l]=c,u):s.components[l]},directive(l,c){return c?(s.directives[l]=c,u):s.directives[l]},mount(l,c,f){if(!o){const h=We(r,i);return h.appContext=s,c&&e?e(h,l):t(h,l,f),o=!0,u._container=l,l.__vue_app__=u,zo(h.component)||h.component.proxy}},unmount(){o&&(t(null,u._container),delete u._container.__vue_app__)},provide(l,c){return s.provides[l]=c,u},runWithContext(l){Us=u;try{return l()}finally{Us=null}}};return u}}let Us=null;function Ba(t,e){if(Ut){let n=Ut.provides;const r=Ut.parent&&Ut.parent.provides;r===n&&(n=Ut.provides=Object.create(r)),n[t]=e}}function An(t,e,n=!1){const r=Ut||Wt;if(r||Us){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Us._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&$e(e)?e.call(r&&r.proxy):e}}function p0(){return!!(Ut||Wt||Us)}function m0(t,e,n,r=!1){const i={},s={};Ga(s,Uo,1),t.propsDefaults=Object.create(null),Jd(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:Sd(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function g0(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,o=nt(i),[u]=t.propsOptions;let l=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(Bo(t.emitsOptions,h))continue;const p=e[h];if(u)if(rt(s,h))p!==s[h]&&(s[h]=p,l=!0);else{const E=Vn(h);i[E]=Zu(u,o,E,p,t,!1)}else p!==s[h]&&(s[h]=p,l=!0)}}}else{Jd(t,e,i,s)&&(l=!0);let c;for(const f in o)(!e||!rt(e,f)&&((c=Ji(f))===f||!rt(e,c)))&&(u?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=Zu(u,o,f,void 0,t,!0)):delete i[f]);if(s!==o)for(const f in s)(!e||!rt(e,f))&&(delete s[f],l=!0)}l&&or(t,"set","$attrs")}function Jd(t,e,n,r){const[i,s]=t.propsOptions;let a=!1,o;if(e)for(let u in e){if(Ia(u))continue;const l=e[u];let c;i&&rt(i,c=Vn(u))?!s||!s.includes(c)?n[c]=l:(o||(o={}))[c]=l:Bo(t.emitsOptions,u)||(!(u in r)||l!==r[u])&&(r[u]=l,a=!0)}if(s){const u=nt(n),l=o||gt;for(let c=0;c<s.length;c++){const f=s[c];n[f]=Zu(i,u,f,l[f],t,!rt(l,f))}}return a}function Zu(t,e,n,r,i,s){const a=t[n];if(a!=null){const o=rt(a,"default");if(o&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&$e(u)){const{propsDefaults:l}=i;n in l?r=l[n]:(Hi(i),r=l[n]=u.call(null,e),ti())}else r=u}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Ji(n))&&(r=!0))}return r}function ep(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,a={},o=[];let u=!1;if(!$e(t)){const c=f=>{u=!0;const[h,p]=ep(f,e,!0);Ft(a,h),p&&o.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!u)return pt(t)&&r.set(t,Fi),Fi;if(Ue(s))for(let c=0;c<s.length;c++){const f=Vn(s[c]);_f(f)&&(a[f]=gt)}else if(s)for(const c in s){const f=Vn(c);if(_f(f)){const h=s[c],p=a[f]=Ue(h)||$e(h)?{type:h}:Ft({},h);if(p){const E=xf(Boolean,p.type),x=xf(String,p.type);p[0]=E>-1,p[1]=x<0||E<x,(E>-1||rt(p,"default"))&&o.push(f)}}}const l=[a,o];return pt(t)&&r.set(t,l),l}function _f(t){return t[0]!=="$"}function wf(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Ef(t,e){return wf(t)===wf(e)}function xf(t,e){return Ue(e)?e.findIndex(n=>Ef(n,t)):$e(e)&&Ef(e,t)?0:-1}const tp=t=>t[0]==="_"||t==="$stable",sc=t=>Ue(t)?t.map(jn):[jn(t)],v0=(t,e,n)=>{if(e._n)return e;const r=yt((...i)=>sc(e(...i)),n);return r._c=!1,r},np=(t,e,n)=>{const r=t._ctx;for(const i in t){if(tp(i))continue;const s=t[i];if($e(s))e[i]=v0(i,s,r);else if(s!=null){const a=sc(s);e[i]=()=>a}}},rp=(t,e)=>{const n=sc(e);t.slots.default=()=>n},y0=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=nt(e),Ga(e,"_",n)):np(e,t.slots={})}else t.slots={},e&&rp(t,e);Ga(t.slots,Uo,1)},b0=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,a=gt;if(r.shapeFlag&32){const o=e._;o?n&&o===1?s=!1:(Ft(i,e),!n&&o===1&&delete i._):(s=!e.$stable,np(e,i)),a=e}else e&&(rp(t,e),a={default:1});if(s)for(const o in i)!tp(o)&&!(o in a)&&delete i[o]};function Xu(t,e,n,r,i=!1){if(Ue(t)){t.forEach((h,p)=>Xu(h,e&&(Ue(e)?e[p]:e),n,r,i));return}if(xs(r)&&!i)return;const s=r.shapeFlag&4?zo(r.component)||r.component.proxy:r.el,a=i?null:s,{i:o,r:u}=t,l=e&&e.r,c=o.refs===gt?o.refs={}:o.refs,f=o.setupState;if(l!=null&&l!==u&&(Bt(l)?(c[l]=null,rt(f,l)&&(f[l]=null)):wt(l)&&(l.value=null)),$e(u))Ir(u,o,12,[a,c]);else{const h=Bt(u),p=wt(u);if(h||p){const E=()=>{if(t.f){const x=h?rt(f,u)?f[u]:c[u]:u.value;i?Ue(x)&&Wl(x,s):Ue(x)?x.includes(s)||x.push(s):h?(c[u]=[s],rt(f,u)&&(f[u]=c[u])):(u.value=[s],t.k&&(c[t.k]=u.value))}else h?(c[u]=a,rt(f,u)&&(f[u]=a)):p&&(u.value=a,t.k&&(c[t.k]=a))};a?(E.id=-1,ln(E,n)):E()}}}const ln=qv;function _0(t){return w0(t)}function w0(t,e){const n=Uu();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:u,setText:l,setElementText:c,parentNode:f,nextSibling:h,setScopeId:p=Bn,insertStaticContent:E}=t,x=(I,N,j,V=null,Q=null,G=null,me=!1,fe=null,de=!!N.dynamicChildren)=>{if(I===N)return;I&&!Yr(I,N)&&(V=Y(I),Ce(I,Q,G,!0),I=null),N.patchFlag===-2&&(de=!1,N.dynamicChildren=null);const{type:ne,ref:be,shapeFlag:ue}=N;switch(ne){case Mo:v(I,N,j,V);break;case Dn:d(I,N,j,V);break;case lu:I==null&&m(N,j,V,me);break;case Tt:M(I,N,j,V,Q,G,me,fe,de);break;default:ue&1?g(I,N,j,V,Q,G,me,fe,de):ue&6?X(I,N,j,V,Q,G,me,fe,de):(ue&64||ue&128)&&ne.process(I,N,j,V,Q,G,me,fe,de,ce)}be!=null&&Q&&Xu(be,I&&I.ref,G,N||I,!N)},v=(I,N,j,V)=>{if(I==null)r(N.el=o(N.children),j,V);else{const Q=N.el=I.el;N.children!==I.children&&l(Q,N.children)}},d=(I,N,j,V)=>{I==null?r(N.el=u(N.children||""),j,V):N.el=I.el},m=(I,N,j,V)=>{[I.el,I.anchor]=E(I.children,N,j,V,I.el,I.anchor)},y=({el:I,anchor:N},j,V)=>{let Q;for(;I&&I!==N;)Q=h(I),r(I,j,V),I=Q;r(N,j,V)},w=({el:I,anchor:N})=>{let j;for(;I&&I!==N;)j=h(I),i(I),I=j;i(N)},g=(I,N,j,V,Q,G,me,fe,de)=>{me=me||N.type==="svg",I==null?_(N,j,V,Q,G,me,fe,de):O(I,N,Q,G,me,fe,de)},_=(I,N,j,V,Q,G,me,fe)=>{let de,ne;const{type:be,props:ue,shapeFlag:Ae,transition:Ne,dirs:ze}=I;if(de=I.el=a(I.type,G,ue&&ue.is,ue),Ae&8?c(de,I.children):Ae&16&&S(I.children,de,null,V,Q,G&&be!=="foreignObject",me,fe),ze&&jr(I,null,V,"created"),C(de,I,I.scopeId,me,V),ue){for(const Ye in ue)Ye!=="value"&&!Ia(Ye)&&s(de,Ye,null,ue[Ye],G,I.children,V,Q,Ze);"value"in ue&&s(de,"value",null,ue.value),(ne=ue.onVnodeBeforeMount)&&Mn(ne,V,I)}ze&&jr(I,null,V,"beforeMount");const qe=(!Q||Q&&!Q.pendingBranch)&&Ne&&!Ne.persisted;qe&&Ne.beforeEnter(de),r(de,N,j),((ne=ue&&ue.onVnodeMounted)||qe||ze)&&ln(()=>{ne&&Mn(ne,V,I),qe&&Ne.enter(de),ze&&jr(I,null,V,"mounted")},Q)},C=(I,N,j,V,Q)=>{if(j&&p(I,j),V)for(let G=0;G<V.length;G++)p(I,V[G]);if(Q){let G=Q.subTree;if(N===G){const me=Q.vnode;C(I,me,me.scopeId,me.slotScopeIds,Q.parent)}}},S=(I,N,j,V,Q,G,me,fe,de=0)=>{for(let ne=de;ne<I.length;ne++){const be=I[ne]=fe?Ar(I[ne]):jn(I[ne]);x(null,be,N,j,V,Q,G,me,fe)}},O=(I,N,j,V,Q,G,me)=>{const fe=N.el=I.el;let{patchFlag:de,dynamicChildren:ne,dirs:be}=N;de|=I.patchFlag&16;const ue=I.props||gt,Ae=N.props||gt;let Ne;j&&Wr(j,!1),(Ne=Ae.onVnodeBeforeUpdate)&&Mn(Ne,j,N,I),be&&jr(N,I,j,"beforeUpdate"),j&&Wr(j,!0);const ze=Q&&N.type!=="foreignObject";if(ne?B(I.dynamicChildren,ne,fe,j,V,ze,G):me||ie(I,N,fe,null,j,V,ze,G,!1),de>0){if(de&16)q(fe,N,ue,Ae,j,V,Q);else if(de&2&&ue.class!==Ae.class&&s(fe,"class",null,Ae.class,Q),de&4&&s(fe,"style",ue.style,Ae.style,Q),de&8){const qe=N.dynamicProps;for(let Ye=0;Ye<qe.length;Ye++){const it=qe[Ye],dt=ue[it],Kt=Ae[it];(Kt!==dt||it==="value")&&s(fe,it,dt,Kt,Q,I.children,j,V,Ze)}}de&1&&I.children!==N.children&&c(fe,N.children)}else!me&&ne==null&&q(fe,N,ue,Ae,j,V,Q);((Ne=Ae.onVnodeUpdated)||be)&&ln(()=>{Ne&&Mn(Ne,j,N,I),be&&jr(N,I,j,"updated")},V)},B=(I,N,j,V,Q,G,me)=>{for(let fe=0;fe<N.length;fe++){const de=I[fe],ne=N[fe],be=de.el&&(de.type===Tt||!Yr(de,ne)||de.shapeFlag&70)?f(de.el):j;x(de,ne,be,null,V,Q,G,me,!0)}},q=(I,N,j,V,Q,G,me)=>{if(j!==V){if(j!==gt)for(const fe in j)!Ia(fe)&&!(fe in V)&&s(I,fe,j[fe],null,me,N.children,Q,G,Ze);for(const fe in V){if(Ia(fe))continue;const de=V[fe],ne=j[fe];de!==ne&&fe!=="value"&&s(I,fe,ne,de,me,N.children,Q,G,Ze)}"value"in V&&s(I,"value",j.value,V.value)}},M=(I,N,j,V,Q,G,me,fe,de)=>{const ne=N.el=I?I.el:o(""),be=N.anchor=I?I.anchor:o("");let{patchFlag:ue,dynamicChildren:Ae,slotScopeIds:Ne}=N;Ne&&(fe=fe?fe.concat(Ne):Ne),I==null?(r(ne,j,V),r(be,j,V),S(N.children,j,be,Q,G,me,fe,de)):ue>0&&ue&64&&Ae&&I.dynamicChildren?(B(I.dynamicChildren,Ae,j,Q,G,me,fe),(N.key!=null||Q&&N===Q.subTree)&&ip(I,N,!0)):ie(I,N,j,be,Q,G,me,fe,de)},X=(I,N,j,V,Q,G,me,fe,de)=>{N.slotScopeIds=fe,I==null?N.shapeFlag&512?Q.ctx.activate(N,j,V,me,de):he(N,j,V,Q,G,me,de):oe(I,N,de)},he=(I,N,j,V,Q,G,me)=>{const fe=I.component=k0(I,V,Q);if(Lo(I)&&(fe.ctx.renderer=ce),R0(fe),fe.asyncDep){if(Q&&Q.registerDep(fe,ee),!I.el){const de=fe.subTree=We(Dn);d(null,de,N,j)}return}ee(fe,I,N,j,Q,G,me)},oe=(I,N,j)=>{const V=N.component=I.component;if(zv(I,N,j))if(V.asyncDep&&!V.asyncResolved){te(V,N,j);return}else V.next=N,Bv(V.update),V.update();else N.el=I.el,V.vnode=N},ee=(I,N,j,V,Q,G,me)=>{const fe=()=>{if(I.isMounted){let{next:be,bu:ue,u:Ae,parent:Ne,vnode:ze}=I,qe=be,Ye;Wr(I,!1),be?(be.el=ze.el,te(I,be,me)):be=ze,ue&&Na(ue),(Ye=be.props&&be.props.onVnodeBeforeUpdate)&&Mn(Ye,Ne,be,ze),Wr(I,!0);const it=au(I),dt=I.subTree;I.subTree=it,x(dt,it,f(dt.el),Y(dt),I,Q,G),be.el=it.el,qe===null&&jv(I,it.el),Ae&&ln(Ae,Q),(Ye=be.props&&be.props.onVnodeUpdated)&&ln(()=>Mn(Ye,Ne,be,ze),Q)}else{let be;const{el:ue,props:Ae}=N,{bm:Ne,m:ze,parent:qe}=I,Ye=xs(N);if(Wr(I,!1),Ne&&Na(Ne),!Ye&&(be=Ae&&Ae.onVnodeBeforeMount)&&Mn(be,qe,N),Wr(I,!0),ue&&ke){const it=()=>{I.subTree=au(I),ke(ue,I.subTree,I,Q,null)};Ye?N.type.__asyncLoader().then(()=>!I.isUnmounted&&it()):it()}else{const it=I.subTree=au(I);x(null,it,j,V,I,Q,G),N.el=it.el}if(ze&&ln(ze,Q),!Ye&&(be=Ae&&Ae.onVnodeMounted)){const it=N;ln(()=>Mn(be,qe,it),Q)}(N.shapeFlag&256||qe&&xs(qe.vnode)&&qe.vnode.shapeFlag&256)&&I.a&&ln(I.a,Q),I.isMounted=!0,N=j=V=null}},de=I.effect=new Kl(fe,()=>tc(ne),I.scope),ne=I.update=()=>de.run();ne.id=I.uid,Wr(I,!0),ne()},te=(I,N,j)=>{N.component=I;const V=I.vnode.props;I.vnode=N,I.next=null,g0(I,N.props,V,j),b0(I,N.children,j),es(),hf(),ts()},ie=(I,N,j,V,Q,G,me,fe,de=!1)=>{const ne=I&&I.children,be=I?I.shapeFlag:0,ue=N.children,{patchFlag:Ae,shapeFlag:Ne}=N;if(Ae>0){if(Ae&128){Ke(ne,ue,j,V,Q,G,me,fe,de);return}else if(Ae&256){Pe(ne,ue,j,V,Q,G,me,fe,de);return}}Ne&8?(be&16&&Ze(ne,Q,G),ue!==ne&&c(j,ue)):be&16?Ne&16?Ke(ne,ue,j,V,Q,G,me,fe,de):Ze(ne,Q,G,!0):(be&8&&c(j,""),Ne&16&&S(ue,j,V,Q,G,me,fe,de))},Pe=(I,N,j,V,Q,G,me,fe,de)=>{I=I||Fi,N=N||Fi;const ne=I.length,be=N.length,ue=Math.min(ne,be);let Ae;for(Ae=0;Ae<ue;Ae++){const Ne=N[Ae]=de?Ar(N[Ae]):jn(N[Ae]);x(I[Ae],Ne,j,null,Q,G,me,fe,de)}ne>be?Ze(I,Q,G,!0,!1,ue):S(N,j,V,Q,G,me,fe,de,ue)},Ke=(I,N,j,V,Q,G,me,fe,de)=>{let ne=0;const be=N.length;let ue=I.length-1,Ae=be-1;for(;ne<=ue&&ne<=Ae;){const Ne=I[ne],ze=N[ne]=de?Ar(N[ne]):jn(N[ne]);if(Yr(Ne,ze))x(Ne,ze,j,null,Q,G,me,fe,de);else break;ne++}for(;ne<=ue&&ne<=Ae;){const Ne=I[ue],ze=N[Ae]=de?Ar(N[Ae]):jn(N[Ae]);if(Yr(Ne,ze))x(Ne,ze,j,null,Q,G,me,fe,de);else break;ue--,Ae--}if(ne>ue){if(ne<=Ae){const Ne=Ae+1,ze=Ne<be?N[Ne].el:V;for(;ne<=Ae;)x(null,N[ne]=de?Ar(N[ne]):jn(N[ne]),j,ze,Q,G,me,fe,de),ne++}}else if(ne>Ae)for(;ne<=ue;)Ce(I[ne],Q,G,!0),ne++;else{const Ne=ne,ze=ne,qe=new Map;for(ne=ze;ne<=Ae;ne++){const Ct=N[ne]=de?Ar(N[ne]):jn(N[ne]);Ct.key!=null&&qe.set(Ct.key,ne)}let Ye,it=0;const dt=Ae-ze+1;let Kt=!1,on=0;const mt=new Array(dt);for(ne=0;ne<dt;ne++)mt[ne]=0;for(ne=Ne;ne<=ue;ne++){const Ct=I[ne];if(it>=dt){Ce(Ct,Q,G,!0);continue}let k;if(Ct.key!=null)k=qe.get(Ct.key);else for(Ye=ze;Ye<=Ae;Ye++)if(mt[Ye-ze]===0&&Yr(Ct,N[Ye])){k=Ye;break}k===void 0?Ce(Ct,Q,G,!0):(mt[k-ze]=ne+1,k>=on?on=k:Kt=!0,x(Ct,N[k],j,null,Q,G,me,fe,de),it++)}const $t=Kt?E0(mt):Fi;for(Ye=$t.length-1,ne=dt-1;ne>=0;ne--){const Ct=ze+ne,k=N[Ct],re=Ct+1<be?N[Ct+1].el:V;mt[ne]===0?x(null,k,j,re,Q,G,me,fe,de):Kt&&(Ye<0||ne!==$t[Ye]?He(k,j,re,2):Ye--)}}},He=(I,N,j,V,Q=null)=>{const{el:G,type:me,transition:fe,children:de,shapeFlag:ne}=I;if(ne&6){He(I.component.subTree,N,j,V);return}if(ne&128){I.suspense.move(N,j,V);return}if(ne&64){me.move(I,N,j,ce);return}if(me===Tt){r(G,N,j);for(let ue=0;ue<de.length;ue++)He(de[ue],N,j,V);r(I.anchor,N,j);return}if(me===lu){y(I,N,j);return}if(V!==2&&ne&1&&fe)if(V===0)fe.beforeEnter(G),r(G,N,j),ln(()=>fe.enter(G),Q);else{const{leave:ue,delayLeave:Ae,afterLeave:Ne}=fe,ze=()=>r(G,N,j),qe=()=>{ue(G,()=>{ze(),Ne&&Ne()})};Ae?Ae(G,ze,qe):qe()}else r(G,N,j)},Ce=(I,N,j,V=!1,Q=!1)=>{const{type:G,props:me,ref:fe,children:de,dynamicChildren:ne,shapeFlag:be,patchFlag:ue,dirs:Ae}=I;if(fe!=null&&Xu(fe,null,j,I,!0),be&256){N.ctx.deactivate(I);return}const Ne=be&1&&Ae,ze=!xs(I);let qe;if(ze&&(qe=me&&me.onVnodeBeforeUnmount)&&Mn(qe,N,I),be&6)Et(I.component,j,V);else{if(be&128){I.suspense.unmount(j,V);return}Ne&&jr(I,null,N,"beforeUnmount"),be&64?I.type.remove(I,N,j,Q,ce,V):ne&&(G!==Tt||ue>0&&ue&64)?Ze(ne,N,j,!1,!0):(G===Tt&&ue&384||!Q&&be&16)&&Ze(de,N,j),V&&Qe(I)}(ze&&(qe=me&&me.onVnodeUnmounted)||Ne)&&ln(()=>{qe&&Mn(qe,N,I),Ne&&jr(I,null,N,"unmounted")},j)},Qe=I=>{const{type:N,el:j,anchor:V,transition:Q}=I;if(N===Tt){Ve(j,V);return}if(N===lu){w(I);return}const G=()=>{i(j),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(I.shapeFlag&1&&Q&&!Q.persisted){const{leave:me,delayLeave:fe}=Q,de=()=>me(j,G);fe?fe(I.el,G,de):de()}else G()},Ve=(I,N)=>{let j;for(;I!==N;)j=h(I),i(I),I=j;i(N)},Et=(I,N,j)=>{const{bum:V,scope:Q,update:G,subTree:me,um:fe}=I;V&&Na(V),Q.stop(),G&&(G.active=!1,Ce(me,I,N,j)),fe&&ln(fe,N),ln(()=>{I.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},Ze=(I,N,j,V=!1,Q=!1,G=0)=>{for(let me=G;me<I.length;me++)Ce(I[me],N,j,V,Q)},Y=I=>I.shapeFlag&6?Y(I.component.subTree):I.shapeFlag&128?I.suspense.next():h(I.anchor||I.el),se=(I,N,j)=>{I==null?N._vnode&&Ce(N._vnode,null,null,!0):x(N._vnode||null,I,N,null,null,null,j),hf(),Fd(),N._vnode=I},ce={p:x,um:Ce,m:He,r:Qe,mt:he,mc:S,pc:ie,pbc:B,n:Y,o:t};let _e,ke;return e&&([_e,ke]=e(ce)),{render:se,hydrate:_e,createApp:d0(se,_e)}}function Wr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function ip(t,e,n=!1){const r=t.children,i=e.children;if(Ue(r)&&Ue(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=Ar(i[s]),o.el=a.el),n||ip(a,o)),o.type===Mo&&(o.el=a.el)}}function E0(t){const e=t.slice(),n=[0];let r,i,s,a,o;const u=t.length;for(r=0;r<u;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,t[n[o]]<l?s=o+1:a=o;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}const x0=t=>t.__isTeleport,Tt=Symbol.for("v-fgt"),Mo=Symbol.for("v-txt"),Dn=Symbol.for("v-cmt"),lu=Symbol.for("v-stc"),As=[];let Nn=null;function xe(t=!1){As.push(Nn=t?null:[])}function C0(){As.pop(),Nn=As[As.length-1]||null}let zs=1;function Cf(t){zs+=t}function sp(t){return t.dynamicChildren=zs>0?Nn||Fi:null,C0(),zs>0&&Nn&&Nn.push(t),t}function Me(t,e,n,r,i,s){return sp(Le(t,e,n,r,i,s,!0))}function St(t,e,n,r,i){return sp(We(t,e,n,r,i,!0))}function eo(t){return t?t.__v_isVNode===!0:!1}function Yr(t,e){return t.type===e.type&&t.key===e.key}const Uo="__vInternal",ap=({key:t})=>t??null,Pa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Bt(t)||wt(t)||$e(t)?{i:Wt,r:t,k:e,f:!!n}:t:null);function Le(t,e=null,n=null,r=0,i=null,s=t===Tt?0:1,a=!1,o=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ap(e),ref:e&&Pa(e),scopeId:Po,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Wt};return o?(ac(u,n),s&128&&t.normalize(u)):n&&(u.shapeFlag|=Bt(n)?8:16),zs>0&&!a&&Nn&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&Nn.push(u),u}const We=A0;function A0(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Yd)&&(t=Dn),eo(t)){const o=Br(t,e,!0);return n&&ac(o,n),zs>0&&!s&&Nn&&(o.shapeFlag&6?Nn[Nn.indexOf(t)]=o:Nn.push(o)),o.patchFlag|=-2,o}if(L0(t)&&(t=t.__vccOpts),e){e=D0(e);let{class:o,style:u}=e;o&&!Bt(o)&&(e.class=Jt(o)),pt(u)&&(kd(u)&&!Ue(u)&&(u=Ft({},u)),e.style=ci(u))}const a=Bt(t)?1:Wv(t)?128:x0(t)?64:pt(t)?4:$e(t)?2:0;return Le(t,e,n,r,i,a,s,!0)}function D0(t){return t?kd(t)||Uo in t?Ft({},t):t:null}function Br(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=t,o=e?oc(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&ap(o),ref:e&&e.ref?n&&i?Ue(i)?i.concat(Pa(e)):[i,Pa(e)]:Pa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Tt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Br(t.ssContent),ssFallback:t.ssFallback&&Br(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function fi(t=" ",e=0){return We(Mo,null,t,e)}function Xt(t="",e=!1){return e?(xe(),St(Dn,null,t)):We(Dn,null,t)}function jn(t){return t==null||typeof t=="boolean"?We(Dn):Ue(t)?We(Tt,null,t.slice()):typeof t=="object"?Ar(t):We(Mo,null,String(t))}function Ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Br(t)}function ac(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ue(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),ac(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Uo in e)?e._ctx=Wt:i===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else $e(e)?(e={default:e,_ctx:Wt},n=32):(e=String(e),r&64?(n=16,e=[fi(e)]):n=8);t.children=e,t.shapeFlag|=n}function oc(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Jt([e.class,r.class]));else if(i==="style")e.style=ci([e.style,r.style]);else if(To(i)){const s=e[i],a=r[i];a&&s!==a&&!(Ue(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Mn(t,e,n,r=null){Cn(t,e,7,[n,r])}const S0=Qd();let T0=0;function k0(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||S0,s={uid:T0++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new pd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ep(r,i),emitsOptions:Ud(r,i),emit:null,emitted:null,propsDefaults:gt,inheritAttrs:r.inheritAttrs,ctx:gt,data:gt,props:gt,attrs:gt,slots:gt,refs:gt,setupState:gt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Fv.bind(null,s),t.ce&&t.ce(s),s}let Ut=null;const O0=()=>Ut||Wt;let uc,bi,Af="__VUE_INSTANCE_SETTERS__";(bi=Uu()[Af])||(bi=Uu()[Af]=[]),bi.push(t=>Ut=t),uc=t=>{bi.length>1?bi.forEach(e=>e(t)):bi[0](t)};const Hi=t=>{uc(t),t.scope.on()},ti=()=>{Ut&&Ut.scope.off(),uc(null)};function op(t){return t.vnode.shapeFlag&4}let js=!1;function R0(t,e=!1){js=e;const{props:n,children:r}=t.vnode,i=op(t);m0(t,n,i,e),y0(t,r);const s=i?I0(t,e):void 0;return js=!1,s}function I0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=si(new Proxy(t.ctx,a0));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?B0(t):null;Hi(t),es();const s=Ir(r,t,0,[t.props,i]);if(ts(),ti(),ld(s)){if(s.then(ti,ti),e)return s.then(a=>{Df(t,a,e)}).catch(a=>{No(a,t,0)});t.asyncDep=s}else Df(t,s,e)}else up(t,e)}function Df(t,e,n){$e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:pt(e)&&(t.setupState=Nd(e)),up(t,n)}let Sf;function up(t,e,n){const r=t.type;if(!t.render){if(!e&&Sf&&!r.render){const i=r.template||ic(t).template;if(i){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:u}=r,l=Ft(Ft({isCustomElement:s,delimiters:o},a),u);r.render=Sf(i,l)}}t.render=r.render||Bn}Hi(t),es(),o0(t),ts(),ti()}function N0(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return fn(t,"get","$attrs"),e[n]}}))}function B0(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return N0(t)},slots:t.slots,emit:t.emit,expose:e}}function zo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Nd(si(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Cs)return Cs[n](t)},has(e,n){return n in e||n in Cs}}))}function P0(t,e=!0){return $e(t)?t.displayName||t.name:t.name||e&&t.__name}function L0(t){return $e(t)&&"__vccOpts"in t}const kt=(t,e)=>Rv(t,e,js);function lc(t,e,n){const r=arguments.length;return r===2?pt(e)&&!Ue(e)?eo(e)?We(t,null,[e]):We(t,e):We(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&eo(n)&&(n=[n]),We(t,e,n))}const F0=Symbol.for("v-scx"),M0=()=>An(F0),U0="3.3.4",z0="http://www.w3.org/2000/svg",Gr=typeof document<"u"?document:null,Tf=Gr&&Gr.createElement("template"),j0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Gr.createElementNS(z0,t):Gr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Gr.createTextNode(t),createComment:t=>Gr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Tf.innerHTML=r?`<svg>${t}</svg>`:t;const o=Tf.content;if(r){const u=o.firstChild;for(;u.firstChild;)o.appendChild(u.firstChild);o.removeChild(u)}e.insertBefore(o,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function W0(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function q0(t,e,n){const r=t.style,i=Bt(n);if(n&&!i){if(e&&!Bt(e))for(const s in e)n[s]==null&&Qu(r,s,"");for(const s in n)Qu(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const kf=/\s*!important$/;function Qu(t,e,n){if(Ue(n))n.forEach(r=>Qu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=$0(t,e);kf.test(n)?t.setProperty(Ji(r),n.replace(kf,""),"important"):t[r]=n}}const Of=["Webkit","Moz","ms"],cu={};function $0(t,e){const n=cu[e];if(n)return n;let r=Vn(e);if(r!=="filter"&&r in t)return cu[e]=r;r=Ro(r);for(let i=0;i<Of.length;i++){const s=Of[i]+r;if(s in t)return cu[e]=s}return e}const Rf="http://www.w3.org/1999/xlink";function H0(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Rf,e.slice(6,e.length)):t.setAttributeNS(Rf,e,n);else{const s=Gg(e);n==null||s&&!hd(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function V0(t,e,n,r,i,s,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,i,s),t[e]=n??"";return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){t._value=n;const l=o==="OPTION"?t.getAttribute("value"):t.value,c=n??"";l!==c&&(t.value=c),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=hd(n):n==null&&l==="string"?(n="",u=!0):l==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function Oi(t,e,n,r){t.addEventListener(e,n,r)}function K0(t,e,n,r){t.removeEventListener(e,n,r)}function Y0(t,e,n,r,i=null){const s=t._vei||(t._vei={}),a=s[e];if(r&&a)a.value=r;else{const[o,u]=G0(e);if(r){const l=s[e]=Q0(r,i);Oi(t,o,l,u)}else a&&(K0(t,o,a,u),s[e]=void 0)}}const If=/(?:Once|Passive|Capture)$/;function G0(t){let e;if(If.test(t)){e={};let r;for(;r=t.match(If);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ji(t.slice(2)),e]}let fu=0;const Z0=Promise.resolve(),X0=()=>fu||(Z0.then(()=>fu=0),fu=Date.now());function Q0(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Cn(J0(r,n.value),e,5,[r])};return n.value=t,n.attached=X0(),n}function J0(t,e){if(Ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Nf=/^on[a-z]/,ey=(t,e,n,r,i=!1,s,a,o,u)=>{e==="class"?W0(t,r,i):e==="style"?q0(t,n,r):To(e)?jl(e)||Y0(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ty(t,e,r,i))?V0(t,e,r,s,a,o,u):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),H0(t,e,r,i))};function ty(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Nf.test(e)&&$e(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Nf.test(e)&&Bt(n)?!1:e in t}const yr="transition",us="animation",ra=(t,{slots:e})=>lc(Yv,ny(t),e);ra.displayName="Transition";const lp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ra.props=Ft({},Wd,lp);const qr=(t,e=[])=>{Ue(t)?t.forEach(n=>n(...e)):t&&t(...e)},Bf=t=>t?Ue(t)?t.some(e=>e.length>1):t.length>1:!1;function ny(t){const e={};for(const M in t)M in lp||(e[M]=t[M]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:u=s,appearActiveClass:l=a,appearToClass:c=o,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,E=ry(i),x=E&&E[0],v=E&&E[1],{onBeforeEnter:d,onEnter:m,onEnterCancelled:y,onLeave:w,onLeaveCancelled:g,onBeforeAppear:_=d,onAppear:C=m,onAppearCancelled:S=y}=e,O=(M,X,he)=>{$r(M,X?c:o),$r(M,X?l:a),he&&he()},B=(M,X)=>{M._isLeaving=!1,$r(M,f),$r(M,p),$r(M,h),X&&X()},q=M=>(X,he)=>{const oe=M?C:m,ee=()=>O(X,M,he);qr(oe,[X,ee]),Pf(()=>{$r(X,M?u:s),br(X,M?c:o),Bf(oe)||Lf(X,r,x,ee)})};return Ft(e,{onBeforeEnter(M){qr(d,[M]),br(M,s),br(M,a)},onBeforeAppear(M){qr(_,[M]),br(M,u),br(M,l)},onEnter:q(!1),onAppear:q(!0),onLeave(M,X){M._isLeaving=!0;const he=()=>B(M,X);br(M,f),ay(),br(M,h),Pf(()=>{M._isLeaving&&($r(M,f),br(M,p),Bf(w)||Lf(M,r,v,he))}),qr(w,[M,he])},onEnterCancelled(M){O(M,!1),qr(y,[M])},onAppearCancelled(M){O(M,!0),qr(S,[M])},onLeaveCancelled(M){B(M),qr(g,[M])}})}function ry(t){if(t==null)return null;if(pt(t))return[hu(t.enter),hu(t.leave)];{const e=hu(t);return[e,e]}}function hu(t){return qg(t)}function br(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function $r(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Pf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let iy=0;function Lf(t,e,n,r){const i=t._endId=++iy,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:u}=sy(t,e);if(!a)return r();const l=a+"end";let c=0;const f=()=>{t.removeEventListener(l,h),s()},h=p=>{p.target===t&&++c>=u&&f()};setTimeout(()=>{c<u&&f()},o+1),t.addEventListener(l,h)}function sy(t,e){const n=window.getComputedStyle(t),r=E=>(n[E]||"").split(", "),i=r(`${yr}Delay`),s=r(`${yr}Duration`),a=Ff(i,s),o=r(`${us}Delay`),u=r(`${us}Duration`),l=Ff(o,u);let c=null,f=0,h=0;e===yr?a>0&&(c=yr,f=a,h=s.length):e===us?l>0&&(c=us,f=l,h=u.length):(f=Math.max(a,l),c=f>0?a>l?yr:us:null,h=c?c===yr?s.length:u.length:0);const p=c===yr&&/\b(transform|all)(,|$)/.test(r(`${yr}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:p}}function Ff(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Mf(n)+Mf(t[r])))}function Mf(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function ay(){return document.body.offsetHeight}const Uf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ue(e)?n=>Na(e,n):e};function oy(t){t.target.composing=!0}function zf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const uy={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Uf(i);const s=r||i.props&&i.props.type==="number";Oi(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;n&&(o=o.trim()),s&&(o=Mu(o)),t._assign(o)}),n&&Oi(t,"change",()=>{t.value=t.value.trim()}),e||(Oi(t,"compositionstart",oy),Oi(t,"compositionend",zf),Oi(t,"change",zf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=Uf(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&Mu(t.value)===e))return;const a=e??"";t.value!==a&&(t.value=a)}},ly=["ctrl","shift","alt","meta"],cy={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ly.some(n=>t[`${n}Key`]&&!e.includes(n))},fy=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=cy[e[i]];if(s&&s(n,e))return}return t(n,...r)},hy=Ft({patchProp:ey},j0);let jf;function dy(){return jf||(jf=_0(hy))}const py=(...t)=>{const e=dy().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=my(r);if(!i)return;const s=e._component;!$e(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function my(t){return Bt(t)?document.querySelector(t):t}var gy=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let cp;const jo=t=>cp=t,fp=Symbol();function Ju(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ds;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ds||(Ds={}));function vy(){const t=md(!0),e=t.run(()=>Ot({}));let n=[],r=[];const i=si({install(s){jo(i),i._a=s,s.provide(fp,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return!this._a&&!gy?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const hp=()=>{};function Wf(t,e,n,r=hp){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Hl()&&gd(i),i}function _i(t,...e){t.slice().forEach(n=>{n(...e)})}const yy=t=>t();function el(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];Ju(i)&&Ju(r)&&t.hasOwnProperty(n)&&!wt(r)&&!rr(r)?t[n]=el(i,r):t[n]=r}return t}const by=Symbol();function _y(t){return!Ju(t)||!t.hasOwnProperty(by)}const{assign:xr}=Object;function wy(t){return!!(wt(t)&&t.effect)}function Ey(t,e,n,r){const{state:i,actions:s,getters:a}=e,o=n.state.value[t];let u;function l(){o||(n.state.value[t]=i?i():{});const c=rn(n.state.value[t]);return xr(c,s,Object.keys(a||{}).reduce((f,h)=>(f[h]=si(kt(()=>{jo(n);const p=n._s.get(t);return a[h].call(p,p)})),f),{}))}return u=dp(t,l,e,n,r,!0),u}function dp(t,e,n={},r,i,s){let a;const o=xr({actions:{}},n),u={deep:!0};let l,c,f=[],h=[],p;const E=r.state.value[t];!s&&!E&&(r.state.value[t]={}),Ot({});let x;function v(S){let O;l=c=!1,typeof S=="function"?(S(r.state.value[t]),O={type:Ds.patchFunction,storeId:t,events:p}):(el(r.state.value[t],S),O={type:Ds.patchObject,payload:S,storeId:t,events:p});const B=x=Symbol();ec().then(()=>{x===B&&(l=!0)}),c=!0,_i(f,O,r.state.value[t])}const d=s?function(){const{state:O}=n,B=O?O():{};this.$patch(q=>{xr(q,B)})}:hp;function m(){a.stop(),f=[],h=[],r._s.delete(t)}function y(S,O){return function(){jo(r);const B=Array.from(arguments),q=[],M=[];function X(ee){q.push(ee)}function he(ee){M.push(ee)}_i(h,{args:B,name:S,store:g,after:X,onError:he});let oe;try{oe=O.apply(this&&this.$id===t?this:g,B)}catch(ee){throw _i(M,ee),ee}return oe instanceof Promise?oe.then(ee=>(_i(q,ee),ee)).catch(ee=>(_i(M,ee),Promise.reject(ee))):(_i(q,oe),oe)}}const w={_p:r,$id:t,$onAction:Wf.bind(null,h),$patch:v,$reset:d,$subscribe(S,O={}){const B=Wf(f,S,O.detached,()=>q()),q=a.run(()=>ei(()=>r.state.value[t],M=>{(O.flush==="sync"?c:l)&&S({storeId:t,type:Ds.direct,events:p},M)},xr({},u,O)));return B},$dispose:m},g=na(w);r._s.set(t,g);const _=r._a&&r._a.runWithContext||yy,C=r._e.run(()=>(a=md(),_(()=>a.run(e))));for(const S in C){const O=C[S];if(wt(O)&&!wy(O)||rr(O))s||(E&&_y(O)&&(wt(O)?O.value=E[S]:el(O,E[S])),r.state.value[t][S]=O);else if(typeof O=="function"){const B=y(S,O);C[S]=B,o.actions[S]=O}}return xr(g,C),xr(nt(g),C),Object.defineProperty(g,"$state",{get:()=>r.state.value[t],set:S=>{v(O=>{xr(O,S)})}}),r._p.forEach(S=>{xr(g,a.run(()=>S({store:g,app:r._a,pinia:r,options:o})))}),E&&s&&n.hydrate&&n.hydrate(g.$state,E),l=!0,c=!0,g}function pp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function a(o,u){const l=p0();return o=o||(l?An(fp,null):null),o&&jo(o),o=cp,o._s.has(r)||(s?dp(r,e,i,o):Ey(r,i,o)),o._s.get(r)}return a.$id=r,a}function gr(t){{t=nt(t);const e={};for(const n in t){const r=t[n];(wt(r)||rr(r))&&(e[n]=kv(t,n))}return e}}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ri=typeof window<"u";function xy(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ut=Object.assign;function du(t,e){const n={};for(const r in e){const i=e[r];n[r]=Fn(i)?i.map(t):t(i)}return n}const Ss=()=>{},Fn=Array.isArray,Cy=/\/$/,Ay=t=>t.replace(Cy,"");function pu(t,e,n="/"){let r,i={},s="",a="";const o=e.indexOf("#");let u=e.indexOf("?");return o<u&&o>=0&&(u=-1),u>-1&&(r=e.slice(0,u),s=e.slice(u+1,o>-1?o:e.length),i=t(s)),o>-1&&(r=r||e.slice(0,o),a=e.slice(o,e.length)),r=ky(r??e,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function Dy(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function qf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Sy(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Vi(e.matched[r],n.matched[i])&&mp(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Vi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function mp(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Ty(t[n],e[n]))return!1;return!0}function Ty(t,e){return Fn(t)?$f(t,e):Fn(e)?$f(e,t):t===e}function $f(t,e){return Fn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function ky(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var Ws;(function(t){t.pop="pop",t.push="push"})(Ws||(Ws={}));var Ts;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ts||(Ts={}));function Oy(t){if(!t)if(Ri){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Ay(t)}const Ry=/^[^#]+#/;function Iy(t,e){return t.replace(Ry,"#")+e}function Ny(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Wo=()=>({left:window.pageXOffset,top:window.pageYOffset});function By(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=Ny(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Hf(t,e){return(history.state?history.state.position-e:-1)+t}const tl=new Map;function Py(t,e){tl.set(t,e)}function Ly(t){const e=tl.get(t);return tl.delete(t),e}let Fy=()=>location.protocol+"//"+location.host;function gp(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let o=i.includes(t.slice(s))?t.slice(s).length:1,u=i.slice(o);return u[0]!=="/"&&(u="/"+u),qf(u,"")}return qf(n,t)+r+i}function My(t,e,n,r){let i=[],s=[],a=null;const o=({state:h})=>{const p=gp(t,location),E=n.value,x=e.value;let v=0;if(h){if(n.value=p,e.value=h,a&&a===E){a=null;return}v=x?h.position-x.position:0}else r(p);i.forEach(d=>{d(n.value,E,{delta:v,type:Ws.pop,direction:v?v>0?Ts.forward:Ts.back:Ts.unknown})})};function u(){a=n.value}function l(h){i.push(h);const p=()=>{const E=i.indexOf(h);E>-1&&i.splice(E,1)};return s.push(p),p}function c(){const{history:h}=window;h.state&&h.replaceState(ut({},h.state,{scroll:Wo()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:u,listen:l,destroy:f}}function Vf(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Wo():null}}function Uy(t){const{history:e,location:n}=window,r={value:gp(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(u,l,c){const f=t.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+u:Fy()+t+u;try{e[c?"replaceState":"pushState"](l,"",h),i.value=l}catch(p){console.error(p),n[c?"replace":"assign"](h)}}function a(u,l){const c=ut({},e.state,Vf(i.value.back,u,i.value.forward,!0),l,{position:i.value.position});s(u,c,!0),r.value=u}function o(u,l){const c=ut({},i.value,e.state,{forward:u,scroll:Wo()});s(c.current,c,!0);const f=ut({},Vf(r.value,u,null),{position:c.position+1},l);s(u,f,!1),r.value=u}return{location:r,state:i,push:o,replace:a}}function zy(t){t=Oy(t);const e=Uy(t),n=My(t,e.state,e.location,e.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=ut({location:"",base:t,go:r,createHref:Iy.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function jy(t){return typeof t=="string"||t&&typeof t=="object"}function vp(t){return typeof t=="string"||typeof t=="symbol"}const _r={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},yp=Symbol("");var Kf;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Kf||(Kf={}));function Ki(t,e){return ut(new Error,{type:t,[yp]:!0},e)}function Zn(t,e){return t instanceof Error&&yp in t&&(e==null||!!(t.type&e))}const Yf="[^/]+?",Wy={sensitive:!1,strict:!1,start:!0,end:!0},qy=/[.+*?^${}()[\]/\\]/g;function $y(t,e){const n=ut({},Wy,e),r=[];let i=n.start?"^":"";const s=[];for(const l of t){const c=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const h=l[f];let p=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(qy,"\\$&"),p+=40;else if(h.type===1){const{value:E,repeatable:x,optional:v,regexp:d}=h;s.push({name:E,repeatable:x,optional:v});const m=d||Yf;if(m!==Yf){p+=10;try{new RegExp(`(${m})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${E}" (${m}): `+w.message)}}let y=x?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;f||(y=v&&l.length<2?`(?:/${y})`:"/"+y),v&&(y+="?"),i+=y,p+=20,v&&(p+=-8),x&&(p+=-20),m===".*"&&(p+=-50)}c.push(p)}r.push(c)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function o(l){const c=l.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const p=c[h]||"",E=s[h-1];f[E.name]=p&&E.repeatable?p.split("/"):p}return f}function u(l){let c="",f=!1;for(const h of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const p of h)if(p.type===0)c+=p.value;else if(p.type===1){const{value:E,repeatable:x,optional:v}=p,d=E in l?l[E]:"";if(Fn(d)&&!x)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const m=Fn(d)?d.join("/"):d;if(!m)if(v)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${E}"`);c+=m}}return c||"/"}return{re:a,score:r,keys:s,parse:o,stringify:u}}function Hy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Vy(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=Hy(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Gf(r))return 1;if(Gf(i))return-1}return i.length-r.length}function Gf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ky={type:0,value:""},Yy=/[a-zA-Z0-9_]/;function Gy(t){if(!t)return[[]];if(t==="/")return[[Ky]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${l}": ${p}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let o=0,u,l="",c="";function f(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=u}for(;o<t.length;){if(u=t[o++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(l&&f(),a()):u===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:u==="("?n=2:Yy.test(u)?h():(f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&o--);break;case 2:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:n=3:c+=u;break;case 3:f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&o--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),a(),i}function Zy(t,e,n){const r=$y(Gy(t.path),n),i=ut(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Xy(t,e){const n=[],r=new Map;e=Qf({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function s(c,f,h){const p=!h,E=Qy(c);E.aliasOf=h&&h.record;const x=Qf(e,c),v=[E];if("alias"in c){const y=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of y)v.push(ut({},E,{components:h?h.record.components:E.components,path:w,aliasOf:h?h.record:E}))}let d,m;for(const y of v){const{path:w}=y;if(f&&w[0]!=="/"){const g=f.record.path,_=g[g.length-1]==="/"?"":"/";y.path=f.record.path+(w&&_+w)}if(d=Zy(y,f,x),h?h.alias.push(d):(m=m||d,m!==d&&m.alias.push(d),p&&c.name&&!Xf(d)&&a(c.name)),E.children){const g=E.children;for(let _=0;_<g.length;_++)s(g[_],d,h&&h.children[_])}h=h||d,(d.record.components&&Object.keys(d.record.components).length||d.record.name||d.record.redirect)&&u(d)}return m?()=>{a(m)}:Ss}function a(c){if(vp(c)){const f=r.get(c);f&&(r.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&r.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function o(){return n}function u(c){let f=0;for(;f<n.length&&Vy(c,n[f])>=0&&(c.record.path!==n[f].record.path||!bp(c,n[f]));)f++;n.splice(f,0,c),c.record.name&&!Xf(c)&&r.set(c.record.name,c)}function l(c,f){let h,p={},E,x;if("name"in c&&c.name){if(h=r.get(c.name),!h)throw Ki(1,{location:c});x=h.record.name,p=ut(Zf(f.params,h.keys.filter(m=>!m.optional).map(m=>m.name)),c.params&&Zf(c.params,h.keys.map(m=>m.name))),E=h.stringify(p)}else if("path"in c)E=c.path,h=n.find(m=>m.re.test(E)),h&&(p=h.parse(E),x=h.record.name);else{if(h=f.name?r.get(f.name):n.find(m=>m.re.test(f.path)),!h)throw Ki(1,{location:c,currentLocation:f});x=h.record.name,p=ut({},f.params,c.params),E=h.stringify(p)}const v=[];let d=h;for(;d;)v.unshift(d.record),d=d.parent;return{name:x,path:E,params:p,matched:v,meta:eb(v)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:l,removeRoute:a,getRoutes:o,getRecordMatcher:i}}function Zf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Qy(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Jy(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Jy(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Xf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function eb(t){return t.reduce((e,n)=>ut(e,n.meta),{})}function Qf(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function bp(t,e){return e.children.some(n=>n===t||bp(t,n))}const _p=/#/g,tb=/&/g,nb=/\//g,rb=/=/g,ib=/\?/g,wp=/\+/g,sb=/%5B/g,ab=/%5D/g,Ep=/%5E/g,ob=/%60/g,xp=/%7B/g,ub=/%7C/g,Cp=/%7D/g,lb=/%20/g;function cc(t){return encodeURI(""+t).replace(ub,"|").replace(sb,"[").replace(ab,"]")}function cb(t){return cc(t).replace(xp,"{").replace(Cp,"}").replace(Ep,"^")}function nl(t){return cc(t).replace(wp,"%2B").replace(lb,"+").replace(_p,"%23").replace(tb,"%26").replace(ob,"`").replace(xp,"{").replace(Cp,"}").replace(Ep,"^")}function fb(t){return nl(t).replace(rb,"%3D")}function hb(t){return cc(t).replace(_p,"%23").replace(ib,"%3F")}function db(t){return t==null?"":hb(t).replace(nb,"%2F")}function to(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function pb(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(wp," "),a=s.indexOf("="),o=to(a<0?s:s.slice(0,a)),u=a<0?null:to(s.slice(a+1));if(o in e){let l=e[o];Fn(l)||(l=e[o]=[l]),l.push(u)}else e[o]=u}return e}function Jf(t){let e="";for(let n in t){const r=t[n];if(n=fb(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Fn(r)?r.map(s=>s&&nl(s)):[r&&nl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function mb(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Fn(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const gb=Symbol(""),eh=Symbol(""),qo=Symbol(""),fc=Symbol(""),rl=Symbol("");function ls(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Dr(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,o)=>{const u=f=>{f===!1?o(Ki(4,{from:n,to:e})):f instanceof Error?o(f):jy(f)?o(Ki(2,{from:e,to:f})):(s&&r.enterCallbacks[i]===s&&typeof f=="function"&&s.push(f),a())},l=t.call(r&&r.instances[i],e,n,u);let c=Promise.resolve(l);t.length<3&&(c=c.then(u)),c.catch(f=>o(f))})}function mu(t,e,n,r){const i=[];for(const s of t)for(const a in s.components){let o=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(vb(o)){const l=(o.__vccOpts||o)[e];l&&i.push(Dr(l,n,r,s,a))}else{let u=o();i.push(()=>u.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const c=xy(l)?l.default:l;s.components[a]=c;const h=(c.__vccOpts||c)[e];return h&&Dr(h,n,r,s,a)()}))}}return i}function vb(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function th(t){const e=An(qo),n=An(fc),r=kt(()=>e.resolve(Ie(t.to))),i=kt(()=>{const{matched:u}=r.value,{length:l}=u,c=u[l-1],f=n.matched;if(!c||!f.length)return-1;const h=f.findIndex(Vi.bind(null,c));if(h>-1)return h;const p=nh(u[l-2]);return l>1&&nh(c)===p&&f[f.length-1].path!==p?f.findIndex(Vi.bind(null,u[l-2])):h}),s=kt(()=>i.value>-1&&wb(n.params,r.value.params)),a=kt(()=>i.value>-1&&i.value===n.matched.length-1&&mp(n.params,r.value.params));function o(u={}){return _b(u)?e[Ie(t.replace)?"replace":"push"](Ie(t.to)).catch(Ss):Promise.resolve()}return{route:r,href:kt(()=>r.value.href),isActive:s,isExactActive:a,navigate:o}}const yb=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:th,setup(t,{slots:e}){const n=na(th(t)),{options:r}=An(qo),i=kt(()=>({[rh(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[rh(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:lc("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),bb=yb;function _b(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function wb(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Fn(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function nh(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const rh=(t,e,n)=>t??e??n,Eb=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=An(rl),i=kt(()=>t.route||r.value),s=An(eh,0),a=kt(()=>{let l=Ie(s);const{matched:c}=i.value;let f;for(;(f=c[l])&&!f.components;)l++;return l}),o=kt(()=>i.value.matched[a.value]);Ba(eh,kt(()=>a.value+1)),Ba(gb,o),Ba(rl,i);const u=Ot();return ei(()=>[u.value,o.value,t.name],([l,c,f],[h,p,E])=>{c&&(c.instances[f]=l,p&&p!==c&&l&&l===h&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),l&&c&&(!p||!Vi(c,p)||!h)&&(c.enterCallbacks[f]||[]).forEach(x=>x(l))},{flush:"post"}),()=>{const l=i.value,c=t.name,f=o.value,h=f&&f.components[c];if(!h)return ih(n.default,{Component:h,route:l});const p=f.props[c],E=p?p===!0?l.params:typeof p=="function"?p(l):p:null,v=lc(h,ut({},E,e,{onVnodeUnmounted:d=>{d.component.isUnmounted&&(f.instances[c]=null)},ref:u}));return ih(n.default,{Component:v,route:l})||v}}});function ih(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const xb=Eb;function Cb(t){const e=Xy(t.routes,t),n=t.parseQuery||pb,r=t.stringifyQuery||Jf,i=t.history,s=ls(),a=ls(),o=ls(),u=Cv(_r);let l=_r;Ri&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=du.bind(null,Y=>""+Y),f=du.bind(null,db),h=du.bind(null,to);function p(Y,se){let ce,_e;return vp(Y)?(ce=e.getRecordMatcher(Y),_e=se):_e=Y,e.addRoute(_e,ce)}function E(Y){const se=e.getRecordMatcher(Y);se&&e.removeRoute(se)}function x(){return e.getRoutes().map(Y=>Y.record)}function v(Y){return!!e.getRecordMatcher(Y)}function d(Y,se){if(se=ut({},se||u.value),typeof Y=="string"){const j=pu(n,Y,se.path),V=e.resolve({path:j.path},se),Q=i.createHref(j.fullPath);return ut(j,V,{params:h(V.params),hash:to(j.hash),redirectedFrom:void 0,href:Q})}let ce;if("path"in Y)ce=ut({},Y,{path:pu(n,Y.path,se.path).path});else{const j=ut({},Y.params);for(const V in j)j[V]==null&&delete j[V];ce=ut({},Y,{params:f(j)}),se.params=f(se.params)}const _e=e.resolve(ce,se),ke=Y.hash||"";_e.params=c(h(_e.params));const I=Dy(r,ut({},Y,{hash:cb(ke),path:_e.path})),N=i.createHref(I);return ut({fullPath:I,hash:ke,query:r===Jf?mb(Y.query):Y.query||{}},_e,{redirectedFrom:void 0,href:N})}function m(Y){return typeof Y=="string"?pu(n,Y,u.value.path):ut({},Y)}function y(Y,se){if(l!==Y)return Ki(8,{from:se,to:Y})}function w(Y){return C(Y)}function g(Y){return w(ut(m(Y),{replace:!0}))}function _(Y){const se=Y.matched[Y.matched.length-1];if(se&&se.redirect){const{redirect:ce}=se;let _e=typeof ce=="function"?ce(Y):ce;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=m(_e):{path:_e},_e.params={}),ut({query:Y.query,hash:Y.hash,params:"path"in _e?{}:Y.params},_e)}}function C(Y,se){const ce=l=d(Y),_e=u.value,ke=Y.state,I=Y.force,N=Y.replace===!0,j=_(ce);if(j)return C(ut(m(j),{state:typeof j=="object"?ut({},ke,j.state):ke,force:I,replace:N}),se||ce);const V=ce;V.redirectedFrom=se;let Q;return!I&&Sy(r,_e,ce)&&(Q=Ki(16,{to:V,from:_e}),He(_e,_e,!0,!1)),(Q?Promise.resolve(Q):B(V,_e)).catch(G=>Zn(G)?Zn(G,2)?G:Ke(G):ie(G,V,_e)).then(G=>{if(G){if(Zn(G,2))return C(ut({replace:N},m(G.to),{state:typeof G.to=="object"?ut({},ke,G.to.state):ke,force:I}),se||V)}else G=M(V,_e,!0,N,ke);return q(V,_e,G),G})}function S(Y,se){const ce=y(Y,se);return ce?Promise.reject(ce):Promise.resolve()}function O(Y){const se=Ve.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(Y):Y()}function B(Y,se){let ce;const[_e,ke,I]=Ab(Y,se);ce=mu(_e.reverse(),"beforeRouteLeave",Y,se);for(const j of _e)j.leaveGuards.forEach(V=>{ce.push(Dr(V,Y,se))});const N=S.bind(null,Y,se);return ce.push(N),Ze(ce).then(()=>{ce=[];for(const j of s.list())ce.push(Dr(j,Y,se));return ce.push(N),Ze(ce)}).then(()=>{ce=mu(ke,"beforeRouteUpdate",Y,se);for(const j of ke)j.updateGuards.forEach(V=>{ce.push(Dr(V,Y,se))});return ce.push(N),Ze(ce)}).then(()=>{ce=[];for(const j of I)if(j.beforeEnter)if(Fn(j.beforeEnter))for(const V of j.beforeEnter)ce.push(Dr(V,Y,se));else ce.push(Dr(j.beforeEnter,Y,se));return ce.push(N),Ze(ce)}).then(()=>(Y.matched.forEach(j=>j.enterCallbacks={}),ce=mu(I,"beforeRouteEnter",Y,se),ce.push(N),Ze(ce))).then(()=>{ce=[];for(const j of a.list())ce.push(Dr(j,Y,se));return ce.push(N),Ze(ce)}).catch(j=>Zn(j,8)?j:Promise.reject(j))}function q(Y,se,ce){o.list().forEach(_e=>O(()=>_e(Y,se,ce)))}function M(Y,se,ce,_e,ke){const I=y(Y,se);if(I)return I;const N=se===_r,j=Ri?history.state:{};ce&&(_e||N?i.replace(Y.fullPath,ut({scroll:N&&j&&j.scroll},ke)):i.push(Y.fullPath,ke)),u.value=Y,He(Y,se,ce,N),Ke()}let X;function he(){X||(X=i.listen((Y,se,ce)=>{if(!Et.listening)return;const _e=d(Y),ke=_(_e);if(ke){C(ut(ke,{replace:!0}),_e).catch(Ss);return}l=_e;const I=u.value;Ri&&Py(Hf(I.fullPath,ce.delta),Wo()),B(_e,I).catch(N=>Zn(N,12)?N:Zn(N,2)?(C(N.to,_e).then(j=>{Zn(j,20)&&!ce.delta&&ce.type===Ws.pop&&i.go(-1,!1)}).catch(Ss),Promise.reject()):(ce.delta&&i.go(-ce.delta,!1),ie(N,_e,I))).then(N=>{N=N||M(_e,I,!1),N&&(ce.delta&&!Zn(N,8)?i.go(-ce.delta,!1):ce.type===Ws.pop&&Zn(N,20)&&i.go(-1,!1)),q(_e,I,N)}).catch(Ss)}))}let oe=ls(),ee=ls(),te;function ie(Y,se,ce){Ke(Y);const _e=ee.list();return _e.length?_e.forEach(ke=>ke(Y,se,ce)):console.error(Y),Promise.reject(Y)}function Pe(){return te&&u.value!==_r?Promise.resolve():new Promise((Y,se)=>{oe.add([Y,se])})}function Ke(Y){return te||(te=!Y,he(),oe.list().forEach(([se,ce])=>Y?ce(Y):se()),oe.reset()),Y}function He(Y,se,ce,_e){const{scrollBehavior:ke}=t;if(!Ri||!ke)return Promise.resolve();const I=!ce&&Ly(Hf(Y.fullPath,0))||(_e||!ce)&&history.state&&history.state.scroll||null;return ec().then(()=>ke(Y,se,I)).then(N=>N&&By(N)).catch(N=>ie(N,Y,se))}const Ce=Y=>i.go(Y);let Qe;const Ve=new Set,Et={currentRoute:u,listening:!0,addRoute:p,removeRoute:E,hasRoute:v,getRoutes:x,resolve:d,options:t,push:w,replace:g,go:Ce,back:()=>Ce(-1),forward:()=>Ce(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:ee.add,isReady:Pe,install(Y){const se=this;Y.component("RouterLink",bb),Y.component("RouterView",xb),Y.config.globalProperties.$router=se,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Ie(u)}),Ri&&!Qe&&u.value===_r&&(Qe=!0,w(i.location).catch(ke=>{}));const ce={};for(const ke in _r)Object.defineProperty(ce,ke,{get:()=>u.value[ke],enumerable:!0});Y.provide(qo,se),Y.provide(fc,Sd(ce)),Y.provide(rl,u);const _e=Y.unmount;Ve.add(Y),Y.unmount=function(){Ve.delete(Y),Ve.size<1&&(l=_r,X&&X(),X=null,u.value=_r,Qe=!1,te=!1),_e()}}};function Ze(Y){return Y.reduce((se,ce)=>se.then(()=>O(ce)),Promise.resolve())}return Et}function Ab(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(t.matched.find(l=>Vi(l,o))?r.push(o):n.push(o));const u=t.matched[a];u&&(e.matched.find(l=>Vi(l,u))||i.push(u))}return[n,r,i]}function hc(){return An(qo)}function $o(){return An(fc)}const dc=pp("notification",()=>{const t=Ot([]);return{notifications:t,add:async r=>{const i=Math.max(...t.value.map(s=>s.id))+1;t.value.push({...r,id:i})},remove:async r=>{setTimeout(()=>{t.value&&(t.value=t.value.filter(i=>i.id!==r))},0)}}}),Db=["disabled"],Sb={key:0,class:"text ellipsis"},Tb={key:1,class:"icon"},kb=ct({__name:"BaseButton",props:{type:{default:"outline"},disabled:{type:Boolean},reverse:{type:Boolean}},setup(t){const e=t,{type:n,disabled:r,reverse:i}=rn(e),s=kt(()=>n.value==="icon"||n.value==="base-icon"?`btn-${n.value}`:`btn-not-icon btn-${n.value}`);return(a,o)=>(xe(),Me("button",{class:Jt(["btn",[s.value,{reverse:Ie(i)}]]),disabled:Ie(r)},[a.$slots.default?(xe(),Me("div",Sb,[Vu(a.$slots,"default",{},void 0,!0)])):Xt("",!0),a.$slots.icon?(xe(),Me("div",Tb,[Vu(a.$slots,"icon",{},void 0,!0)])):Xt("",!0)],10,Db))}});const xt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},gn=xt(kb,[["__scopeId","data-v-2ad05022"]]),Ob={key:0,class:"mdi mdi-circle-medium"},Rb=ct({__name:"NotificationButton",props:{icon:{},hasNotification:{type:Boolean}},emits:["click"],setup(t,{emit:e}){const n=t,{icon:r}=rn(n),i=()=>e("click");return(s,a)=>(xe(),St(gn,{type:"base-icon",class:"notification",onClick:i},{icon:yt(()=>[Le("span",{class:Jt(["mdi",`mdi-${Ie(r)}`])},null,2),s.hasNotification?(xe(),Me("span",Ob)):Xt("",!0)]),_:1}))}});const Ib=xt(Rb,[["__scopeId","data-v-2afdbacd"]]),Nb={class:"img-container"},Bb=ct({inheritAttrs:!1,__name:"BaseImg",props:{width:{default:"100%"},height:{default:"auto"}},setup(t){const e=t,{width:n,height:r}=rn(e);return(i,s)=>(xe(),Me("div",Nb,[Le("img",oc({class:"img"},i.$attrs,{style:{width:Ie(n),height:Ie(r)}}),null,16)]))}});const no=xt(Bb,[["__scopeId","data-v-73418390"]]),Pb={class:"notification-container"},Lb={class:"notification-info"},Fb={class:"notification-title ellipsis"},Mb=["onClick"],Ub={key:1,class:"progress"},zb=ct({__name:"NotificationList",setup(t){const e=dc(),{remove:n}=e,{notifications:r}=gr(e),i=s=>!!s.progress;return(s,a)=>(xe(),Me("div",Pb,[(xe(!0),Me(Tt,null,Mr(Ie(r),o=>(xe(),Me("div",{class:"notification-item",key:o.id},[We(no,{src:o.cover,alt:"cover",width:"40px",height:"56px"},null,8,["src"]),Le("div",Lb,[Le("p",Fb,En(o.title),1),o.type==="progress"&&i(o)?(xe(),St(gn,{key:0,type:"base-icon",class:"notification-remove"},{default:yt(()=>[Le("span",{class:"mdi mdi-close",onClick:u=>Ie(n)(o.id)},null,8,Mb)]),_:2},1024)):Xt("",!0),o.type==="progress"&&i(o)?(xe(),Me("div",Ub,[Le("div",{class:"bar",style:ci({width:`${o.progress}%`})},null,4)])):Xt("",!0)])]))),128))]))}});const jb=xt(zb,[["__scopeId","data-v-ab362e9d"]]),hi=pp("book",()=>{const t=dc(),{add:e,remove:n}=t,r=Ot(null),i=Ot({}),s=Ot({contents:!1,fontFamily:"",lineHeight:"1.5",displayMode:"single",pageWidth:"1000"});return{books:r,download:async(l,c)=>{setTimeout(()=>{const{title:f,cover:h,uid:p}=l;e({title:f,cover:h,type:"progress",cancel:c,payload:{bookId:p,progress:0}})},0)},upload:async(l,c)=>{setTimeout(()=>{const{title:f,cover:h,uid:p}=l;e({title:f,cover:h,type:"progress",cancel:c,payload:{bookId:p,progress:0}})},0)},cancel:async l=>{setTimeout(()=>{n(l)},0)},readerSetting:s,epubInfo:i}}),Wb=t=>(dr("data-v-672bcccc"),t=t(),pr(),t),qb=Wb(()=>Le("span",{class:"mdi mdi-view-list"},null,-1)),$b=ct({__name:"ContentsSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{modelValue:r}=rn(n),i=()=>{e("update:modelValue",!r.value)};return(s,a)=>(xe(),St(gn,{type:"base-icon",class:Jt(Ie(r)&&"selected"),onClick:i},{icon:yt(()=>[qb]),_:1},8,["class"]))}});const Hb=xt($b,[["__scopeId","data-v-672bcccc"]]),Vb=["Arial","Courier New","Georgia","Impact","Plantagenet Cherokee","Symbol","Tahoma","Times New Roman","Verdana"],Kb=["1","1.25","1.5","1.75","2"],Yb=[{text:"mdi-page-layout-header-footer",value:"single"},{text:"mdi-book-open",value:"double"},{text:"mdi-script-text-outline",value:"scroll"}],Gb="local-fonts",Zb=(...t)=>{const e=new Set;for(const n of t)for(const r of n)e.add(r);return Array.from(e)},Xb=async t=>{try{return(await navigator.permissions.query({name:t})).state==="granted"}catch{return!1}};function Qb(t){return Hl()?(gd(t),!0):!1}function pc(t){return typeof t=="function"?t():Ie(t)}const Ap=typeof window<"u"&&typeof document<"u",Jb=Object.prototype.toString,e2=t=>Jb.call(t)==="[object Object]",il=()=>{},t2=n2();function n2(){var t;return Ap&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function _s(t){var e;const n=pc(t);return(e=n==null?void 0:n.$el)!=null?e:n}const mc=Ap?window:void 0;function La(...t){let e,n,r,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,i]=t,e=mc):[e,n,r,i]=t,!e)return il;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],a=()=>{s.forEach(c=>c()),s.length=0},o=(c,f,h,p)=>(c.addEventListener(f,h,p),()=>c.removeEventListener(f,h,p)),u=ei(()=>[_s(e),pc(i)],([c,f])=>{if(a(),!c)return;const h=e2(f)?{...f}:f;s.push(...n.flatMap(p=>r.map(E=>o(c,p,E,h))))},{immediate:!0,flush:"post"}),l=()=>{u(),a()};return Qb(l),l}let sh=!1;function r2(t,e,n={}){const{window:r=mc,ignore:i=[],capture:s=!0,detectIframe:a=!1}=n;if(!r)return;t2&&!sh&&(sh=!0,Array.from(r.document.body.children).forEach(h=>h.addEventListener("click",il)),r.document.documentElement.addEventListener("click",il));let o=!0;const u=h=>i.some(p=>{if(typeof p=="string")return Array.from(r.document.querySelectorAll(p)).some(E=>E===h.target||h.composedPath().includes(E));{const E=_s(p);return E&&(h.target===E||h.composedPath().includes(E))}}),c=[La(r,"click",h=>{const p=_s(t);if(!(!p||p===h.target||h.composedPath().includes(p))){if(h.detail===0&&(o=!u(h)),!o){o=!0;return}e(h)}},{passive:!0,capture:s}),La(r,"pointerdown",h=>{const p=_s(t);p&&(o=!h.composedPath().includes(p)&&!u(h))},{passive:!0}),a&&La(r,"blur",h=>{setTimeout(()=>{var p;const E=_s(t);((p=r.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(E!=null&&E.contains(r.document.activeElement))&&e(h)},0)})].filter(Boolean);return()=>c.forEach(h=>h())}function i2(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function Xr(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:i=mc,eventName:s="keydown",passive:a=!1,dedupe:o=!1}=r,u=i2(e);return La(i,s,c=>{c.repeat&&pc(o)||u(c)&&n(c)},a)}const s2={key:0,class:"mdi mdi-menu-up"},a2={key:1,class:"mdi mdi-menu-down"},o2=["onClick"],u2=ct({__name:"BaseMenu",props:{options:{},modelValue:{},dense:{type:Boolean},shrink:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{options:r,modelValue:i}=rn(n),s=Ot(!1),a=Ot(!1),o=Ot(null),u=Ot(null),l=kt(()=>r.value.length),c=()=>{s.value=!s.value,a.value=!a.value},f=()=>{a.value=!0,s.value=!0},h=()=>{a.value=!1,s.value=!1},p=()=>{s.value&&(s.value=!1,a.value=!1)},E=w=>{if(o.value===null){o.value=0;return}const g=o.value+(w==="up"?-1:1);g<0?o.value=l.value:g===l.value?o.value=0:o.value=g},x=()=>{a.value&&E("down")},v=()=>{!a.value||!s.value||E("up")},d=()=>{if(!a.value||!s.value)return;const w=r.value.find((g,_)=>_===o.value);w&&e("update:modelValue",w)},m=w=>{const g=r.value.find((_,C)=>C===w);g&&e("update:modelValue",g)},y=w=>[o.value,i.value].includes(w);return r2(u,p),Xr("ArrowDown",x),Xr("ArrowUp",v),Xr("Enter",d),(w,g)=>(xe(),Me("div",{ref_key:"menuRef",ref:u,class:Jt(["menu-wrapper",{"menu-wrapper__focus":a.value,dense:w.dense,shrink:w.shrink}]),onClick:c},[Hv(Le("input",{inputmode:"none",readonly:"",class:"ellipsis",onFocus:f,onBlur:h,"onUpdate:modelValue":g[0]||(g[0]=_=>wt(i)?i.value=_:null)},null,544),[[uy,Ie(i)]]),s.value?(xe(),Me("span",s2)):(xe(),Me("span",a2)),We(ra,{name:"fade"},{default:yt(()=>[s.value?(xe(),Me("div",{key:0,class:Jt(["options-wrapper",s.value&&"options-wrapper__active"])},[(xe(!0),Me(Tt,null,Mr(Ie(r),(_,C)=>(xe(),Me("div",{class:Jt(["option-content ellipsis",{"option-content__selected":y(C)}]),key:C,onClick:S=>m(C)},En(_),11,o2))),128))],2)):Xt("",!0)]),_:1})],2))}});const Dp=xt(u2,[["__scopeId","data-v-ba0b1a5a"]]),l2=ct({__name:"FontFamilySelection",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{modelValue:r}=rn(n),i=Ot([]),s=Ot("requesting"),a=kt(()=>"queryLocalFonts"in window),o=kt(()=>Zb(i.value,Vb)),u=kt({get(){return r.value},set(c){e("update:modelValue",c)}});ns(async()=>{await Xb(Gb)&&l(),a.value||(s.value="success")});const l=async()=>{const c=await window.queryLocalFonts();i.value=c.reduce((f,h)=>(f.includes(h.family)||f.push(h.family),f),[]),s.value="success"};return(c,f)=>s.value==="requesting"?(xe(),St(gn,{key:0,onClick:l,title:"",disabled:!a.value},{default:yt(()=>[fi("  ")]),_:1},8,["disabled"])):(xe(),St(Dp,{key:1,options:o.value,modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=h=>u.value=h),dense:""},null,8,["options","modelValue"]))}}),c2=t=>(dr("data-v-a53780e1"),t=t(),pr(),t),f2={class:"setting-wrapper"},h2=c2(()=>Le("span",null,"",-1)),d2=ct({__name:"LineHeightSelection",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{modelValue:r}=rn(n),i=kt({get(){return r.value},set(s){e("update:modelValue",s)}});return(s,a)=>(xe(),Me("div",f2,[h2,We(Dp,{options:Ie(Kb),modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=o=>i.value=o),dense:"",shrink:""},null,8,["options","modelValue"])]))}});const p2=xt(d2,[["__scopeId","data-v-a53780e1"]]),m2={class:"setting-wrapper"},g2=ct({__name:"DisplayModeSwitch",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{modelValue:r}=rn(n),i=s=>{e("update:modelValue",s)};return(s,a)=>(xe(),Me("div",m2,[(xe(!0),Me(Tt,null,Mr(Ie(Yb),(o,u)=>(xe(),St(gn,{type:"base-icon",key:u,class:Jt({selected:Ie(r)===o.value}),onClick:l=>i(o.value)},{icon:yt(()=>[Le("span",{class:Jt(["mdi",o.text])},null,2)]),_:2},1032,["class","onClick"]))),128))]))}});const v2=xt(g2,[["__scopeId","data-v-0266ba1f"]]),y2={class:"input-container"},b2=["value","disabled"],_2={key:0,class:"tip"},w2=ct({inheritAttrs:!1,__name:"BaseInput",props:{modelValue:{},disabled:{type:Boolean},error:{type:Boolean},tip:{},dense:{type:Boolean},shrink:{type:Boolean}},emits:["update:modelValue","action-click","change"],setup(t,{emit:e}){const n=t,{disabled:r}=rn(n),i=o=>{e("update:modelValue",o.target.value)},s=()=>e("action-click"),a=o=>{const u=o.target.value;e("change",u)};return(o,u)=>(xe(),Me("div",{class:Jt([{disabled:Ie(r),error:o.error,dense:o.dense,shrink:o.shrink},"input-wrapper"])},[Le("div",y2,[Le("input",oc({value:o.modelValue,onInput:i,onChange:a,disabled:Ie(r),class:"input"},o.$attrs),null,16,b2),o.shrink?Xt("",!0):(xe(),Me("div",{key:0,class:"icon",onClick:s},[Vu(o.$slots,"default",{},void 0,!0)]))]),o.tip?(xe(),Me("div",_2,En(o.tip),1)):Xt("",!0)],2))}});const Sp=xt(w2,[["__scopeId","data-v-e5057f2f"]]),E2=t=>(dr("data-v-c60b5e2b"),t=t(),pr(),t),x2={class:"setting-wrapper"},C2=E2(()=>Le("span",null,"",-1)),A2=ct({__name:"PageWidthInput",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{modelValue:r}=rn(n),i=hi(),{readerSetting:s}=gr(i),a=o=>{const u=Number(o),l=s.value.contents?240:0,c=window.innerWidth-l-200;u<0?o="0":u>c?o=`${c}`:o=`${u}`,e("update:modelValue",o)};return zd(()=>{a(s.value.pageWidth.toString())}),(o,u)=>(xe(),Me("div",x2,[C2,We(Sp,{"model-value":Ie(r),onChange:a,type:"number",inputmode:"numeric",dense:"",shrink:""},null,8,["model-value"])]))}});const D2=xt(A2,[["__scopeId","data-v-c60b5e2b"]]),S2={class:"reader-header-wrapper"},T2=ct({name:"ReaderHeader",__name:"Index",setup(t){const e=hi(),{readerSetting:n}=gr(e),r={contents:Hb,fontFamily:l2,lineHeight:p2,displayMode:v2,pageWidth:D2};return(i,s)=>(xe(),Me("div",S2,[(xe(),Me(Tt,null,Mr(r,(a,o)=>Le("div",{class:"func-wrapper",key:o},[(xe(),St(s0(a),{modelValue:Ie(n)[o],"onUpdate:modelValue":u=>Ie(n)[o]=u},null,8,["modelValue","onUpdate:modelValue"]))])),64))]))}});const k2=xt(T2,[["__scopeId","data-v-280b44ea"]]),O2="/ofa-reader/assets/logo-bd736d35.png",R2=t=>(dr("data-v-8a4de71e"),t=t(),pr(),t),I2={class:"container"},N2={class:"start-wrapper"},B2=["src"],P2=R2(()=>Le("div",{class:"divider"},null,-1)),L2=ct({__name:"AppBar",setup(t){const e=dc(),{notifications:n}=gr(e),r=$o(),i=Ot(!1),s=()=>i.value=!i.value;return(a,o)=>{const u=rs("RouterLink");return xe(),Me("header",I2,[Le("div",N2,[We(u,{to:"/"},{default:yt(()=>[Le("img",{src:Ie(O2),alt:"logo",class:"logo"},null,8,B2)]),_:1}),Ie(r).name==="reader"?(xe(),Me(Tt,{key:0},[P2,We(k2)],64)):Xt("",!0)]),We(Ib,{icon:"bell",onClick:s,hasNotification:Ie(n).length>0},null,8,["hasNotification"]),i.value?(xe(),St(jb,{key:0})):Xt("",!0)])}}});const Tp=xt(L2,[["__scopeId","data-v-8a4de71e"]]),F2={class:"layout"},M2={class:"main"},U2=ct({__name:"DefaultLayout",setup(t){return(e,n)=>{const r=rs("RouterView");return xe(),Me("div",F2,[We(Tp),Le("main",M2,[We(ra,{name:"fade"},{default:yt(()=>[We(r)]),_:1})])])}}});const z2=xt(U2,[["__scopeId","data-v-7236363e"]]),j2={class:"layout"},W2=ct({__name:"BookReaderLayout",setup(t){return(e,n)=>{const r=rs("RouterView");return xe(),Me("div",j2,[We(Tp),Le("main",null,[We(ra,{name:"fade"},{default:yt(()=>[We(r)]),_:1})])])}}});const q2=xt(W2,[["__scopeId","data-v-2ad8fdf9"]]),$2=ct({__name:"App",setup(t){return(e,n)=>e.$route.name==="reader"?(xe(),St(q2,{key:0})):(xe(),St(z2,{key:1}))}});const vt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Lt=Object.keys,Qt=Array.isArray;function sn(t,e){return typeof e!="object"||Lt(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||vt.Promise||(vt.Promise=Promise);const qs=Object.getPrototypeOf,H2={}.hasOwnProperty;function vn(t,e){return H2.call(t,e)}function Yi(t,e){typeof e=="function"&&(e=e(qs(t))),(typeof Reflect>"u"?Lt:Reflect.ownKeys)(e).forEach(n=>{ir(t,n,e[n])})}const kp=Object.defineProperty;function ir(t,e,n,r){kp(t,e,sn(n&&vn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function zi(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ir(t.prototype,"constructor",t),{extend:Yi.bind(null,t.prototype)}}}}const V2=Object.getOwnPropertyDescriptor;function gc(t,e){let n;return V2(t,e)||(n=qs(t))&&gc(n,e)}const K2=[].slice;function ro(t,e,n){return K2.call(t,e,n)}function Op(t,e){return e(t)}function ws(t){if(!t)throw new Error("Assertion Failed")}function Rp(t){vt.setImmediate?setImmediate(t):setTimeout(t,0)}function Ip(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function sr(t,e){if(vn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=sr(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(a!==-1){var o=t[e.substr(0,a)];return o===void 0?void 0:sr(o,e.substr(a+1))}}function Pn(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){ws(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Pn(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s),o=e.substr(s+1);if(o==="")n===void 0?Qt(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var u=t[a];u&&vn(t,a)||(u=t[a]={}),Pn(u,o,n)}}else n===void 0?Qt(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Np(t){var e={};for(var n in t)vn(t,n)&&(e[n]=t[n]);return e}const Y2=[].concat;function Bp(t){return Y2.apply([],t)}const Pp="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Bp([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>vt[t]),G2=Pp.map(t=>vt[t]);Ip(Pp,t=>[t,!0]);let Sr=null;function ia(t){Sr=typeof WeakMap<"u"&&new WeakMap;const e=sl(t);return Sr=null,e}function sl(t){if(!t||typeof t!="object")return t;let e=Sr&&Sr.get(t);if(e)return e;if(Qt(t)){e=[],Sr&&Sr.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(sl(t[n]))}else if(G2.indexOf(t.constructor)>=0)e=t;else{const s=qs(t);for(var i in e=s===Object.prototype?{}:Object.create(s),Sr&&Sr.set(t,e),t)vn(t,i)&&(e[i]=sl(t[i]))}return e}const{toString:Z2}={};function al(t){return Z2.call(t).slice(8,-1)}const ol=typeof Symbol<"u"?Symbol.iterator:"@@iterator",X2=typeof ol=="symbol"?function(t){var e;return t!=null&&(e=t[ol])&&e.apply(t)}:function(){return null},Ii={};function er(t){var e,n,r,i;if(arguments.length===1){if(Qt(t))return t.slice();if(this===Ii&&typeof t=="string")return[t];if(i=X2(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const vc=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Kn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lp(t,e){Kn=t,Fp=e}var Fp=()=>!0;const Q2=!new Error("").stack;function di(){if(Q2)try{throw di.arguments,new Error}catch(t){return t}return new Error}function ul(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Fp).map(r=>`
`+r).join("")):""}var Mp=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],yc=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Mp),J2={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ji(t,e){this._e=di(),this.name=t,this.message=e}function Up(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function io(t,e,n,r){this._e=di(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Up(t,e)}function ks(t,e){this._e=di(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Up(t,e)}zi(ji).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ul(this._e,2))}},toString:function(){return this.name+": "+this.message}}),zi(io).from(ji),zi(ks).from(ji);var bc=yc.reduce((t,e)=>(t[e]=e+"Error",t),{});const e_=ji;var je=yc.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=di(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=J2[e]||n,this.inner=null)}return zi(r).from(e_),t[e]=r,t},{});je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError;var ah=Mp.reduce((t,e)=>(t[e+"Error"]=je[e],t),{}),Fa=yc.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=je[e]),t),{});function ft(){}function $s(t){return t}function t_(t,e){return t==null||t===$s?e:function(n){return e(t(n))}}function ai(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function n_(t,e){return t===ft?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ai(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ai(i,this.onerror):i),s!==void 0?s:n}}function r_(t,e){return t===ft?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ai(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ai(r,this.onerror):r)}}function i_(t,e){return t===ft?e:function(n){var r=t.apply(this,arguments);sn(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ai(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ai(s,this.onerror):s),r===void 0?a===void 0?void 0:a:sn(r,a)}}function s_(t,e){return t===ft?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function _c(t,e){return t===ft?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}Fa.ModifyError=io,Fa.DexieError=ji,Fa.BulkError=ks;var Hs={};const zp=100,[ll,so,cl]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,qs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,qs(e),t]})(),jp=so&&so.then,Ma=ll&&ll.constructor,wc=!!cl;var fl=!1,a_=cl?()=>{cl.then(Ea)}:vt.setImmediate?setImmediate.bind(null,Ea):vt.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Ea(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Ea,0)},Os=function(t,e){Es.push([t,e]),ao&&(a_(),ao=!1)},hl=!0,ao=!0,ni=[],Ua=[],dl=null,pl=$s,Wi={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:lh,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{lh(t[0],t[1])}catch{}})}},Be=Wi,Es=[],ri=0,za=[];function Te(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ft,this._lib=!1;var e=this._PSD=Be;if(Kn&&(this._stackHolder=di(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Hs)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&gl(this,this._value))}this._state=null,this._value=null,++e.ref,qp(this,t)}const ml={get:function(){var t=Be,e=oo;function n(r,i){var s=!t.global&&(t!==Be||e!==oo);const a=s&&!ur();var o=new Te((u,l)=>{Ec(this,new Wp(uo(r,t,s,a),uo(i,t,s,a),u,l,t))});return Kn&&Vp(o,this),o}return n.prototype=Hs,n},set:function(t){ir(this,"then",t&&t.prototype===Hs?ml:{get:function(){return t},set:ml.set})}};function Wp(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function qp(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&sa();n&&typeof n.then=="function"?qp(t,(i,s)=>{n instanceof Te?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,$p(t)),r&&aa()}},gl.bind(null,t))}catch(n){gl(t,n)}}function gl(t,e){if(Ua.push(e),t._state===null){var n=t._lib&&sa();e=pl(e),t._state=!1,t._value=e,Kn&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch(a){i&&i(a)}}(()=>{var r=gc(e,"stack");e._promise=t,ir(e,"stack",{get:()=>fl?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){ni.some(i=>i._value===r._value)||ni.push(r)}(t),$p(t),n&&aa()}}function $p(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Ec(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),ri===0&&(++ri,Os(()=>{--ri==0&&xc()},[]))}function Ec(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++ri,Os(o_,[n,t,e])}else t._listeners.push(e)}function o_(t,e,n){try{dl=e;var r,i=e._value;e._state?r=t(i):(Ua.length&&(Ua=[]),r=t(i),Ua.indexOf(i)===-1&&function(s){for(var a=ni.length;a;)if(ni[--a]._value===s._value)return void ni.splice(a,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{dl=null,--ri==0&&xc(),--n.psd.ref||n.psd.finalize()}}function Hp(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,a=t._value;a!=null?(i=a.name||"Error",s=a.message||a,r=ul(a,0)):(i=a,s=""),e.push(i+(s?": "+s:"")+r)}return Kn&&((r=ul(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Hp(t._prev,e,n)),e}function Vp(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Ea(){sa()&&aa()}function sa(){var t=hl;return hl=!1,ao=!1,t}function aa(){var t,e,n;do for(;Es.length>0;)for(t=Es,Es=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Es.length>0);hl=!0,ao=!0}function xc(){var t=ni;ni=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=za.slice(0),n=e.length;n;)e[--n]()}function xa(t){return new Te(Hs,!1,t)}function _t(t,e){var n=Be;return function(){var r=sa(),i=Be;try{return Lr(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Lr(i,!1),r&&aa()}}}Yi(Te.prototype,{then:ml,_then:function(t,e){Ec(this,new Wp(null,null,t,e,Be))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):xa(r)):this.then(null,r=>r&&r.name===e?n(r):xa(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),xa(e)))},stack:{get:function(){if(this._stack)return this._stack;try{fl=!0;var t=Hp(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{fl=!1}}},timeout:function(t,e){return t<1/0?new Te((n,r)=>{var i=setTimeout(()=>r(new je.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ir(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Wi.env=Kp(),Yi(Te,{all:function(){var t=er.apply(null,arguments).map(Ca);return new Te(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>Te.resolve(i).then(a=>{t[s]=a,--r||e(t)},n))})},resolve:t=>{if(t instanceof Te)return t;if(t&&typeof t.then=="function")return new Te((n,r)=>{t.then(n,r)});var e=new Te(Hs,!0,t);return Vp(e,dl),e},reject:xa,race:function(){var t=er.apply(null,arguments).map(Ca);return new Te((e,n)=>{t.map(r=>Te.resolve(r).then(e,n))})},PSD:{get:()=>Be,set:t=>Be=t},totalEchoes:{get:()=>oo},newPSD:Pr,usePSD:ss,scheduler:{get:()=>Os,set:t=>{Os=t}},rejectionMapper:{get:()=>pl,set:t=>{pl=t}},follow:(t,e)=>new Te((n,r)=>Pr((i,s)=>{var a=Be;a.unhandleds=[],a.onunhandled=s,a.finalize=ai(function(){(function(o){function u(){o(),za.splice(za.indexOf(u),1)}za.push(u),++ri,Os(()=>{--ri==0&&xc()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},a.finalize),t()},e,n,r))}),Ma&&(Ma.allSettled&&ir(Te,"allSettled",function(){const t=er.apply(null,arguments).map(Ca);return new Te(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>Te.resolve(i).then(a=>r[s]={status:"fulfilled",value:a},a=>r[s]={status:"rejected",reason:a}).then(()=>--n||e(r)))})}),Ma.any&&typeof AggregateError<"u"&&ir(Te,"any",function(){const t=er.apply(null,arguments).map(Ca);return new Te((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,a)=>Te.resolve(s).then(o=>e(o),o=>{i[a]=o,--r||n(new AggregateError(i))}))})}));const Zt={awaits:0,echoes:0,id:0};var u_=0,ja=[],gu=0,oo=0,l_=0;function Pr(t,e,n,r){var i=Be,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++l_;var a=Wi.env;s.env=wc?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject,nthen:oh(a.nthen,s),gthen:oh(a.gthen,s)}:{},e&&sn(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=ss(s,t,n,r);return s.ref===0&&s.finalize(),o}function is(){return Zt.id||(Zt.id=++u_),++Zt.awaits,Zt.echoes+=zp,Zt.id}function ur(){return!!Zt.awaits&&(--Zt.awaits==0&&(Zt.id=0),Zt.echoes=Zt.awaits*zp,!0)}function Ca(t){return Zt.echoes&&t&&t.constructor===Ma?(is(),t.then(e=>(ur(),e),e=>(ur(),zt(e)))):t}function c_(t){++oo,Zt.echoes&&--Zt.echoes!=0||(Zt.echoes=Zt.id=0),ja.push(Be),Lr(t,!0)}function f_(){var t=ja[ja.length-1];ja.pop(),Lr(t,!1)}function Lr(t,e){var n=Be;if((e?!Zt.echoes||gu++&&t===Be:!gu||--gu&&t===Be)||Yp(e?c_.bind(null,t):f_),t!==Be&&(Be=t,n===Wi&&(Wi.env=Kp()),wc)){var r=Wi.env.Promise,i=t.env;so.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(vt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Kp(){var t=vt.Promise;return wc?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(vt,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:so.then,gthen:t.prototype.then}:{}}function ss(t,e,n,r,i){var s=Be;try{return Lr(t,!0),e(n,r,i)}finally{Lr(s,!1)}}function Yp(t){jp.call(ll,t)}function uo(t,e,n,r){return typeof t!="function"?t:function(){var i=Be;n&&is(),Lr(e,!0);try{return t.apply(this,arguments)}finally{Lr(i,!1),r&&Yp(ur)}}}function oh(t,e){return function(n,r){return t.call(this,uo(n,e),uo(r,e))}}(""+jp).indexOf("[native code]")===-1&&(is=ur=ft);const uh="unhandledrejection";function lh(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(vt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(uh,!0,!0),sn(r,i)):vt.CustomEvent&&sn(r=new CustomEvent(uh,{detail:i}),i),r&&vt.dispatchEvent&&(dispatchEvent(r),!vt.PromiseRejectionEvent&&vt.onunhandledrejection))try{vt.onunhandledrejection(r)}catch{}Kn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var zt=Te.reject;function vl(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Be.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===bc.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>vl(t,e,n,r))):zt(s)}return i._promise(e,(s,a)=>Pr(()=>(Be.trans=i,r(s,a,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return zt(new je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return zt(new je.DatabaseClosed);t.open().catch(ft)}return t._state.dbReadyPromise.then(()=>vl(t,e,n,r))}const ch="3.2.4",Qr=String.fromCharCode(65535),yl=-1/0,Xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Gp="String expected.",Rs=[],Ho=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),h_=Ho,d_=Ho,Zp=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Vo="__dbnames",vu="readonly",yu="readwrite";function oi(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Xp={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Aa(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=ia(e))[t],e)}class p_{_trans(e,n,r){const i=this._tx||Be.trans,s=this.name;function a(u,l,c){if(!c.schema[s])throw new je.NotFound("Table "+s+" not part of transaction");return n(c.idbtrans,c)}const o=sa();try{return i&&i.db===this.db?i===Be.trans?i._promise(e,a,r):Pr(()=>i._promise(e,a,r),{trans:i,transless:Be.transless||Be}):vl(this.db,e,[this.name],a)}finally{o&&aa()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Qt(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Lt(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(l=>l.compound&&n.every(c=>l.keyPath.indexOf(c)>=0)&&l.keyPath.every(c=>n.indexOf(c)>=0))[0];if(r&&this.db._maxKey!==Qr)return this.where(r.name).equals(r.keyPath.map(l=>e[l]));!r&&Kn&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function a(l,c){try{return s.cmp(l,c)===0}catch{return!1}}const[o,u]=n.reduce(([l,c],f)=>{const h=i[f],p=e[f];return[l||h,l||!h?oi(c,h&&h.multi?E=>{const x=sr(E,f);return Qt(x)&&x.some(v=>a(p,v))}:E=>a(p,sr(E,f))):c]},[null,null]);return o?this.where(o.name).equals(e[o.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Qt(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(vn(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){sn(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Aa(i)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?Te.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Pn(e,i,a)}catch{}return a})}update(e,n){if(typeof e!="object"||Qt(e))return this.where(":id").equals(e).modify(n);{const r=sr(e,this.schema.primKey.keyPath);if(r===void 0)return zt(new je.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Lt(n).forEach(i=>{Pn(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Aa(i)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?Te.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Pn(e,i,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?Te.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Xp})).then(e=>e.numFailures?Te.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:u}=this.schema.primKey;if(u&&i)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const l=e.length;let c=u&&o?e.map(Aa(u)):e;return this.core.mutate({trans:a,type:"add",keys:i,values:c,wantResults:s}).then(({numFailures:f,results:h,lastResult:p,failures:E})=>{if(f===0)return s?h:p;throw new ks(`${this.name}.bulkAdd(): ${f} of ${l} operations failed`,E)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:o,keyPath:u}=this.schema.primKey;if(u&&i)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const l=e.length;let c=u&&o?e.map(Aa(u)):e;return this.core.mutate({trans:a,type:"put",keys:i,values:c,wantResults:s}).then(({numFailures:f,results:h,lastResult:p,failures:E})=>{if(f===0)return s?h:p;throw new ks(`${this.name}.bulkPut(): ${f} of ${l} operations failed`,E)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new ks(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Is(t){var e={},n=function(a,o){if(o){for(var u=arguments.length,l=new Array(u-1);--u;)l[u-1]=arguments[u];return e[a].subscribe.apply(null,l),t}if(typeof a=="string")return e[a]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(a,o,u){if(typeof a!="object"){var l;o||(o=s_),u||(u=ft);var c={subscribers:[],fire:u,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=o(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(h){return h!==f}),c.fire=c.subscribers.reduce(o,u)}};return e[a]=n[a]=c,c}Lt(l=a).forEach(function(f){var h=l[f];if(Qt(h))s(f,l[f][0],l[f][1]);else{if(h!=="asap")throw new je.InvalidArgument("Invalid event config");var p=s(f,$s,function(){for(var E=arguments.length,x=new Array(E);E--;)x[E]=arguments[E];p.subscribers.forEach(function(v){Rp(function(){v.apply(null,x)})})})}})}}function cs(t,e){return zi(e).from({prototype:t}),e}function wi(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function bu(t,e){t.filter=oi(t.filter,e)}function _u(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>oi(r(),e()):e,t.justLimit=n&&!r}function Wa(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new je.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function fh(t,e,n){const r=Wa(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Da(t,e,n,r){const i=t.replayFilter?oi(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},a=(o,u,l)=>{if(!i||i(u,l,h=>u.stop(h),h=>u.fail(h))){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),vn(s,f)||(s[f]=!0,e(o,u,l))}};return Promise.all([t.or._iterate(a,n),hh(fh(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return hh(fh(t,r,n),oi(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function hh(t,e,n,r){var i=_t(r?(s,a,o)=>n(r(s),a,o):n);return t.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();e&&!e(s,o=>a=o,o=>{s.stop(o),a=ft},o=>{s.fail(o),a=ft})||i(s.value,s,o=>a=o),a()})})}function nn(t,e){try{const n=dh(t),r=dh(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const a=i.length,o=s.length,u=a<o?a:o;for(let l=0;l<u;++l)if(i[l]!==s[l])return i[l]<s[l]?-1:1;return a===o?0:a<o?-1:1}(ph(t),ph(e));case"Array":return function(i,s){const a=i.length,o=s.length,u=a<o?a:o;for(let l=0;l<u;++l){const c=nn(i[l],s[l]);if(c!==0)return c}return a===o?0:a<o?-1:1}(t,e)}}catch{}return NaN}function dh(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=al(t);return n==="ArrayBuffer"?"binary":n}function ph(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class m_{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,zt.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,zt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=oi(n.algorithm,e)}_iterate(e,n){return Da(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&sn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Da(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(wi(r,!0))return i.count({trans:n,query:{index:Wa(r,i.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var s=0;return Da(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var o=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,s),h=a(c,s);return f<h?-o:f>h?o:0}return this.toArray(function(l){return l.sort(u)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&wi(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Wa(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:a})=>i?a.map(i):a)}{const i=[];return Da(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,wi(n)?_u(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):_u(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_u(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return bu(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return bu(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=oi(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&wi(n,!0)&&n.limit>0)return this._read(i=>{var s=Wa(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return bu(this._ctx,function(i){var s=i.primaryKey.toString(),a=vn(r,s);return r[s]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=Lt(e),a=s.length;i=function(x){for(var v=!1,d=0;d<a;++d){var m=s[d],y=e[m];sr(x,m)!==y&&(Pn(x,m,y),v=!0)}return v}}const o=n.table.core,{outbound:u,extractKey:l}=o.schema.primaryKey,c=this.db._options.modifyChunkSize||200,f=[];let h=0;const p=[],E=(x,v)=>{const{failures:d,numFailures:m}=v;h+=x-m;for(let y of Lt(d))f.push(d[y])};return this.clone().primaryKeys().then(x=>{const v=d=>{const m=Math.min(c,x.length-d);return o.getMany({trans:r,keys:x.slice(d,d+m),cache:"immutable"}).then(y=>{const w=[],g=[],_=u?[]:null,C=[];for(let O=0;O<m;++O){const B=y[O],q={value:ia(B),primKey:x[d+O]};i.call(q,q.value,q)!==!1&&(q.value==null?C.push(x[d+O]):u||nn(l(B),l(q.value))===0?(g.push(q.value),u&&_.push(x[d+O])):(C.push(x[d+O]),w.push(q.value)))}const S=wi(n)&&n.limit===1/0&&(typeof e!="function"||e===wu)&&{index:n.index,range:n.range};return Promise.resolve(w.length>0&&o.mutate({trans:r,type:"add",values:w}).then(O=>{for(let B in O.failures)C.splice(parseInt(B),1);E(w.length,O)})).then(()=>(g.length>0||S&&typeof e=="object")&&o.mutate({trans:r,type:"put",keys:_,values:g,criteria:S,changeSpec:typeof e!="function"&&e}).then(O=>E(g.length,O))).then(()=>(C.length>0||S&&e===wu)&&o.mutate({trans:r,type:"delete",keys:C,criteria:S}).then(O=>E(C.length,O))).then(()=>x.length>d+m&&v(d+c))})};return v(0).then(()=>{if(f.length>0)throw new io("Error modifying one or more objects",f,h,p);return x.length})})})}delete(){var e=this._ctx,n=e.range;return wi(e)&&(e.isPrimKey&&!d_||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(a=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:o,lastResult:u,results:l,numFailures:c})=>{if(c)throw new io("Could not delete some values",Object.keys(o).map(f=>o[f]),a-c);return a-c}))}):this.modify(wu)}}const wu=(t,e)=>e.value=null;function g_(t,e){return t<e?-1:t===e?0:1}function v_(t,e){return t>e?-1:t===e?0:1}function pn(t,e,n){var r=t instanceof Jp?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Ei(t){return new t.Collection(t,()=>Qp("")).limit(0)}function y_(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),o=-1,u=0;u<a;++u){var l=e[u];if(l!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;i(t[u],l)<0&&(o=u)}return a<r.length&&s==="next"?t+n.substr(t.length):a<t.length&&s==="prev"?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function Sa(t,e,n,r){var i,s,a,o,u,l,c,f=n.length;if(!n.every(x=>typeof x=="string"))return pn(t,Gp);function h(x){i=function(d){return d==="next"?m=>m.toUpperCase():m=>m.toLowerCase()}(x),s=function(d){return d==="next"?m=>m.toLowerCase():m=>m.toUpperCase()}(x),a=x==="next"?g_:v_;var v=n.map(function(d){return{lower:s(d),upper:i(d)}}).sort(function(d,m){return a(d.lower,m.lower)});o=v.map(function(d){return d.upper}),u=v.map(function(d){return d.lower}),l=x,c=x==="next"?"":r}h("next");var p=new t.Collection(t,()=>Cr(o[0],u[f-1]+r));p._ondirectionchange=function(x){h(x)};var E=0;return p._addAlgorithm(function(x,v,d){var m=x.key;if(typeof m!="string")return!1;var y=s(m);if(e(y,u,E))return!0;for(var w=null,g=E;g<f;++g){var _=y_(m,y,o[g],u[g],a,l);_===null&&w===null?E=g+1:(w===null||a(w,_)>0)&&(w=_)}return v(w!==null?function(){x.continue(w+c)}:d),!1}),p}function Cr(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Qp(t){return{type:1,lower:t,upper:t}}class Jp{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?Ei(this):new this.Collection(this,()=>Cr(e,n,!r,!i))}catch{return pn(this,Xn)}}equals(e){return e==null?pn(this,Xn):new this.Collection(this,()=>Qp(e))}above(e){return e==null?pn(this,Xn):new this.Collection(this,()=>Cr(e,void 0,!0))}aboveOrEqual(e){return e==null?pn(this,Xn):new this.Collection(this,()=>Cr(e,void 0,!1))}below(e){return e==null?pn(this,Xn):new this.Collection(this,()=>Cr(void 0,e,!1,!0))}belowOrEqual(e){return e==null?pn(this,Xn):new this.Collection(this,()=>Cr(void 0,e))}startsWith(e){return typeof e!="string"?pn(this,Gp):this.between(e,e+Qr,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Sa(this,(n,r)=>n.indexOf(r[0])===0,[e],Qr)}equalsIgnoreCase(e){return Sa(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=er.apply(Ii,arguments);return e.length===0?Ei(this):Sa(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=er.apply(Ii,arguments);return e.length===0?Ei(this):Sa(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Qr)}anyOf(){const e=er.apply(Ii,arguments);let n=this._cmp;try{e.sort(n)}catch{return pn(this,Xn)}if(e.length===0)return Ei(this);const r=new this.Collection(this,()=>Cr(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,a,o)=>{const u=s.key;for(;n(u,e[i])>0;)if(++i,i===e.length)return a(o),!1;return n(u,e[i])===0||(a(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[yl,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=er.apply(Ii,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return pn(this,Xn)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[yl,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(e.length===0)return Ei(this);if(!e.every(m=>m[0]!==void 0&&m[1]!==void 0&&i(m[0],m[1])<=0))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);const u=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;let c,f=i;function h(m,y){return f(m[0],y[0])}try{c=e.reduce(function(m,y){let w=0,g=m.length;for(;w<g;++w){const _=m[w];if(r(y[0],_[1])<0&&r(y[1],_[0])>0){_[0]=a(_[0],y[0]),_[1]=o(_[1],y[1]);break}}return w===g&&m.push(y),m},[]),c.sort(h)}catch{return pn(this,Xn)}let p=0;const E=l?m=>i(m,c[p][1])>0:m=>i(m,c[p][1])>=0,x=u?m=>s(m,c[p][0])>0:m=>s(m,c[p][0])>=0;let v=E;const d=new this.Collection(this,()=>Cr(c[0][0],c[c.length-1][1],!u,!l));return d._ondirectionchange=m=>{m==="next"?(v=E,f=i):(v=x,f=s),c.sort(h)},d._addAlgorithm((m,y,w)=>{for(var g=m.key;v(g);)if(++p,p===c.length)return y(w),!1;return!!function(_){return!E(_)&&!x(_)}(g)||(this._cmp(g,c[p][1])===0||this._cmp(g,c[p][0])===0||y(()=>{f===i?m.continue(c[p][0]):m.continue(c[p][1])}),!1)}),d}startsWithAnyOf(){const e=er.apply(Ii,arguments);return e.every(n=>typeof n=="string")?e.length===0?Ei(this):this.inAnyRange(e.map(n=>[n,n+Qr])):pn(this,"startsWithAnyOf() only works with strings")}}function zn(t){return _t(function(e){return Vs(e),t(e.target.error),!1})}function Vs(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Ks="storagemutated",Tr="x-storagemutated-1",Fr=Is(null,Ks);class b_{_lock(){return ws(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this}_unlock(){if(ws(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ss(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&Be.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(ws(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new je.DatabaseClosed(r);case"MissingAPIError":throw new je.MissingAPI(r.message,r);default:throw new je.OpenFailed(r)}if(!this.active)throw new je.TransactionInactive;return ws(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=_t(i=>{Vs(i),this._reject(e.error)}),e.onabort=_t(i=>{Vs(i),this.active&&this._reject(new je.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=_t(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Fr.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return zt(new je.ReadOnly("Transaction is readonly"));if(!this.active)return zt(new je.TransactionInactive);if(this._locked())return new Te((s,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,a)},Be])});if(r)return Pr(()=>{var s=new Te((a,o)=>{this._lock();const u=n(a,o,this);u&&u.then&&u.then(a,o)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Te((s,a)=>{var o=n(s,a,this);o&&o.then&&o.then(s,a)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=Te.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new Te((a,o)=>{r.then(u=>n._waitingQueue.push(_t(a.bind(null,u))),u=>n._waitingQueue.push(_t(o.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(vn(n,e))return n[e];const r=this.schema[e];if(!r)throw new je.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function bl(t,e,n,r,i,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+em(e)}}function em(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function tm(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Ip(n,r=>[r.name,r])}}let Ys=t=>{try{return t.only([[]]),Ys=()=>[[]],[[]]}catch{return Ys=()=>Qr,Qr}};function _l(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>sr(r,e)}(t):e=>sr(e,t)}function mh(t){return[].slice.call(t)}let __=0;function Ns(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function w_(t,e,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:l,upper:c,lowerOpen:f,upperOpen:h}=u;return l===void 0?c===void 0?null:e.upperBound(c,!!h):c===void 0?e.lowerBound(l,!!f):e.bound(l,c,!!f,!!h)}const{schema:i,hasGetAll:s}=function(u,l){const c=mh(u.objectStoreNames);return{schema:{name:u.name,tables:c.map(f=>l.objectStore(f)).map(f=>{const{keyPath:h,autoIncrement:p}=f,E=Qt(h),x=h==null,v={},d={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x,compound:E,keyPath:h,autoIncrement:p,unique:!0,extractKey:_l(h)},indexes:mh(f.indexNames).map(m=>f.index(m)).map(m=>{const{name:y,unique:w,multiEntry:g,keyPath:_}=m,C={name:y,compound:Qt(_),keyPath:_,unique:w,multiEntry:g,extractKey:_l(_)};return v[Ns(_)]=C,C}),getIndexByKeyPath:m=>v[Ns(m)]};return v[":id"]=d.primaryKey,h!=null&&(v[Ns(h)]=d.primaryKey),d})},hasGetAll:c.length>0&&"getAll"in l.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=i.tables.map(u=>function(l){const c=l.name;return{name:c,schema:l,mutate:function({trans:f,type:h,keys:p,values:E,range:x}){return new Promise((v,d)=>{v=_t(v);const m=f.objectStore(c),y=m.keyPath==null,w=h==="put"||h==="add";if(!w&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:g}=p||E||{length:1};if(p&&E&&p.length!==E.length)throw new Error("Given keys array must have same length as given values array.");if(g===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let _;const C=[],S=[];let O=0;const B=M=>{++O,Vs(M)};if(h==="deleteRange"){if(x.type===4)return v({numFailures:O,failures:S,results:[],lastResult:void 0});x.type===3?C.push(_=m.clear()):C.push(_=m.delete(r(x)))}else{const[M,X]=w?y?[E,p]:[E,null]:[p,null];if(w)for(let he=0;he<g;++he)C.push(_=X&&X[he]!==void 0?m[h](M[he],X[he]):m[h](M[he])),_.onerror=B;else for(let he=0;he<g;++he)C.push(_=m[h](M[he])),_.onerror=B}const q=M=>{const X=M.target.result;C.forEach((he,oe)=>he.error!=null&&(S[oe]=he.error)),v({numFailures:O,failures:S,results:h==="delete"?p:C.map(he=>he.result),lastResult:X})};_.onerror=M=>{B(M),q(M)},_.onsuccess=q})},getMany:({trans:f,keys:h})=>new Promise((p,E)=>{p=_t(p);const x=f.objectStore(c),v=h.length,d=new Array(v);let m,y=0,w=0;const g=C=>{const S=C.target;d[S._pos]=S.result,++w===y&&p(d)},_=zn(E);for(let C=0;C<v;++C)h[C]!=null&&(m=x.get(h[C]),m._pos=C,m.onsuccess=g,m.onerror=_,++y);y===0&&p(d)}),get:({trans:f,key:h})=>new Promise((p,E)=>{p=_t(p);const x=f.objectStore(c).get(h);x.onsuccess=v=>p(v.target.result),x.onerror=zn(E)}),query:function(f){return h=>new Promise((p,E)=>{p=_t(p);const{trans:x,values:v,limit:d,query:m}=h,y=d===1/0?void 0:d,{index:w,range:g}=m,_=x.objectStore(c),C=w.isPrimaryKey?_:_.index(w.name),S=r(g);if(d===0)return p({result:[]});if(f){const O=v?C.getAll(S,y):C.getAllKeys(S,y);O.onsuccess=B=>p({result:B.target.result}),O.onerror=zn(E)}else{let O=0;const B=v||!("openKeyCursor"in C)?C.openCursor(S):C.openKeyCursor(S),q=[];B.onsuccess=M=>{const X=B.result;return X?(q.push(v?X.value:X.primaryKey),++O===d?p({result:q}):void X.continue()):p({result:q})},B.onerror=zn(E)}})}(s),openCursor:function({trans:f,values:h,query:p,reverse:E,unique:x}){return new Promise((v,d)=>{v=_t(v);const{index:m,range:y}=p,w=f.objectStore(c),g=m.isPrimaryKey?w:w.index(m.name),_=E?x?"prevunique":"prev":x?"nextunique":"next",C=h||!("openKeyCursor"in g)?g.openCursor(r(y),_):g.openKeyCursor(r(y),_);C.onerror=zn(d),C.onsuccess=_t(S=>{const O=C.result;if(!O)return void v(null);O.___id=++__,O.done=!1;const B=O.continue.bind(O);let q=O.continuePrimaryKey;q&&(q=q.bind(O));const M=O.advance.bind(O),X=()=>{throw new Error("Cursor not stopped")};O.trans=f,O.stop=O.continue=O.continuePrimaryKey=O.advance=()=>{throw new Error("Cursor not started")},O.fail=_t(d),O.next=function(){let he=1;return this.start(()=>he--?this.continue():this.stop()).then(()=>this)},O.start=he=>{const oe=new Promise((te,ie)=>{te=_t(te),C.onerror=zn(ie),O.fail=ie,O.stop=Pe=>{O.stop=O.continue=O.continuePrimaryKey=O.advance=X,te(Pe)}}),ee=()=>{if(C.result)try{he()}catch(te){O.fail(te)}else O.done=!0,O.start=()=>{throw new Error("Cursor behind last entry")},O.stop()};return C.onsuccess=_t(te=>{C.onsuccess=ee,ee()}),O.continue=B,O.continuePrimaryKey=q,O.advance=M,ee(),oe},v(O)},d)})},count({query:f,trans:h}){const{index:p,range:E}=f;return new Promise((x,v)=>{const d=h.objectStore(c),m=p.isPrimaryKey?d:d.index(p.name),y=r(E),w=y?m.count(y):m.count();w.onsuccess=_t(g=>x(g.target.result)),w.onerror=zn(v)})}}}(u)),o={};return a.forEach(u=>o[u.name]=u),{stack:"dbcore",transaction:t.transaction.bind(t),table(u){if(!o[u])throw new Error(`Table '${u}' not found`);return o[u]},MIN_KEY:-1/0,MAX_KEY:Ys(e),schema:i}}function wl({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:a,indexedDB:o},u){return{dbcore:function(c,f){return f.reduce((h,{create:p})=>({...h,...p(h)}),c)}(w_(s,a,u),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(a=>a.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function lo({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(a=>{const o=gc(a,i);(!o||"value"in o&&o.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?ir(a,i,{get(){return this.table(i)},set(u){kp(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):a[i]=new t.Table(i,s))})})}function El({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function E_(t,e){return t._cfg.version-e._cfg.version}function x_(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const a=s._reject.bind(s),o=Be.transless||Be;Pr(()=>{Be.trans=s,Be.transless=o,e===0?(Lt(i).forEach(u=>{Eu(n,u,i[u].primKey,i[u].indexes)}),wl(t,n),Te.follow(()=>t.on.populate.fire(s)).catch(a)):function({_novip:u},l,c,f){const h=[],p=u._versions;let E=u._dbSchema=Cl(u,u.idbdb,f),x=!1;const v=p.filter(m=>m._cfg.version>=l);function d(){return h.length?Te.resolve(h.shift()(c.idbtrans)).then(d):Te.resolve()}return v.forEach(m=>{h.push(()=>{const y=E,w=m._cfg.dbschema;Al(u,y,f),Al(u,w,f),E=u._dbSchema=w;const g=nm(y,w);g.add.forEach(C=>{Eu(f,C[0],C[1].primKey,C[1].indexes)}),g.change.forEach(C=>{if(C.recreate)throw new je.Upgrade("Not yet support for changing primary key");{const S=f.objectStore(C.name);C.add.forEach(O=>xl(S,O)),C.change.forEach(O=>{S.deleteIndex(O.name),xl(S,O)}),C.del.forEach(O=>S.deleteIndex(O))}});const _=m._cfg.contentUpgrade;if(_&&m._cfg.version>l){wl(u,f),c._memoizedTables={},x=!0;let C=Np(w);g.del.forEach(q=>{C[q]=y[q]}),El(u,[u.Transaction.prototype]),lo(u,[u.Transaction.prototype],Lt(C),C),c.schema=C;const S=vc(_);let O;S&&is();const B=Te.follow(()=>{if(O=_(c),O&&S){var q=ur.bind(null,null);O.then(q,q)}});return O&&typeof O.then=="function"?Te.resolve(O):B.then(()=>O)}}),h.push(y=>{(!x||!h_)&&function(w,g){[].slice.call(g.db.objectStoreNames).forEach(_=>w[_]==null&&g.db.deleteObjectStore(_))}(m._cfg.dbschema,y),El(u,[u.Transaction.prototype]),lo(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),c.schema=u._dbSchema})}),d().then(()=>{var m,y;y=f,Lt(m=E).forEach(w=>{y.db.objectStoreNames.contains(w)||Eu(y,w,m[w].primKey,m[w].indexes)})})}(t,e,s,n).catch(a)})}function nm(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Ho)a.recreate=!0,n.change.push(a);else{const o=i.idxByName,u=s.idxByName;let l;for(l in o)u[l]||a.del.push(l);for(l in u){const c=o[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,s])}return n}function Eu(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>xl(i,s)),i}function xl(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Cl(t,e,n){const r={};return ro(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let a=s.keyPath;const o=bl(em(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),u=[];for(let c=0;c<s.indexNames.length;++c){const f=s.index(s.indexNames[c]);a=f.keyPath;var l=bl(f.name,a,!!f.unique,!!f.multiEntry,!1,a&&typeof a!="string",!1);u.push(l)}r[i]=tm(i,o,u)}),r}function Al({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(let o=0;o<a.indexNames.length;++o){const u=a.indexNames[o],l=a.index(u).keyPath,c=typeof l=="string"?l:"["+ro(l).join("+")+"]";if(e[s]){const f=e[s].idxByName[c];f&&(f.name=u,delete e[s].idxByName[c],e[s].idxByName[u]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&vt.WorkerGlobalScope&&vt instanceof vt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class C_{_parseStoresSpec(e,n){Lt(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((a,o)=>{const u=(a=a.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return bl(u,l||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),Qt(l),o===0)}),s=i.shift();if(s.multi)throw new je.Schema("Primary key cannot be multi-valued");i.forEach(a=>{if(a.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),n[r]=tm(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?sn(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(a=>{sn(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,El(n,[n._allTables,n,n.Transaction.prototype]),lo(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Lt(s),s),n._storeNames=Lt(s),this}upgrade(e){return this._cfg.contentUpgrade=_c(this._cfg.contentUpgrade||ft,e),this}}function Cc(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ii(Vo,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ac(t){return t&&typeof t.databases=="function"}function Dl(t){return Pr(function(){return Be.letThrough=!0,t()})}function A_(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function D_(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?zt(e.dbOpenError):t);Kn&&(e.openCanceller._stackHolder=di()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new je.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,a=null,o=!1;return Te.race([r,(typeof navigator>"u"?Te.resolve():A_()).then(()=>new Te((u,l)=>{if(i(),!n)throw new je.MissingAPI;const c=t.name,f=e.autoSchema?n.open(c):n.open(c,Math.round(10*t.verno));if(!f)throw new je.MissingAPI;f.onerror=zn(l),f.onblocked=_t(t._fireOnBlocked),f.onupgradeneeded=_t(h=>{if(a=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=Vs,a.abort(),f.result.close();const E=n.deleteDatabase(c);E.onsuccess=E.onerror=_t(()=>{l(new je.NoSuchDatabase(`Database ${c} doesnt exist`))})}else{a.onerror=zn(l);var p=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;o=p<1,t._novip.idbdb=f.result,x_(t,p/10,a,l)}},l),f.onsuccess=_t(()=>{a=null;const h=t._novip.idbdb=f.result,p=ro(h.objectStoreNames);if(p.length>0)try{const x=h.transaction((E=p).length===1?E[0]:E,"readonly");e.autoSchema?function({_novip:v},d,m){v.verno=d.version/10;const y=v._dbSchema=Cl(0,d,m);v._storeNames=ro(d.objectStoreNames,0),lo(v,[v._allTables],Lt(y),y)}(t,h,x):(Al(t,t._dbSchema,x),function(v,d){const m=nm(Cl(0,v.idbdb,d),v._dbSchema);return!(m.add.length||m.change.some(y=>y.add.length||y.change.length))}(t,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wl(t,x)}catch{}var E;Rs.push(t),h.onversionchange=_t(x=>{e.vcFired=!0,t.on("versionchange").fire(x)}),h.onclose=_t(x=>{t.on("close").fire(x)}),o&&function({indexedDB:x,IDBKeyRange:v},d){!Ac(x)&&d!==Vo&&Cc(x,v).put({name:d}).catch(ft)}(t._deps,c),u()},l)}))]).then(()=>(i(),e.onReadyBeingFired=[],Te.resolve(Dl(()=>t.on.ready.fire(t.vip))).then(function u(){if(e.onReadyBeingFired.length>0){let l=e.onReadyBeingFired.reduce(_c,ft);return e.onReadyBeingFired=[],Te.resolve(Dl(()=>l(t.vip))).then(u)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(u=>{e.dbOpenError=u;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),zt(u)}).finally(()=>{e.openComplete=!0,s()})}function Sl(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return a=>{var o=s(a),u=o.value;return o.done?u:u&&typeof u.then=="function"?u.then(n,r):Qt(u)?Promise.all(u).then(n,r):n(u)}}return i(e)()}function S_(t,e,n){var r=arguments.length;if(r<2)throw new je.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,Bp(i),n]}function rm(t,e,n,r,i){return Te.resolve().then(()=>{const s=Be.transless||Be,a=t._createTransaction(e,n,t._dbSchema,r),o={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===bc.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>rm(t,e,n,null,i))):zt(f)}const u=vc(i);let l;u&&is();const c=Te.follow(()=>{if(l=i.call(a,a),l)if(u){var f=ur.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Sl(l))},o);return(l&&typeof l.then=="function"?Te.resolve(l).then(f=>a.active?f:zt(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>l)).then(f=>(r&&a._resolve(),a._completion.then(()=>f))).catch(f=>(a._reject(f),zt(f)))})}function Ta(t,e,n){const r=Qt(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const T_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function a(c,f,h){const p=Ns(c),E=i[p]=i[p]||[],x=c==null?0:typeof c=="string"?1:c.length,v=f>0,d={...h,isVirtual:v,keyTail:f,keyLength:x,extractKey:_l(c),unique:!v&&h.unique};return E.push(d),d.isPrimaryKey||s.push(d),x>1&&a(x===2?c[0]:c.slice(0,x-1),f+1,h),E.sort((m,y)=>m.keyTail-y.keyTail),d}const o=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(const c of r.indexes)a(c.keyPath,0,c);function u(c){const f=c.query.index;return f.isVirtual?{...c,query:{index:f,range:(h=c.query.range,p=f.keyTail,{type:h.type===1?2:h.type,lower:Ta(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,p),lowerOpen:!0,upper:Ta(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,p),upperOpen:!0})}}:c;var h,p}return{...n,schema:{...r,primaryKey:o,indexes:s,getIndexByKeyPath:function(c){const f=i[Ns(c)];return f&&f[0]}},count:c=>n.count(u(c)),query:c=>n.query(u(c)),openCursor(c){const{keyTail:f,isVirtual:h,keyLength:p}=c.query.index;return h?n.openCursor(u(c)).then(E=>E&&function(x){return Object.create(x,{continue:{value:function(d){d!=null?x.continue(Ta(d,c.reverse?t.MAX_KEY:t.MIN_KEY,f)):c.unique?x.continue(x.key.slice(0,p).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,f)):x.continue()}},continuePrimaryKey:{value(d,m){x.continuePrimaryKey(Ta(d,t.MAX_KEY,f),m)}},primaryKey:{get:()=>x.primaryKey},key:{get(){const d=x.key;return p===1?d[0]:d.slice(0,p)}},value:{get:()=>x.value}})}(E)):n.openCursor(c)}}}}}};function Dc(t,e,n,r){return n=n||{},r=r||"",Lt(t).forEach(i=>{if(vn(e,i)){var s=t[i],a=e[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){const o=al(s);o!==al(a)?n[r+i]=e[i]:o==="Object"?Dc(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else s!==a&&(n[r+i]=e[i])}else n[r+i]=void 0}),Lt(e).forEach(i=>{vn(t,i)||(n[r+i]=e[i])}),n}const k_={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const a=Be.trans,{deleting:o,creating:u,updating:l}=a.table(e).hook;switch(s.type){case"add":if(u.fire===ft)break;return a._promise("readwrite",()=>c(s),!0);case"put":if(u.fire===ft&&l.fire===ft)break;return a._promise("readwrite",()=>c(s),!0);case"delete":if(o.fire===ft)break;return a._promise("readwrite",()=>c(s),!0);case"deleteRange":if(o.fire===ft)break;return a._promise("readwrite",()=>function(h){return f(h.trans,h.range,1e4)}(s),!0)}return n.mutate(s);function c(h){const p=Be.trans,E=h.keys||function(x,v){return v.type==="delete"?v.keys:v.keys||v.values.map(x.extractKey)}(r,h);if(!E)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:E}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(x,v,d){return v.type==="add"?Promise.resolve([]):x.getMany({trans:v.trans,keys:d,cache:"immutable"})}(n,h,E).then(x=>{const v=E.map((d,m)=>{const y=x[m],w={onerror:null,onsuccess:null};if(h.type==="delete")o.fire.call(w,d,y,p);else if(h.type==="add"||y===void 0){const g=u.fire.call(w,d,h.values[m],p);d==null&&g!=null&&(d=g,h.keys[m]=d,r.outbound||Pn(h.values[m],r.keyPath,d))}else{const g=Dc(y,h.values[m]),_=l.fire.call(w,g,d,y,p);if(_){const C=h.values[m];Object.keys(_).forEach(S=>{vn(C,S)?C[S]=_[S]:Pn(C,S,_[S])})}}return w});return n.mutate(h).then(({failures:d,results:m,numFailures:y,lastResult:w})=>{for(let g=0;g<E.length;++g){const _=m?m[g]:E[g],C=v[g];_==null?C.onerror&&C.onerror(d[g]):C.onsuccess&&C.onsuccess(h.type==="put"&&x[g]?h.values[g]:_)}return{failures:d,results:m,numFailures:y,lastResult:w}}).catch(d=>(v.forEach(m=>m.onerror&&m.onerror(d)),Promise.reject(d)))})}function f(h,p,E){return n.query({trans:h,values:!1,query:{index:r,range:p},limit:E}).then(({result:x})=>c({type:"delete",keys:x,trans:h}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):x.length<E?{failures:[],numFailures:0,lastResult:void 0}:f(h,{...p,lower:x[x.length-1],lowerOpen:!0},E)))}}}}})};function im(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)nn(e.keys[i],t[s])===0&&(r.push(n?ia(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const O_={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=im(r.keys,r.trans._cache,r.cache==="clone");return i?Te.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?ia(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Sc(t){return!("from"in t)}const Jn=function(t,e){if(!this){const n=new Jn;return t&&"d"in t&&sn(n,t),n}sn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Gs(t,e,n){const r=nn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Sc(t))return sn(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(nn(n,t.from)<0)return i?Gs(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},gh(t);if(nn(e,t.to)>0)return s?Gs(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},gh(t);nn(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),nn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;i&&!t.l&&co(t,i),s&&a&&co(t,s)}function co(t,e){Sc(e)||function n(r,{from:i,to:s,l:a,r:o}){Gs(r,i,s),a&&n(r,a),o&&n(r,o)}(t,e)}function R_(t,e){const n=Tl(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=Tl(t);let a=s.next(i.from),o=a.value;for(;!r.done&&!a.done;){if(nn(o.from,i.to)<=0&&nn(o.to,i.from)>=0)return!0;nn(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function Tl(t){let e=Sc(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&nn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||nn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function gh(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",a={...t},o=t[i];t.from=o.from,t.to=o.to,t[i]=o[i],a[i]=o[s],t[s]=a,a.d=vh(a)}t.d=vh(t)}function vh({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Yi(Jn.prototype,{add(t){return co(this,t),this},addKey(t){return Gs(this,t,t),this},addKeys(t){return t.forEach(e=>Gs(this,e,e)),this},[ol](){return Tl(this)}});const I_={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Jn(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:a}=s,{extractKey:o,outbound:u}=a,l={...i,mutate:h=>{const p=h.trans,E=p.mutatedParts||(p.mutatedParts={}),x=_=>{const C=`idb://${e}/${r}/${_}`;return E[C]||(E[C]=new Jn)},v=x(""),d=x(":dels"),{type:m}=h;let[y,w]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const g=h.trans._cache;return i.mutate(h).then(_=>{if(Qt(y)){m!=="delete"&&(y=_.results),v.addKeys(y);const C=im(y,g);C||m==="add"||d.addKeys(y),(C||w)&&function(S,O,B,q){function M(X){const he=S(X.name||"");function oe(te){return te!=null?X.extractKey(te):null}const ee=te=>X.multiEntry&&Qt(te)?te.forEach(ie=>he.addKey(ie)):he.addKey(te);(B||q).forEach((te,ie)=>{const Pe=B&&oe(B[ie]),Ke=q&&oe(q[ie]);nn(Pe,Ke)!==0&&(Pe!=null&&ee(Pe),Ke!=null&&ee(Ke))})}O.indexes.forEach(M)}(x,s,C,w)}else if(y){const C={from:y.lower,to:y.upper};d.add(C),v.add(C)}else v.add(n),d.add(n),s.indexes.forEach(C=>x(C.name).add(n));return _})}},c=({query:{index:h,range:p}})=>{var E,x;return[h,new Jn((E=p.lower)!==null&&E!==void 0?E:t.MIN_KEY,(x=p.upper)!==null&&x!==void 0?x:t.MAX_KEY)]},f={get:h=>[a,new Jn(h.key)],getMany:h=>[a,new Jn().addKeys(h.keys)],count:c,query:c,openCursor:c};return Lt(f).forEach(h=>{l[h]=function(p){const{subscr:E}=Be;if(E){const x=w=>{const g=`idb://${e}/${r}/${w}`;return E[g]||(E[g]=new Jn)},v=x(""),d=x(":dels"),[m,y]=f[h](p);if(x(m.name||"").add(y),!m.isPrimaryKey){if(h!=="count"){const w=h==="query"&&u&&p.values&&i.query({...p,values:!1});return i[h].apply(this,arguments).then(g=>{if(h==="query"){if(u&&p.values)return w.then(({result:C})=>(v.addKeys(C),g));const _=p.values?g.result.map(o):g.result;p.values?v.addKeys(_):d.addKeys(_)}else if(h==="openCursor"){const _=g,C=p.values;return _&&Object.create(_,{key:{get:()=>(d.addKey(_.primaryKey),_.key)},primaryKey:{get(){const S=_.primaryKey;return d.addKey(S),S}},value:{get:()=>(C&&v.addKey(_.primaryKey),_.value)}})}return g})}d.add(n)}}return i[h].apply(this,arguments)}}),l}}}};class ii{constructor(e,n){this._middlewares={},this.verno=0;const r=ii.dependencies;this._options=n={addons:ii.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ft,dbReadyPromise:null,cancelOpen:ft,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;s.dbReadyPromise=new Te(o=>{s.dbReadyResolve=o}),s.openCanceller=new Te((o,u)=>{s.cancelOpen=u}),this._state=s,this.name=e,this.on=Is(this,"populate","blocked","versionchange","close",{ready:[_c,ft]}),this.on.ready.subscribe=Op(this.on.ready.subscribe,o=>(u,l)=>{ii.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||Te.resolve().then(u),l&&o(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&o(u);else{o(u);const f=this;l||o(function h(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(h)})}})}),this.Collection=(a=this,cs(m_.prototype,function(o,u){this.db=a;let l=Xp,c=null;if(u)try{l=u()}catch(E){c=E}const f=o._ctx,h=f.table,p=h.hook.reading.fire;this._ctx={table:h,index:f.index,isPrimKey:!f.index||h.schema.primKey.keyPath&&f.index===h.schema.primKey.name,range:l,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:f.or,valueMapper:p!==$s?p:null}})),this.Table=function(o){return cs(p_.prototype,function(u,l,c){this.db=o,this._tx=c,this.name=u,this.schema=l,this.hook=o._allTables[u]?o._allTables[u].hook:Is(null,{creating:[n_,ft],reading:[t_,$s],updating:[i_,ft],deleting:[r_,ft]})})}(this),this.Transaction=function(o){return cs(b_.prototype,function(u,l,c,f,h){this.db=o,this.mode=u,this.storeNames=l,this.schema=c,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Is(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te((p,E)=>{this._resolve=p,this._reject=E}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},p=>{var E=this.active;return this.active=!1,this.on.error.fire(p),this.parent?this.parent._reject(p):E&&this.idbtrans&&this.idbtrans.abort(),zt(p)})})}(this),this.Version=function(o){return cs(C_.prototype,function(u){this.db=o,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(o){return cs(Jp.prototype,function(u,l,c){this.db=o,this._ctx={table:u,index:l===":id"?null:l,or:c};const f=o._deps.indexedDB;if(!f)throw new je.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(h,p)=>f.cmp(p,h),this._max=(h,p)=>f.cmp(h,p)>0?h:p,this._min=(h,p)=>f.cmp(h,p)<0?h:p,this._IDBKeyRange=o._deps.IDBKeyRange})}(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=Ys(n.IDBKeyRange),this._createTransaction=(o,u,l,c)=>new this.Transaction(o,u,l,this._options.chromeTransactionDurability,c),this._fireOnBlocked=o=>{this.on("blocked").fire(o),Rs.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(o))},this.use(T_),this.use(k_),this.use(I_),this.use(O_),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(o=>o(this))}version(e){if(isNaN(e)||e<.1)throw new je.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(E_),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?e():new Te((n,r)=>{if(this._state.openComplete)return r(new je.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new je.DatabaseClosed);this.open().catch(ft)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((a,o)=>a.level-o.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return D_(this)}_close(){const e=this._state,n=Rs.indexOf(this);if(n>=0&&Rs.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Te(r=>{e.dbReadyResolve=r}),e.openCanceller=new Te((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new Te((r,i)=>{const s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=_t(()=>{(function({indexedDB:o,IDBKeyRange:u},l){!Ac(o)&&l!==Vo&&Cc(o,u).delete(l).catch(ft)})(this._deps,this.name),r()}),a.onerror=zn(i),a.onblocked=this._fireOnBlocked};if(e)throw new je.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Lt(this._allTables).map(e=>this._allTables[e])}transaction(){const e=S_.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=Be.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let a,o;e=e.replace("!","").replace("?","");try{if(o=n.map(l=>{var c=l instanceof this.Table?l.name:l;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===vu)a=vu;else{if(e!="rw"&&e!=yu)throw new je.InvalidArgument("Invalid transaction mode: "+e);a=yu}if(i){if(i.mode===vu&&a===yu){if(!s)throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach(l=>{if(i&&i.storeNames.indexOf(l)===-1){if(!s)throw new je.SubTransaction("Table "+l+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(l){return i?i._promise(null,(c,f)=>{f(l)}):zt(l)}const u=rm.bind(null,this,a,o,i,r);return i?i._promise(a,u,"lock"):Be.trans?ss(Be.transless,()=>this._whenReady(u)):this._whenReady(u)}table(e){if(!vn(this._allTables,e))throw new je.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const N_=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class B_{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[N_](){return this}}function sm(t,e){return Lt(e).forEach(n=>{co(t[n]||(t[n]=new Jn),e[n])}),t}function P_(t){let e,n=!1;const r=new B_(i=>{const s=vc(t);let a=!1,o={},u={};const l={get closed(){return a},unsubscribe:()=>{a=!0,Fr.storagemutated.unsubscribe(p)}};i.start&&i.start(l);let c=!1,f=!1;function h(){return Lt(u).some(x=>o[x]&&R_(o[x],u[x]))}const p=x=>{sm(o,x),h()&&E()},E=()=>{if(c||a)return;o={};const x={},v=function(d){s&&is();const m=()=>Pr(t,{subscr:d,trans:null}),y=Be.trans?ss(Be.transless,m):m();return s&&y.then(ur,ur),y}(x);f||(Fr(Ks,p),f=!0),c=!0,Promise.resolve(v).then(d=>{n=!0,e=d,c=!1,a||(h()?E():(o={},u=x,i.next&&i.next(d)))},d=>{c=!1,n=!1,i.error&&i.error(d),l.unsubscribe()})};return E(),l});return r.hasValue=()=>n,r.getValue=()=>e,r}let kl;try{kl={indexedDB:vt.indexedDB||vt.mozIndexedDB||vt.webkitIndexedDB||vt.msIndexedDB,IDBKeyRange:vt.IDBKeyRange||vt.webkitIDBKeyRange}}catch{kl={indexedDB:null,IDBKeyRange:null}}const Hr=ii;function qa(t){let e=tr;try{tr=!0,Fr.storagemutated.fire(t)}finally{tr=e}}Yi(Hr,{...Fa,delete:t=>new Hr(t,{addons:[]}).delete(),exists:t=>new Hr(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Ac(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Vo)):Cc(e,n).toCollection().primaryKeys()}(Hr.dependencies).then(t)}catch{return zt(new je.MissingAPI)}},defineClass:()=>function(t){sn(this,t)},ignoreTransaction:t=>Be.trans?ss(Be.transless,t):t(),vip:Dl,async:function(t){return function(){try{var e=Sl(t.apply(this,arguments));return e&&typeof e.then=="function"?e:Te.resolve(e)}catch(n){return zt(n)}}},spawn:function(t,e,n){try{var r=Sl(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:Te.resolve(r)}catch(i){return zt(i)}},currentTransaction:{get:()=>Be.trans||null},waitFor:function(t,e){const n=Te.resolve(typeof t=="function"?Hr.ignoreTransaction(t):t).timeout(e||6e4);return Be.trans?Be.trans.waitFor(n):n},Promise:Te,debug:{get:()=>Kn,set:t=>{Lp(t,t==="dexie"?()=>!0:Zp)}},derive:zi,extend:sn,props:Yi,override:Op,Events:Is,on:Fr,liveQuery:P_,extendObservabilitySet:sm,getByKeyPath:sr,setByKeyPath:Pn,delByKeyPath:function(t,e){typeof e=="string"?Pn(t,e,void 0):"length"in e&&[].map.call(e,function(n){Pn(t,n,void 0)})},shallowClone:Np,deepClone:ia,getObjectDiff:Dc,cmp:nn,asap:Rp,minKey:yl,addons:[],connections:Rs,errnames:bc,dependencies:kl,semVer:ch,version:ch.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Hr.maxKey=Ys(Hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fr(Ks,t=>{if(!tr){let e;Ho?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Tr,!0,!0,t)):e=new CustomEvent(Tr,{detail:t}),tr=!0,dispatchEvent(e),tr=!1}}),addEventListener(Tr,({detail:t})=>{tr||qa(t)}));let tr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Tr);typeof t.unref=="function"&&t.unref(),Fr(Ks,e=>{tr||t.postMessage(e)}),t.onmessage=e=>{e.data&&qa(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Fr(Ks,e=>{try{tr||(typeof localStorage<"u"&&localStorage.setItem(Tr,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Tr,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Tr){const n=JSON.parse(e.newValue);n&&qa(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Tr&&qa(e.changedParts)})}Te.rejectionMapper=function(t,e){if(!t||t instanceof ji||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ah[t.name])return t;var n=new ah[t.name](e||t.message,t);return"stack"in t&&ir(n,"stack",{get:function(){return this.inner.stack}}),n},Lp(Kn,Zp);class L_ extends ii{constructor(){super("OfaReaderDB");ma(this,"bookIntro");ma(this,"bookFile");ma(this,"metadata");this.version(1).stores({bookIntro:"&uid, md5",bookFile:"&uid",metadata:"&uid"})}}const Tc=new L_;let ka;const F_=new Uint8Array(16);function M_(){if(!ka&&(ka=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ka))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ka(F_)}const Ht=[];for(let t=0;t<256;++t)Ht.push((t+256).toString(16).slice(1));function U_(t,e=0){return Ht[t[e+0]]+Ht[t[e+1]]+Ht[t[e+2]]+Ht[t[e+3]]+"-"+Ht[t[e+4]]+Ht[t[e+5]]+"-"+Ht[t[e+6]]+Ht[t[e+7]]+"-"+Ht[t[e+8]]+Ht[t[e+9]]+"-"+Ht[t[e+10]]+Ht[t[e+11]]+Ht[t[e+12]]+Ht[t[e+13]]+Ht[t[e+14]]+Ht[t[e+15]]}const z_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yh={randomUUID:z_};function j_(t,e,n){if(yh.randomUUID&&!e&&!t)return yh.randomUUID();t=t||{};const r=t.random||(t.rng||M_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return U_(r)}const xu=t=>t||"-",W_=()=>j_(),{bookIntro:Cu}=Tc,$a={get:async()=>await Cu.toArray(),getByUid:async t=>await Cu.get(t),add:async t=>{const e=W_();return await Cu.add({uid:e,...t}),e}},{bookFile:bh}=Tc,kc={get:async t=>await bh.get(t),add:async t=>await bh.add(t)},{metadata:_h}=Tc,am={get:async t=>await _h.get(t),add:async t=>await _h.add(t)};var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var om={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(d,m){var y=d[0],w=d[1],g=d[2],_=d[3];y+=(w&g|~w&_)+m[0]-680876936|0,y=(y<<7|y>>>25)+w|0,_+=(y&w|~y&g)+m[1]-389564586|0,_=(_<<12|_>>>20)+y|0,g+=(_&y|~_&w)+m[2]+606105819|0,g=(g<<17|g>>>15)+_|0,w+=(g&_|~g&y)+m[3]-1044525330|0,w=(w<<22|w>>>10)+g|0,y+=(w&g|~w&_)+m[4]-176418897|0,y=(y<<7|y>>>25)+w|0,_+=(y&w|~y&g)+m[5]+1200080426|0,_=(_<<12|_>>>20)+y|0,g+=(_&y|~_&w)+m[6]-1473231341|0,g=(g<<17|g>>>15)+_|0,w+=(g&_|~g&y)+m[7]-45705983|0,w=(w<<22|w>>>10)+g|0,y+=(w&g|~w&_)+m[8]+1770035416|0,y=(y<<7|y>>>25)+w|0,_+=(y&w|~y&g)+m[9]-1958414417|0,_=(_<<12|_>>>20)+y|0,g+=(_&y|~_&w)+m[10]-42063|0,g=(g<<17|g>>>15)+_|0,w+=(g&_|~g&y)+m[11]-1990404162|0,w=(w<<22|w>>>10)+g|0,y+=(w&g|~w&_)+m[12]+1804603682|0,y=(y<<7|y>>>25)+w|0,_+=(y&w|~y&g)+m[13]-40341101|0,_=(_<<12|_>>>20)+y|0,g+=(_&y|~_&w)+m[14]-1502002290|0,g=(g<<17|g>>>15)+_|0,w+=(g&_|~g&y)+m[15]+1236535329|0,w=(w<<22|w>>>10)+g|0,y+=(w&_|g&~_)+m[1]-165796510|0,y=(y<<5|y>>>27)+w|0,_+=(y&g|w&~g)+m[6]-1069501632|0,_=(_<<9|_>>>23)+y|0,g+=(_&w|y&~w)+m[11]+643717713|0,g=(g<<14|g>>>18)+_|0,w+=(g&y|_&~y)+m[0]-373897302|0,w=(w<<20|w>>>12)+g|0,y+=(w&_|g&~_)+m[5]-701558691|0,y=(y<<5|y>>>27)+w|0,_+=(y&g|w&~g)+m[10]+38016083|0,_=(_<<9|_>>>23)+y|0,g+=(_&w|y&~w)+m[15]-660478335|0,g=(g<<14|g>>>18)+_|0,w+=(g&y|_&~y)+m[4]-405537848|0,w=(w<<20|w>>>12)+g|0,y+=(w&_|g&~_)+m[9]+568446438|0,y=(y<<5|y>>>27)+w|0,_+=(y&g|w&~g)+m[14]-1019803690|0,_=(_<<9|_>>>23)+y|0,g+=(_&w|y&~w)+m[3]-187363961|0,g=(g<<14|g>>>18)+_|0,w+=(g&y|_&~y)+m[8]+1163531501|0,w=(w<<20|w>>>12)+g|0,y+=(w&_|g&~_)+m[13]-1444681467|0,y=(y<<5|y>>>27)+w|0,_+=(y&g|w&~g)+m[2]-51403784|0,_=(_<<9|_>>>23)+y|0,g+=(_&w|y&~w)+m[7]+1735328473|0,g=(g<<14|g>>>18)+_|0,w+=(g&y|_&~y)+m[12]-1926607734|0,w=(w<<20|w>>>12)+g|0,y+=(w^g^_)+m[5]-378558|0,y=(y<<4|y>>>28)+w|0,_+=(y^w^g)+m[8]-2022574463|0,_=(_<<11|_>>>21)+y|0,g+=(_^y^w)+m[11]+1839030562|0,g=(g<<16|g>>>16)+_|0,w+=(g^_^y)+m[14]-35309556|0,w=(w<<23|w>>>9)+g|0,y+=(w^g^_)+m[1]-1530992060|0,y=(y<<4|y>>>28)+w|0,_+=(y^w^g)+m[4]+1272893353|0,_=(_<<11|_>>>21)+y|0,g+=(_^y^w)+m[7]-155497632|0,g=(g<<16|g>>>16)+_|0,w+=(g^_^y)+m[10]-1094730640|0,w=(w<<23|w>>>9)+g|0,y+=(w^g^_)+m[13]+681279174|0,y=(y<<4|y>>>28)+w|0,_+=(y^w^g)+m[0]-358537222|0,_=(_<<11|_>>>21)+y|0,g+=(_^y^w)+m[3]-722521979|0,g=(g<<16|g>>>16)+_|0,w+=(g^_^y)+m[6]+76029189|0,w=(w<<23|w>>>9)+g|0,y+=(w^g^_)+m[9]-640364487|0,y=(y<<4|y>>>28)+w|0,_+=(y^w^g)+m[12]-421815835|0,_=(_<<11|_>>>21)+y|0,g+=(_^y^w)+m[15]+530742520|0,g=(g<<16|g>>>16)+_|0,w+=(g^_^y)+m[2]-995338651|0,w=(w<<23|w>>>9)+g|0,y+=(g^(w|~_))+m[0]-198630844|0,y=(y<<6|y>>>26)+w|0,_+=(w^(y|~g))+m[7]+1126891415|0,_=(_<<10|_>>>22)+y|0,g+=(y^(_|~w))+m[14]-1416354905|0,g=(g<<15|g>>>17)+_|0,w+=(_^(g|~y))+m[5]-57434055|0,w=(w<<21|w>>>11)+g|0,y+=(g^(w|~_))+m[12]+1700485571|0,y=(y<<6|y>>>26)+w|0,_+=(w^(y|~g))+m[3]-1894986606|0,_=(_<<10|_>>>22)+y|0,g+=(y^(_|~w))+m[10]-1051523|0,g=(g<<15|g>>>17)+_|0,w+=(_^(g|~y))+m[1]-2054922799|0,w=(w<<21|w>>>11)+g|0,y+=(g^(w|~_))+m[8]+1873313359|0,y=(y<<6|y>>>26)+w|0,_+=(w^(y|~g))+m[15]-30611744|0,_=(_<<10|_>>>22)+y|0,g+=(y^(_|~w))+m[6]-1560198380|0,g=(g<<15|g>>>17)+_|0,w+=(_^(g|~y))+m[13]+1309151649|0,w=(w<<21|w>>>11)+g|0,y+=(g^(w|~_))+m[4]-145523070|0,y=(y<<6|y>>>26)+w|0,_+=(w^(y|~g))+m[11]-1120210379|0,_=(_<<10|_>>>22)+y|0,g+=(y^(_|~w))+m[2]+718787259|0,g=(g<<15|g>>>17)+_|0,w+=(_^(g|~y))+m[9]-343485551|0,w=(w<<21|w>>>11)+g|0,d[0]=y+d[0]|0,d[1]=w+d[1]|0,d[2]=g+d[2]|0,d[3]=_+d[3]|0}function s(d){var m=[],y;for(y=0;y<64;y+=4)m[y>>2]=d.charCodeAt(y)+(d.charCodeAt(y+1)<<8)+(d.charCodeAt(y+2)<<16)+(d.charCodeAt(y+3)<<24);return m}function a(d){var m=[],y;for(y=0;y<64;y+=4)m[y>>2]=d[y]+(d[y+1]<<8)+(d[y+2]<<16)+(d[y+3]<<24);return m}function o(d){var m=d.length,y=[1732584193,-271733879,-1732584194,271733878],w,g,_,C,S,O;for(w=64;w<=m;w+=64)i(y,s(d.substring(w-64,w)));for(d=d.substring(w-64),g=d.length,_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<g;w+=1)_[w>>2]|=d.charCodeAt(w)<<(w%4<<3);if(_[w>>2]|=128<<(w%4<<3),w>55)for(i(y,_),w=0;w<16;w+=1)_[w]=0;return C=m*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(C[2],16),O=parseInt(C[1],16)||0,_[14]=S,_[15]=O,i(y,_),y}function u(d){var m=d.length,y=[1732584193,-271733879,-1732584194,271733878],w,g,_,C,S,O;for(w=64;w<=m;w+=64)i(y,a(d.subarray(w-64,w)));for(d=w-64<m?d.subarray(w-64):new Uint8Array(0),g=d.length,_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<g;w+=1)_[w>>2]|=d[w]<<(w%4<<3);if(_[w>>2]|=128<<(w%4<<3),w>55)for(i(y,_),w=0;w<16;w+=1)_[w]=0;return C=m*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(C[2],16),O=parseInt(C[1],16)||0,_[14]=S,_[15]=O,i(y,_),y}function l(d){var m="",y;for(y=0;y<4;y+=1)m+=r[d>>y*8+4&15]+r[d>>y*8&15];return m}function c(d){var m;for(m=0;m<d.length;m+=1)d[m]=l(d[m]);return d.join("")}c(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function d(m,y){return m=m|0||0,m<0?Math.max(m+y,0):Math.min(m,y)}ArrayBuffer.prototype.slice=function(m,y){var w=this.byteLength,g=d(m,w),_=w,C,S,O,B;return y!==n&&(_=d(y,w)),g>_?new ArrayBuffer(0):(C=_-g,S=new ArrayBuffer(C),O=new Uint8Array(S),B=new Uint8Array(this,g,C),O.set(B),S)}}();function f(d){return/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),d}function h(d,m){var y=d.length,w=new ArrayBuffer(y),g=new Uint8Array(w),_;for(_=0;_<y;_+=1)g[_]=d.charCodeAt(_);return m?g:w}function p(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function E(d,m,y){var w=new Uint8Array(d.byteLength+m.byteLength);return w.set(new Uint8Array(d)),w.set(new Uint8Array(m),d.byteLength),y?w:w.buffer}function x(d){var m=[],y=d.length,w;for(w=0;w<y-1;w+=2)m.push(parseInt(d.substr(w,2),16));return String.fromCharCode.apply(String,m)}function v(){this.reset()}return v.prototype.append=function(d){return this.appendBinary(f(d)),this},v.prototype.appendBinary=function(d){this._buff+=d,this._length+=d.length;var m=this._buff.length,y;for(y=64;y<=m;y+=64)i(this._hash,s(this._buff.substring(y-64,y)));return this._buff=this._buff.substring(y-64),this},v.prototype.end=function(d){var m=this._buff,y=m.length,w,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_;for(w=0;w<y;w+=1)g[w>>2]|=m.charCodeAt(w)<<(w%4<<3);return this._finish(g,y),_=c(this._hash),d&&(_=x(_)),this.reset(),_},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},v.prototype.setState=function(d){return this._buff=d.buff,this._length=d.length,this._hash=d.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(d,m){var y=m,w,g,_;if(d[y>>2]|=128<<(y%4<<3),y>55)for(i(this._hash,d),y=0;y<16;y+=1)d[y]=0;w=this._length*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),g=parseInt(w[2],16),_=parseInt(w[1],16)||0,d[14]=g,d[15]=_,i(this._hash,d)},v.hash=function(d,m){return v.hashBinary(f(d),m)},v.hashBinary=function(d,m){var y=o(d),w=c(y);return m?x(w):w},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(d){var m=E(this._buff.buffer,d,!0),y=m.length,w;for(this._length+=d.byteLength,w=64;w<=y;w+=64)i(this._hash,a(m.subarray(w-64,w)));return this._buff=w-64<y?new Uint8Array(m.buffer.slice(w-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(d){var m=this._buff,y=m.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g,_;for(g=0;g<y;g+=1)w[g>>2]|=m[g]<<(g%4<<3);return this._finish(w,y),_=c(this._hash),d&&(_=x(_)),this.reset(),_},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var d=v.prototype.getState.call(this);return d.buff=p(d.buff),d},v.ArrayBuffer.prototype.setState=function(d){return d.buff=h(d.buff,!0),v.prototype.setState.call(this,d)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(d,m){var y=u(new Uint8Array(d)),w=c(y);return m?x(w):w},v})})(om);var q_=om.exports;const $_=pi(q_),H_=t=>new $_.ArrayBuffer().append(t).end(),wh="application/epub+zip";var Ol={exports:{}},um={exports:{}},V_=void 0,lm=function(t){return t!==V_&&t!==null},K_=lm,Y_={object:!0,function:!0,undefined:!0},G_=function(t){return K_(t)?hasOwnProperty.call(Y_,typeof t):!1},Z_=G_,X_=function(t){if(!Z_(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},Q_=X_,J_=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!Q_(t)},ew=J_,tw=/^\s*class[\s{/}]/,nw=Function.prototype.toString,rw=function(t){return!(!ew(t)||tw.test(nw.call(t)))},iw=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},Au,Eh;function sw(){return Eh||(Eh=1,Au=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Au}var aw=function(){},ow=aw(),Oc=function(t){return t!==ow&&t!==null},Du,xh;function uw(){if(xh)return Du;xh=1;var t=Oc,e=Object.keys;return Du=function(n){return e(t(n)?Object(n):n)},Du}var Su,Ch;function lw(){return Ch||(Ch=1,Su=sw()()?Object.keys:uw()),Su}var Tu,Ah;function cw(){if(Ah)return Tu;Ah=1;var t=Oc;return Tu=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},Tu}var ku,Dh;function fw(){if(Dh)return ku;Dh=1;var t=lw(),e=cw(),n=Math.max;return ku=function(r,i){var s,a,o=n(arguments.length,2),u;for(r=Object(e(r)),u=function(l){try{r[l]=i[l]}catch(c){s||(s=c)}},a=1;a<o;++a)i=arguments[a],t(i).forEach(u);if(s!==void 0)throw s;return r},ku}var hw=iw()?Object.assign:fw(),dw=Oc,pw=Array.prototype.forEach,mw=Object.create,gw=function(t,e){var n;for(n in t)e[n]=t[n]},vw=function(t){var e=mw(null);return pw.call(arguments,function(n){dw(n)&&gw(Object(n),e)}),e},Ou="razdwatrzy",yw=function(){return typeof Ou.contains!="function"?!1:Ou.contains("dwa")===!0&&Ou.contains("foo")===!1},Ru,Sh;function bw(){if(Sh)return Ru;Sh=1;var t=String.prototype.indexOf;return Ru=function(e){return t.call(this,e,arguments[1])>-1},Ru}var _w=yw()?String.prototype.contains:bw(),Ha=lm,Th=rw,cm=hw,fm=vw,Bs=_w,ww=um.exports=function(t,e){var n,r,i,s,a;return arguments.length<2||typeof t!="string"?(s=e,e=t,t=null):s=arguments[2],Ha(t)?(n=Bs.call(t,"c"),r=Bs.call(t,"e"),i=Bs.call(t,"w")):(n=i=!0,r=!1),a={value:e,configurable:n,enumerable:r,writable:i},s?cm(fm(s),a):a};ww.gs=function(t,e,n){var r,i,s,a;return typeof t!="string"?(s=n,n=e,e=t,t=null):s=arguments[3],Ha(e)?Th(e)?Ha(n)?Th(n)||(s=n,n=void 0):n=void 0:(s=e,e=n=void 0):e=void 0,Ha(t)?(r=Bs.call(t,"c"),i=Bs.call(t,"e")):(r=!0,i=!1),a={get:e,set:n,configurable:r,enumerable:i},s?cm(fm(s),a):a};var Ew=um.exports,xw=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var n=Ew,r=xw,i=Function.prototype.apply,s=Function.prototype.call,a=Object.create,o=Object.defineProperty,u=Object.defineProperties,l=Object.prototype.hasOwnProperty,c={configurable:!0,enumerable:!1,writable:!0},f,h,p,E,x,v,d;f=function(m,y){var w;return r(y),l.call(this,"__ee__")?w=this.__ee__:(w=c.value=a(null),o(this,"__ee__",c),c.value=null),w[m]?typeof w[m]=="object"?w[m].push(y):w[m]=[w[m],y]:w[m]=y,this},h=function(m,y){var w,g;return r(y),g=this,f.call(this,m,w=function(){p.call(g,m,w),i.call(y,this,arguments)}),w.__eeOnceListener__=y,this},p=function(m,y){var w,g,_,C;if(r(y),!l.call(this,"__ee__"))return this;if(w=this.__ee__,!w[m])return this;if(g=w[m],typeof g=="object")for(C=0;_=g[C];++C)(_===y||_.__eeOnceListener__===y)&&(g.length===2?w[m]=g[C?0:1]:g.splice(C,1));else(g===y||g.__eeOnceListener__===y)&&delete w[m];return this},E=function(m){var y,w,g,_,C;if(l.call(this,"__ee__")&&(_=this.__ee__[m],!!_))if(typeof _=="object"){for(w=arguments.length,C=new Array(w-1),y=1;y<w;++y)C[y-1]=arguments[y];for(_=_.slice(),y=0;g=_[y];++y)i.call(g,this,C)}else switch(arguments.length){case 1:s.call(_,this);break;case 2:s.call(_,this,arguments[1]);break;case 3:s.call(_,this,arguments[1],arguments[2]);break;default:for(w=arguments.length,C=new Array(w-1),y=1;y<w;++y)C[y-1]=arguments[y];i.call(_,this,C)}},x={on:f,once:h,off:p,emit:E},v={on:n(f),once:n(h),off:n(p),emit:n(E)},d=u({},v),t.exports=e=function(m){return m==null?a(d):u(Object(m),v)},e.methods=x})(Ol,Ol.exports);var Cw=Ol.exports;const Yn=pi(Cw);var Ur={},zr={};function Aw(t,e,n){if(n===void 0&&(n=Array.prototype),t&&typeof n.find=="function")return n.find.call(t,e);for(var r=0;r<t.length;r++)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];if(e.call(void 0,i,r,t))return i}}function Rc(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var hm=Rc({HTML:"text/html",isHTML:function(t){return t===hm.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),dm=Rc({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===dm.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});zr.find=Aw;zr.freeze=Rc;zr.MIME_TYPE=hm;zr.NAMESPACE=dm;var pm=zr,qn=pm.find,Zs=pm.NAMESPACE;function Dw(t){return t!==""}function Sw(t){return t?t.split(/[\t\n\f\r ]+/).filter(Dw):[]}function Tw(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function kh(t){if(!t)return[];var e=Sw(t);return Object.keys(e.reduce(Tw,{}))}function kw(t){return function(e){return t&&t.indexOf(e)!==-1}}function oa(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function hn(t,e){var n=t.prototype;if(!(n instanceof e)){let i=function(){};var r=i;i.prototype=e.prototype,i=new i,oa(n,i),t.prototype=n=i}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var dn={},Ln=dn.ELEMENT_NODE=1,Gi=dn.ATTRIBUTE_NODE=2,fo=dn.TEXT_NODE=3,mm=dn.CDATA_SECTION_NODE=4,gm=dn.ENTITY_REFERENCE_NODE=5,Ow=dn.ENTITY_NODE=6,vm=dn.PROCESSING_INSTRUCTION_NODE=7,ym=dn.COMMENT_NODE=8,bm=dn.DOCUMENT_NODE=9,_m=dn.DOCUMENT_TYPE_NODE=10,lr=dn.DOCUMENT_FRAGMENT_NODE=11,Rw=dn.NOTATION_NODE=12,en={},qt={};en.INDEX_SIZE_ERR=(qt[1]="Index size error",1);en.DOMSTRING_SIZE_ERR=(qt[2]="DOMString size error",2);var cn=en.HIERARCHY_REQUEST_ERR=(qt[3]="Hierarchy request error",3);en.WRONG_DOCUMENT_ERR=(qt[4]="Wrong document",4);en.INVALID_CHARACTER_ERR=(qt[5]="Invalid character",5);en.NO_DATA_ALLOWED_ERR=(qt[6]="No data allowed",6);en.NO_MODIFICATION_ALLOWED_ERR=(qt[7]="No modification allowed",7);var wm=en.NOT_FOUND_ERR=(qt[8]="Not found",8);en.NOT_SUPPORTED_ERR=(qt[9]="Not supported",9);var Oh=en.INUSE_ATTRIBUTE_ERR=(qt[10]="Attribute in use",10);en.INVALID_STATE_ERR=(qt[11]="Invalid state",11);en.SYNTAX_ERR=(qt[12]="Syntax error",12);en.INVALID_MODIFICATION_ERR=(qt[13]="Invalid modification",13);en.NAMESPACE_ERR=(qt[14]="Invalid namespace",14);en.INVALID_ACCESS_ERR=(qt[15]="Invalid access",15);function Nt(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,qt[t]),this.message=qt[t],Error.captureStackTrace&&Error.captureStackTrace(this,Nt);return n.code=t,e&&(this.message=this.message+": "+e),n}Nt.prototype=Error.prototype;oa(en,Nt);function ar(){}ar.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)Li(this[r],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Zi(t,e){this._node=t,this._refresh=e,Ic(this)}function Ic(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var n=t._refresh(t._node);if(Nm(t,"length",n.length),!t.$$length||n.length<t.$$length)for(var r=n.length;r in t;r++)Object.prototype.hasOwnProperty.call(t,r)&&delete t[r];oa(n,t),t._inc=e}}Zi.prototype.item=function(t){return Ic(this),this[t]||null};hn(Zi,ar);function ho(){}function Em(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function Rh(t,e,n,r){if(r?e[Em(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&Am(i,t,r),Iw(i,t,n))}}function Ih(t,e,n){var r=Em(e,n);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var s=t.ownerDocument;s&&(Am(s,t,n),n.ownerElement=null)}}else throw new Nt(wm,new Error(t.tagName+"@"+n))}ho.prototype={length:0,item:ar.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Nt(Oh);var n=this.getNamedItem(t.nodeName);return Rh(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new Nt(Oh);return n=this.getNamedItemNS(t.namespaceURI,t.localName),Rh(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return Ih(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return Ih(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}};function xm(){}xm.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var r=new ua;if(r.implementation=this,r.childNodes=new ar,r.doctype=n||null,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new Ko;return r.name=t,r.nodeName=t,r.publicId=e||"",r.systemId=n||"",r}};function lt(){}lt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return po(this,t,e)},replaceChild:function(t,e){po(this,t,e,Sm),e&&this.removeChild(e)},removeChild:function(t){return Dm(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return Rl(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==fo&&t.nodeType==fo?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===t)return r}e=e.nodeType==Gi?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==Gi?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function Cm(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}oa(dn,lt);oa(dn,lt.prototype);function Xs(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Xs(t,e))return!0;while(t=t.nextSibling)}function ua(){this.ownerDocument=this}function Iw(t,e,n){t&&t._inc++;var r=n.namespaceURI;r===Zs.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function Am(t,e,n,r){t&&t._inc++;var i=n.namespaceURI;i===Zs.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function Nc(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s,delete r[r.length]}}}function Dm(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Nc(t.ownerDocument,t),e}function Nw(t){return t&&(t.nodeType===lt.DOCUMENT_NODE||t.nodeType===lt.DOCUMENT_FRAGMENT_NODE||t.nodeType===lt.ELEMENT_NODE)}function Bw(t){return t&&($n(t)||Bc(t)||cr(t)||t.nodeType===lt.DOCUMENT_FRAGMENT_NODE||t.nodeType===lt.COMMENT_NODE||t.nodeType===lt.PROCESSING_INSTRUCTION_NODE)}function cr(t){return t&&t.nodeType===lt.DOCUMENT_TYPE_NODE}function $n(t){return t&&t.nodeType===lt.ELEMENT_NODE}function Bc(t){return t&&t.nodeType===lt.TEXT_NODE}function Nh(t,e){var n=t.childNodes||[];if(qn(n,$n)||cr(e))return!1;var r=qn(n,cr);return!(e&&r&&n.indexOf(r)>n.indexOf(e))}function Bh(t,e){var n=t.childNodes||[];function r(s){return $n(s)&&s!==e}if(qn(n,r))return!1;var i=qn(n,cr);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function Pw(t,e,n){if(!Nw(t))throw new Nt(cn,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new Nt(wm,"child not in parent");if(!Bw(e)||cr(e)&&t.nodeType!==lt.DOCUMENT_NODE)throw new Nt(cn,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Lw(t,e,n){var r=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===lt.DOCUMENT_FRAGMENT_NODE){var s=i.filter($n);if(s.length>1||qn(i,Bc))throw new Nt(cn,"More than one element or text in fragment");if(s.length===1&&!Nh(t,n))throw new Nt(cn,"Element in fragment can not be inserted before doctype")}if($n(e)&&!Nh(t,n))throw new Nt(cn,"Only one element can be added and only after doctype");if(cr(e)){if(qn(r,cr))throw new Nt(cn,"Only one doctype is allowed");var a=qn(r,$n);if(n&&r.indexOf(a)<r.indexOf(n))throw new Nt(cn,"Doctype can only be inserted before an element");if(!n&&a)throw new Nt(cn,"Doctype can not be appended since element is present")}}function Sm(t,e,n){var r=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===lt.DOCUMENT_FRAGMENT_NODE){var s=i.filter($n);if(s.length>1||qn(i,Bc))throw new Nt(cn,"More than one element or text in fragment");if(s.length===1&&!Bh(t,n))throw new Nt(cn,"Element in fragment can not be inserted before doctype")}if($n(e)&&!Bh(t,n))throw new Nt(cn,"Only one element can be added and only after doctype");if(cr(e)){let u=function(l){return cr(l)&&l!==n};var o=u;if(qn(r,u))throw new Nt(cn,"Only one doctype is allowed");var a=qn(r,$n);if(n&&r.indexOf(a)<r.indexOf(n))throw new Nt(cn,"Doctype can only be inserted before an element")}}function po(t,e,n,r){Pw(t,e,n),t.nodeType===lt.DOCUMENT_NODE&&(r||Lw)(t,e,n);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===lr){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=n?n.previousSibling:t.lastChild;s.previousSibling=o,a.nextSibling=n,o?o.nextSibling=s:t.firstChild=s,n==null?t.lastChild=a:n.previousSibling=a;do s.parentNode=t;while(s!==a&&(s=s.nextSibling));return Nc(t.ownerDocument||t,t),e.nodeType==lr&&(e.firstChild=e.lastChild=null),e}function Fw(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Nc(t.ownerDocument,t,e),e}ua.prototype={nodeName:"#document",nodeType:bm,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==lr){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return po(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Ln&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Dm(this,t)},replaceChild:function(t,e){po(this,t,e,Sm),t.ownerDocument=this,e&&this.removeChild(e),$n(t)&&(this.documentElement=t)},importNode:function(t,e){return Im(this,t,e)},getElementById:function(t){var e=null;return Xs(this.documentElement,function(n){if(n.nodeType==Ln&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=kh(t);return new Zi(this,function(n){var r=[];return e.length>0&&Xs(n.documentElement,function(i){if(i!==n&&i.nodeType===Ln){var s=i.getAttribute("class");if(s){var a=t===s;if(!a){var o=kh(s);a=e.every(kw(o))}a&&r.push(i)}}}),r})},createElement:function(t){var e=new ui;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new ar;var n=e.attributes=new ho;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new Yo;return t.ownerDocument=this,t.childNodes=new ar,t},createTextNode:function(t){var e=new Pc;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Lc;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Fc;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new Uc;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new mo;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Mc;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new ui,r=e.split(":"),i=n.attributes=new ho;return n.childNodes=new ar,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new mo,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,r.length==2?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}};hn(ua,lt);function ui(){this._nsMap={}}ui.prototype={nodeType:Ln,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===lr?this.insertBefore(t,null):Fw(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Zi(this,function(e){var n=[];return Xs(e,function(r){r!==e&&r.nodeType==Ln&&(t==="*"||r.tagName==t)&&n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new Zi(this,function(n){var r=[];return Xs(n,function(i){i!==n&&i.nodeType===Ln&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};ua.prototype.getElementsByTagName=ui.prototype.getElementsByTagName;ua.prototype.getElementsByTagNameNS=ui.prototype.getElementsByTagNameNS;hn(ui,lt);function mo(){}mo.prototype.nodeType=Gi;hn(mo,lt);function la(){}la.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(qt[cn])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var r=this.data.substring(0,t),i=this.data.substring(t+e);n=r+n+i,this.nodeValue=this.data=n,this.length=n.length}};hn(la,lt);function Pc(){}Pc.prototype={nodeName:"#text",nodeType:fo,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};hn(Pc,la);function Lc(){}Lc.prototype={nodeName:"#comment",nodeType:ym};hn(Lc,la);function Fc(){}Fc.prototype={nodeName:"#cdata-section",nodeType:mm};hn(Fc,la);function Ko(){}Ko.prototype.nodeType=_m;hn(Ko,lt);function Tm(){}Tm.prototype.nodeType=Rw;hn(Tm,lt);function km(){}km.prototype.nodeType=Ow;hn(km,lt);function Mc(){}Mc.prototype.nodeType=gm;hn(Mc,lt);function Yo(){}Yo.prototype.nodeName="#document-fragment";Yo.prototype.nodeType=lr;hn(Yo,lt);function Uc(){}Uc.prototype.nodeType=vm;hn(Uc,lt);function Om(){}Om.prototype.serializeToString=function(t,e,n){return Rm.call(t,e,n)};lt.prototype.toString=Rm;function Rm(t,e){var n=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,s=r.namespaceURI;if(s&&i==null){var i=r.lookupPrefix(s);if(i==null)var a=[{namespace:s,prefix:null}]}return Li(this,n,t,e,a),n.join("")}function Ph(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!i||r==="xml"&&i===Zs.XML||i===Zs.XMLNS)return!1;for(var s=n.length;s--;){var a=n[s];if(a.prefix===r)return a.namespace!==i}return!0}function Iu(t,e,n){t.push(" ",e,'="',n.replace(/[<&"]/g,Cm),'"')}function Li(t,e,n,r,i){if(i||(i=[]),r)if(t=r(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Ln:var s=t.attributes,a=s.length,d=t.firstChild,o=t.tagName;n=Zs.isHTML(t.namespaceURI)||n;var u=o;if(!n&&!t.prefix&&t.namespaceURI){for(var l,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){l=s.item(c).value;break}if(!l)for(var f=i.length-1;f>=0;f--){var h=i[f];if(h.prefix===""&&h.namespace===t.namespaceURI){l=h.namespace;break}}if(l!==t.namespaceURI)for(var f=i.length-1;f>=0;f--){var h=i[f];if(h.namespace===t.namespaceURI){h.prefix&&(u=h.prefix+":"+o);break}}}e.push("<",u);for(var p=0;p<a;p++){var E=s.item(p);E.prefix=="xmlns"?i.push({prefix:E.localName,namespace:E.value}):E.nodeName=="xmlns"&&i.push({prefix:"",namespace:E.value})}for(var p=0;p<a;p++){var E=s.item(p);if(Ph(E,n,i)){var x=E.prefix||"",v=E.namespaceURI;Iu(e,x?"xmlns:"+x:"xmlns",v),i.push({prefix:x,namespace:v})}Li(E,e,n,r,i)}if(o===u&&Ph(t,n,i)){var x=t.prefix||"",v=t.namespaceURI;Iu(e,x?"xmlns:"+x:"xmlns",v),i.push({prefix:x,namespace:v})}if(d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),n&&/^script$/i.test(o))for(;d;)d.data?e.push(d.data):Li(d,e,n,r,i.slice()),d=d.nextSibling;else for(;d;)Li(d,e,n,r,i.slice()),d=d.nextSibling;e.push("</",u,">")}else e.push("/>");return;case bm:case lr:for(var d=t.firstChild;d;)Li(d,e,n,r,i.slice()),d=d.nextSibling;return;case Gi:return Iu(e,t.name,t.value);case fo:return e.push(t.data.replace(/[<&]/g,Cm).replace(/]]>/g,"]]&gt;"));case mm:return e.push("<![CDATA[",t.data,"]]>");case ym:return e.push("<!--",t.data,"-->");case _m:var m=t.publicId,y=t.systemId;if(e.push("<!DOCTYPE ",t.name),m)e.push(" PUBLIC ",m),y&&y!="."&&e.push(" ",y),e.push(">");else if(y&&y!=".")e.push(" SYSTEM ",y,">");else{var w=t.internalSubset;w&&e.push(" [",w,"]"),e.push(">")}return;case vm:return e.push("<?",t.target," ",t.data,"?>");case gm:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function Im(t,e,n){var r;switch(e.nodeType){case Ln:r=e.cloneNode(!1),r.ownerDocument=t;case lr:break;case Gi:n=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=t,r.parentNode=null,n)for(var i=e.firstChild;i;)r.appendChild(Im(t,i,n)),i=i.nextSibling;return r}function Rl(t,e,n){var r=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s!="object"&&s!=r[i]&&(r[i]=s)}switch(e.childNodes&&(r.childNodes=new ar),r.ownerDocument=t,r.nodeType){case Ln:var a=e.attributes,o=r.attributes=new ho,u=a.length;o._ownerElement=r;for(var l=0;l<u;l++)r.setAttributeNode(Rl(t,a.item(l),!0));break;case Gi:n=!0}if(n)for(var c=e.firstChild;c;)r.appendChild(Rl(t,c,n)),c=c.nextSibling;return r}function Nm(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Ln:case lr:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};var yA=t;Object.defineProperty(Zi.prototype,"length",{get:function(){return Ic(this),this.$$length}}),Object.defineProperty(lt.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Ln:case lr:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Nm=function(e,n,r){e["$$"+n]=r}}}catch{}Ur.DocumentType=Ko;Ur.DOMException=Nt;Ur.DOMImplementation=xm;Ur.Element=ui;Ur.Node=lt;Ur.NodeList=ar;Ur.XMLSerializer=Om;var ca={},Bm={};(function(t){var e=zr.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(Bm);var zc={},Qs=zr.NAMESPACE,Il=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Lh=new RegExp("[\\-\\.0-9"+Il.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Fh=new RegExp("^"+Il.source+Lh.source+"*(?::"+Il.source+Lh.source+"*)?$"),fs=0,wr=1,xi=2,hs=3,Ci=4,Ai=5,ds=6,Oa=7;function Xi(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Xi)}Xi.prototype=new Error;Xi.prototype.name=Xi.name;function Pm(){}Pm.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),Lm(e,e={}),Mw(t,e,n,r,this.errorHandler),r.endDocument()}};function Mw(t,e,n,r,i){function s(ee){if(ee>65535){ee-=65536;var te=55296+(ee>>10),ie=56320+(ee&1023);return String.fromCharCode(te,ie)}else return String.fromCharCode(ee)}function a(ee){var te=ee.slice(1,-1);return te in n?n[te]:te.charAt(0)==="#"?s(parseInt(te.substr(1).replace("x","0x"))):(i.error("entity not found:"+ee),ee)}function o(ee){if(ee>x){var te=t.substring(x,ee).replace(/&#?\w+;/g,a);h&&u(x),r.characters(te,0,ee-x),x=ee}}function u(ee,te){for(;ee>=c&&(te=f.exec(t));)l=te.index,c=l+te[0].length,h.lineNumber++;h.columnNumber=ee-l+1}for(var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,h=r.locator,p=[{currentNSMap:e}],E={},x=0;;){try{var v=t.indexOf("<",x);if(v<0){if(!t.substr(x).match(/^\s*$/)){var d=r.doc,m=d.createTextNode(t.substr(x));d.appendChild(m),r.currentElement=m}return}switch(v>x&&o(v),t.charAt(v+1)){case"/":var q=t.indexOf(">",v+3),y=t.substring(v+2,q).replace(/[ \t\n\r]+$/g,""),w=p.pop();q<0?(y=t.substring(v+2).replace(/[\s<].*/,""),i.error("end tag name: "+y+" is not complete:"+w.tagName),q=v+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),i.error("end tag name: "+y+" maybe not complete"),q=v+1+y.length);var g=w.localNSMap,_=w.tagName==y,C=_||w.tagName&&w.tagName.toLowerCase()==y.toLowerCase();if(C){if(r.endElement(w.uri,w.localName,y),g)for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&r.endPrefixMapping(S);_||i.fatalError("end tag name: "+y+" is not match the current start tagName:"+w.tagName)}else p.push(w);q++;break;case"?":h&&u(v),q=qw(t,v,r);break;case"!":h&&u(v),q=Ww(t,v,r,i);break;default:h&&u(v);var O=new Fm,B=p[p.length-1].currentNSMap,q=Uw(t,v,O,B,a,i),M=O.length;if(!O.closed&&jw(t,q,O.tagName,E)&&(O.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),h&&M){for(var X=Mh(h,{}),he=0;he<M;he++){var oe=O[he];u(oe.offset),oe.locator=Mh(h,{})}r.locator=X,Uh(O,r,B)&&p.push(O),r.locator=h}else Uh(O,r,B)&&p.push(O);Qs.isHTML(O.uri)&&!O.closed?q=zw(t,q,O.tagName,a,r):q++}}catch(ee){if(ee instanceof Xi)throw ee;i.error("element parse error: "+ee),q=-1}q>x?x=q:o(Math.max(v,x)+1)}}function Mh(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function Uw(t,e,n,r,i,s){function a(h,p,E){n.attributeNames.hasOwnProperty(h)&&s.fatalError("Attribute "+h+" redefined"),n.addValue(h,p,E)}for(var o,u,l=++e,c=fs;;){var f=t.charAt(l);switch(f){case"=":if(c===wr)o=t.slice(e,l),c=hs;else if(c===xi)c=hs;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===hs||c===wr)if(c===wr&&(s.warning('attribute value must after "="'),o=t.slice(e,l)),e=l+1,l=t.indexOf(f,e),l>0)u=t.slice(e,l).replace(/&#?\w+;/g,i),a(o,u,e-1),c=Ai;else throw new Error("attribute value no end '"+f+"' match");else if(c==Ci)u=t.slice(e,l).replace(/&#?\w+;/g,i),a(o,u,e),s.warning('attribute "'+o+'" missed start quot('+f+")!!"),e=l+1,c=Ai;else throw new Error('attribute value must after "="');break;case"/":switch(c){case fs:n.setTagName(t.slice(e,l));case Ai:case ds:case Oa:c=Oa,n.closed=!0;case Ci:case wr:break;case xi:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==fs&&n.setTagName(t.slice(e,l)),l;case">":switch(c){case fs:n.setTagName(t.slice(e,l));case Ai:case ds:case Oa:break;case Ci:case wr:u=t.slice(e,l),u.slice(-1)==="/"&&(n.closed=!0,u=u.slice(0,-1));case xi:c===xi&&(u=o),c==Ci?(s.warning('attribute "'+u+'" missed quot(")!'),a(o,u.replace(/&#?\w+;/g,i),e)):((!Qs.isHTML(r[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),a(u,u,e));break;case hs:throw new Error("attribute value missed!!")}return l;case"":f=" ";default:if(f<=" ")switch(c){case fs:n.setTagName(t.slice(e,l)),c=ds;break;case wr:o=t.slice(e,l),c=xi;break;case Ci:var u=t.slice(e,l).replace(/&#?\w+;/g,i);s.warning('attribute "'+u+'" missed quot(")!!'),a(o,u,e);case Ai:c=ds;break}else switch(c){case xi:n.tagName,(!Qs.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=l,c=wr;break;case Ai:s.warning('attribute space is required"'+o+'"!!');case ds:c=wr,e=l;break;case hs:c=Ci,e=l;break;case Oa:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function Uh(t,e,n){for(var r=t.tagName,i=null,f=t.length;f--;){var s=t[f],a=s.qName,o=s.value,h=a.indexOf(":");if(h>0)var u=s.prefix=a.slice(0,h),l=a.slice(h+1),c=u==="xmlns"&&l;else l=a,u=null,c=a==="xmlns"&&"";s.localName=l,c!==!1&&(i==null&&(i={},Lm(n,n={})),n[c]=i[c]=o,s.uri=Qs.XMLNS,e.startPrefixMapping(c,o))}for(var f=t.length;f--;){s=t[f];var u=s.prefix;u&&(u==="xml"&&(s.uri=Qs.XML),u!=="xmlns"&&(s.uri=n[u||""]))}var h=r.indexOf(":");h>0?(u=t.prefix=r.slice(0,h),l=t.localName=r.slice(h+1)):(u=null,l=t.localName=r);var p=t.uri=n[u||""];if(e.startElement(p,l,r,t),t.closed){if(e.endElement(p,l,r),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return t.currentNSMap=n,t.localNSMap=i,!0}function zw(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),s)}return e+1}function jw(t,e,n,r){var i=r[n];return i==null&&(i=t.lastIndexOf("</"+n+">"),i<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function Lm(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function Ww(t,e,n,r){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(n.comment(t,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,s-e-9),n.endCDATA(),s+3}var a=$w(t,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var f=a[o-1];return n.startDTD(u,l,c),n.endDTD(),f.index+f[0].length}}return-1}function qw(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function Fm(){this.attributeNames={}}Fm.prototype={setTagName:function(t){if(!Fh.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!Fh.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function $w(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}zc.XMLReader=Pm;zc.ParseError=Xi;var Hw=zr,jc=Ur,zh=Bm,Mm=zc,Vw=jc.DOMImplementation,jh=Hw.NAMESPACE,Kw=Mm.ParseError,Yw=Mm.XMLReader;function Um(t){this.options=t||{locator:{}}}Um.prototype.parseFromString=function(t,e){var n=this.options,r=new Yw,i=n.domBuilder||new fa,s=n.errorHandler,a=n.locator,o=n.xmlns||{},u=/\/x?html?$/.test(e),l=u?zh.HTML_ENTITIES:zh.XML_ENTITIES;return a&&i.setDocumentLocator(a),r.errorHandler=Gw(s,i,a),r.domBuilder=n.domBuilder||i,u&&(o[""]=jh.HTML),o.xml=o.xml||jh.XML,t&&typeof t=="string"?r.parse(t,o,l):r.errorHandler.error("invalid doc source"),i.doc};function Gw(t,e,n){if(!t){if(e instanceof fa)return e;t=e}var r={},i=t instanceof Function;n=n||{};function s(a){var o=t[a];!o&&i&&(o=t.length==2?function(u){t(a,u)}:t),r[a]=o&&function(u){o("[xmldom "+a+"]	"+u+Nl(n))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function fa(){this.cdata=!1}function Di(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}fa.prototype={startDocument:function(){this.doc=new Vw().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,s=i.createElementNS(t,n||e),a=r.length;Ra(this,s),this.currentElement=s,this.locator&&Di(this.locator,s);for(var o=0;o<a;o++){var t=r.getURI(o),u=r.getValue(o),n=r.getQName(o),l=i.createAttributeNS(t,n);this.locator&&Di(r.getLocator(o),l),l.value=l.nodeValue=u,s.setAttributeNode(l)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&Di(this.locator,n),Ra(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=Wh.apply(this,arguments),t){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&Di(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=Wh.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&Di(this.locator,r),Ra(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&Di(this.locator,i),Ra(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,Nl(this.locator))},error:function(t){console.error("[xmldom error]	"+t,Nl(this.locator))},fatalError:function(t){throw new Kw(t,this.locator)}};function Nl(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function Wh(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){fa.prototype[t]=function(){return null}});function Ra(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}ca.__DOMHandler=fa;ca.DOMParser=Um;ca.DOMImplementation=jc.DOMImplementation;ca.XMLSerializer=jc.XMLSerializer;var zm=ca.DOMParser;const Wc=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,Zw=1,Xw=3,jm=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function Go(){var t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?r:r&7|8).toString(16)});return e}function Qw(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function Wm(t){return!!(t&&t.nodeType==1)}function Dt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function qm(t){let e=parseFloat(t);return Dt(t)===!1?!1:typeof t=="string"&&t.indexOf(".")>-1?!0:Math.floor(e)!==e}function Ni(t){var e=["Webkit","webkit","Moz","O","ms"],n=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=t.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[r]<"u")return t;for(var s=0;s<i;s++)if(typeof document.body.style[n[s]+r]<"u")return n[s]+r;return t}function $m(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var i in r)t[i]===void 0&&(t[i]=r[i])}return t}function Vt(t){var e=[].slice.call(arguments,1);return e.forEach(function(n){n&&Object.getOwnPropertyNames(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}),t}function Jw(t,e,n){var r=Qi(t,e,n);return e.splice(r,0,t),r}function Qi(t,e,n,r,i){var s=r||0,a=i||e.length,o=parseInt(s+(a-s)/2),u;return n||(n=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?o:(u=n(e[o],t),a-s===1?u>=0?o:o+1:u===0?o:u===-1?Qi(t,e,n,o,a):Qi(t,e,n,s,o))}function go(t,e,n,r,i){var s=r||0,a=i||e.length,o=parseInt(s+(a-s)/2),u;return n||(n=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?-1:(u=n(e[o],t),a-s===1?u===0?o:-1:u===0?o:u===-1?go(t,e,n,o,a):go(t,e,n,s,o))}function Va(t){var e=window.getComputedStyle(t),n=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return n.forEach(function(a){i+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function vo(t){var e=window.getComputedStyle(t),n=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return n.forEach(function(a){i+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function Bl(t){let e,n=t.ownerDocument;if(t.nodeType==Node.TEXT_NODE){let r=n.createRange();r.selectNodeContents(t),e=r.getBoundingClientRect()}else e=t.getBoundingClientRect();return e}function yo(){var t=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}function qc(t,e){for(var n=t.parentNode,r=n.childNodes,i,s=-1,a=0;a<r.length&&(i=r[a],i.nodeType===e&&s++,i!=t);a++);return s}function e1(t){return qc(t,Xw)}function Hm(t){return qc(t,Zw)}function Js(t){return["xml","opf","ncx"].indexOf(t)>-1}function Vm(t,e){return new Blob([t],{type:e})}function bo(t,e){var n,r=Vm(t,e);return n=jm.createObjectURL(r),n}function Km(t){return jm.revokeObjectURL(t)}function Pl(t,e){var n,r;if(typeof t=="string")return n=btoa(t),r="data:"+e+";base64,"+n,r}function Ym(t){return Object.prototype.toString.call(t).slice(8,-1)}function Hn(t,e,n){var r,i;return typeof DOMParser>"u"||n?i=zm:i=DOMParser,t.charCodeAt(0)===65279&&(t=t.slice(1)),r=new i().parseFromString(t,e),r}function ht(t,e){var n;if(!t)throw new Error("No Element Provided");if(typeof t.querySelector<"u")return t.querySelector(e);if(n=t.getElementsByTagName(e),n.length)return n[0]}function fr(t,e){return typeof t.querySelector<"u"?t.querySelectorAll(e):t.getElementsByTagName(e)}function Bi(t,e,n){var r,i;if(typeof t.querySelector<"u"){e+="[";for(var s in n)e+=s+"~='"+n[s]+"'";return e+="]",t.querySelector(e)}else if(r=t.getElementsByTagName(e),i=Array.prototype.slice.call(r,0).filter(function(a){for(var o in n)if(a.getAttribute(o)===n[o])return!0;return!1}),i)return i[0]}function _o(t,e){var n=t.ownerDocument||t;typeof n.createTreeWalker<"u"?Gm(t,e,NodeFilter.SHOW_TEXT):$c(t,function(r){r&&r.nodeType===3&&e(r)})}function Gm(t,e,n){var r=document.createTreeWalker(t,n,null,!1);let i;for(;i=r.nextNode();)e(i)}function $c(t,e){if(e(t))return!0;if(t=t.firstChild,t)do{if($c(t,e))return!0;t=t.nextSibling}while(t)}function Zm(t){return new Promise(function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onloadend=function(){e(r.result)}})}function et(){this.resolve=null,this.reject=null,this.id=Go(),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),Object.freeze(this)}function wo(t,e,n){var r;if(typeof t.querySelector<"u"&&(r=t.querySelector(`${e}[*|type="${n}"]`)),!r||r.length===0){r=fr(t,e);for(var i=0;i<r.length;i++)if(r[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===n||r[i].getAttribute("epub:type")===n)return r[i]}else return r}function Ll(t){for(var e=[],n=t.childNodes,r=0;r<n.length;r++){let i=n[r];i.nodeType===1&&e.push(i)}return e}function Fl(t){for(var e=[t];t;t=t.parentNode)e.unshift(t);return e}function Pi(t,e,n){for(var r=[],i=t.childNodes,s=0;s<i.length;s++){let a=i[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(n)return a;r.push(a)}}if(!n)return r}function t1(t,e){let n;if(!(t===null||e===""))for(n=t.parentNode;n.nodeType===1;){if(n.tagName.toLowerCase()===e)return n;n=n.parentNode}}class Xm{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,n){this.startContainer=e,this.startOffset=n,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,n){this.endContainer=e,this.endOffset=n,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let n=e.parentNode,r=Array.prototype.indexOf.call(n.childNodes,e);this.setStart(n,r),this.setEnd(n,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let n=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,n)}_commonAncestorContainer(e,n){var r=Fl(e||this.startContainer),i=Fl(n||this.endContainer);if(r[0]==i[0]){for(var s=0;s<r.length;s++)if(r[s]!=i[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const n1=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:Xm,blob2base64:Zm,borders:vo,bounds:Va,createBase64Url:Pl,createBlob:Vm,createBlobUrl:bo,defaults:$m,defer:et,documentHeight:Qw,extend:Vt,filterChildren:Pi,findChildren:Ll,getParentByTagName:t1,indexOfElementNode:Hm,indexOfNode:qc,indexOfSorted:go,indexOfTextNode:e1,insert:Jw,isElement:Wm,isFloat:qm,isNumber:Dt,isXml:Js,locationOf:Qi,nodeBounds:Bl,parents:Fl,parse:Hn,prefixed:Ni,qs:ht,qsa:fr,qsp:Bi,querySelectorByType:wo,requestAnimationFrame:Wc,revokeBlobUrl:Km,sprint:_o,treeWalker:Gm,type:Ym,uuid:Go,walk:$c,windowBounds:yo},Symbol.toStringTag,{value:"Module"}));if(!Qm)var Qm={cwd:function(){return"/"}};function Un(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+t)}function qh(t,e){for(var n="",r=-1,i=0,s,a=0;a<=t.length;++a){if(a<t.length)s=t.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(r===a-1||i===1))if(r!==a-1&&i===2){if(n.length<2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){for(var o=n.length-1,u=o;u>=0&&n.charCodeAt(u)!==47;--u);if(u!==o){u===-1?n="":n=n.slice(0,u),r=a,i=0;continue}}else if(n.length===2||n.length===1){n="",r=a,i=0;continue}}e&&(n.length>0?n+="/..":n="..")}else n.length>0?n+="/"+t.slice(r+1,a):n=t.slice(r+1,a);r=a,i=0}else s===46&&i!==-1?++i:i=-1}return n}function r1(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var Ka={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=Qm.cwd()),s=r),Un(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=qh(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Un(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=qh(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return Un(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Un(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":Ka.normalize(e)},relative:function(e,n){if(Un(e),Un(n),e===n||(e=Ka.resolve(e),n=Ka.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var o=n.length,u=o-a,l=s<u?s:u,c=-1,f=0;f<=l;++f){if(f===l){if(u>l){if(n.charCodeAt(a+f)===47)return n.slice(a+f+1);if(f===0)return n.slice(a+f)}else s>l&&(e.charCodeAt(r+f)===47?c=f:f===0&&(c=0));break}var h=e.charCodeAt(r+f),p=n.charCodeAt(a+f);if(h!==p)break;h===47&&(c=f)}var E="";for(f=r+c+1;f<=i;++f)(f===i||e.charCodeAt(f)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+n.slice(a+c):(a+=c,n.charCodeAt(a)===47&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(Un(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===47){if(!s){i=a;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Un(e);var r=0,i=-1,s=!0,a;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var o=n.length-1,u=-1;for(a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}}else u===-1&&(s=!1,u=a+1),o>=0&&(l===n.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=u))}return r===i?i=u:i===-1&&(i=e.length),e.slice(r,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(r,i)}},extname:function(e){Un(e);for(var n=-1,r=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(u===47){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),u===46?n===-1?n=o:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return r1("/",e)},parse:function(e){Un(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var a=-1,o=0,u=-1,l=!0,c=e.length-1,f=0;c>=s;--c){if(r=e.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}u===-1&&(l=!1,u=c+1),r===46?a===-1?a=c:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===o+1?u!==-1&&(o===0&&i?n.base=n.name=e.slice(1,u):n.base=n.name=e.slice(o,u)):(o===0&&i?(n.name=e.slice(1,a),n.base=e.slice(1,u)):(n.name=e.slice(o,a),n.base=e.slice(o,u)),n.ext=e.slice(a,u)),o>0?n.dir=e.slice(0,o-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",posix:null},i1=Ka;const kr=pi(i1);class hr{constructor(e){var n,r;n=e.indexOf("://"),n>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return kr.parse(e)}isAbsolute(e){return kr.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return kr.resolve(this.directory,e)}relative(e){var n=e&&e.indexOf("://")>-1;return n?e:kr.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class On{constructor(e,n){var r=e.indexOf("://")>-1,i=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=n,!r&&n!==!1&&typeof n!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new hr(this.base),i=s.resolve(i))}this.Path=new hr(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var n=e.indexOf("://")>-1,r;return n?e:(r=kr.resolve(this.directory,e),this.origin+r)}relative(e){return kr.relative(e,this.directory)}toString(){return this.href}}const Si=1,wn=3,s1=9;class tt{constructor(e,n,r){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof tt))return new tt(e,n,r);if(typeof n=="string"?this.base=this.parseComponent(n):typeof n=="object"&&n.steps&&(this.base=n),i=this.checkType(e),i==="string")return this.str=e,Vt(this,this.parse(e));if(i==="range")return Vt(this,this.fromRange(e,this.base,r));if(i==="node")return Vt(this,this.fromNode(e,this.base,r));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(Ym(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof tt?"EpubCFI":!1}parse(e){var n={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,i,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(n.base=this.parseComponent(r),i=this.getPathComponent(e),n.path=this.parseComponent(i),s=this.getRange(e),s&&(n.range=!0,n.start=this.parseComponent(s[0]),n.end=this.parseComponent(s[1])),n.spinePos=n.base.steps[1].index,n):{spinePos:-1})}parseComponent(e){var n={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),i=r[0].split("/"),s;return r.length>1&&(s=r[1],n.terminal=this.parseTerminal(s)),i[0]===""&&i.shift(),n.steps=i.map((function(a){return this.parseStep(a)}).bind(this)),n}parseStep(e){var n,r,i,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),r=parseInt(e),!isNaN(r))return r%2===0?(n="element",i=r/2-1):(n="text",i=(r-1)/2),{type:n,index:i,id:a||null}}parseTerminal(e){var n,r,i=e.match(/\[(.*)\]/);return i&&i[1]?(n=parseInt(e.split("[")[0]),r=i[1]):n=parseInt(e),Dt(n)||(n=null),{offset:n,assertion:r}}getChapterComponent(e){var n=e.split("!");return n[0]}getPathComponent(e){var n=e.split("!");if(n[1])return n[1].split(",")[0]}getRange(e){var n=e.split(",");return n.length===3?[n[1],n[2]]:!1}getCharecterOffsetComponent(e){var n=e.split(":");return n[1]||""}joinSteps(e){return e?e.map(function(n){var r="";return n.type==="element"&&(r+=(n.index+1)*2),n.type==="text"&&(r+=1+2*n.index),n.id&&(r+="["+n.id+"]"),r}).join("/"):""}segmentString(e){var n="/";return n+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(n+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(n+="["+e.terminal.assertion+"]"),n}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,n){var r,i,s,a;if(typeof e=="string"&&(e=new tt(e)),typeof n=="string"&&(n=new tt(n)),e.spinePos>n.spinePos)return 1;if(e.spinePos<n.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),n.range?(i=n.path.steps.concat(n.start.steps),a=n.start.terminal):(i=n.path.steps,a=n.path.terminal);for(var o=0;o<r.length;o++){if(!r[o])return-1;if(!i[o]||r[o].index>i[o].index)return 1;if(r[o].index<i[o].index)return-1}return r.length<i.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var n=e.nodeType===wn?"text":"element";return{id:e.id,tagName:e.tagName,type:n,index:this.position(e)}}filteredStep(e,n){var r=this.filter(e,n),i;if(r)return i=r.nodeType===wn?"text":"element",{id:r.id,tagName:r.tagName,type:i,index:this.filteredPosition(r,n)}}pathTo(e,n,r){for(var i={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=s1;)r?a=this.filteredStep(s,r):a=this.step(s),a&&i.steps.unshift(a),s=s.parentNode;return n!=null&&n>=0&&(i.terminal.offset=n,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,n){return!e||!n?!1:e.index===n.index&&e.id===n.id&&e.type===n.type}fromRange(e,n,r){var i={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,u=e.endOffset,l=!1;if(r&&(l=s.ownerDocument.querySelector("."+r)!=null),typeof n=="string"?(i.base=this.parseComponent(n),i.spinePos=i.base.steps[1].index):typeof n=="object"&&(i.base=n),e.collapsed)l&&(o=this.patchOffset(s,o,r)),i.path=this.pathTo(s,o,r);else{i.range=!0,l&&(o=this.patchOffset(s,o,r)),i.start=this.pathTo(s,o,r),l&&(u=this.patchOffset(a,u,r)),i.end=this.pathTo(a,u,r),i.path={steps:[],terminal:null};var c=i.start.steps.length,f;for(f=0;f<c&&this.equalStep(i.start.steps[f],i.end.steps[f]);f++)f===c-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[f]),i.range=!1):i.path.steps.push(i.start.steps[f]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,n,r){var i={range:!1,base:{},path:{},start:null,end:null};return typeof n=="string"?(i.base=this.parseComponent(n),i.spinePos=i.base.steps[1].index):typeof n=="object"&&(i.base=n),i.path=this.pathTo(e,null,r),i}filter(e,n){var r,i,s,a,o,u=!1;return e.nodeType===wn?(u=!0,s=e.parentNode,r=e.parentNode.classList.contains(n)):(u=!1,r=e.classList.contains(n)),r&&u?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===wn?i=a:o&&o.nodeType===wn&&(i=o),i||e):r&&!u?!1:e}patchOffset(e,n,r){if(e.nodeType!=wn)throw new Error("Anchor must be a text node");var i=e,s=n;for(e.parentNode.classList.contains(r)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===Si)if(i.previousSibling.classList.contains(r))s+=i.previousSibling.textContent.length;else break;else s+=i.previousSibling.textContent.length;i=i.previousSibling}return s}normalizedMap(e,n,r){var i={},s=-1,a,o=e.length,u,l;for(a=0;a<o;a++)u=e[a].nodeType,u===Si&&e[a].classList.contains(r)&&(u=wn),a>0&&u===wn&&l===wn?i[a]=s:n===u&&(s=s+1,i[a]=s),l=u;return i}position(e){var n,r;return e.nodeType===Si?(n=e.parentNode.children,n||(n=Ll(e.parentNode)),r=Array.prototype.indexOf.call(n,e)):(n=this.textNodes(e.parentNode),r=n.indexOf(e)),r}filteredPosition(e,n){var r,i,s;return e.nodeType===Si?(r=e.parentNode.children,s=this.normalizedMap(r,Si,n)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(n)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,wn,n)),i=Array.prototype.indexOf.call(r,e),s[i]}stepsToXpath(e){var n=[".","*"];return e.forEach(function(r){var i=r.index+1;r.id?n.push("*[position()="+i+" and @id='"+r.id+"']"):r.type==="text"?n.push("text()["+i+"]"):n.push("*["+i+"]")}),n.join("/")}stepsToQuerySelector(e){var n=["html"];return e.forEach(function(r){var i=r.index+1;r.id?n.push("#"+r.id):r.type==="text"||n.push("*:nth-child("+i+")")}),n.join(">")}textNodes(e,n){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===wn?!0:!!(n&&r.classList.contains(n))})}walkToNode(e,n,r){var i=n||document,s=i.documentElement,a,o,u=e.length,l;for(l=0;l<u&&(o=e[l],o.type==="element"?o.id?s=i.getElementById(o.id):(a=s.children||Ll(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,r)[o.index]),!!s);l++);return s}findNode(e,n,r){var i=n||document,s,a;return!r&&typeof i.evaluate<"u"?(a=this.stepsToXpath(e),s=i.evaluate(a,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,i,r):s=this.walkToNode(e,i),s}fixMiss(e,n,r,i){var s=this.findNode(e.slice(0,-1),r,i),a=s.childNodes,o=this.normalizedMap(a,wn,i),u,l,c=e[e.length-1].index;for(let f in o){if(!o.hasOwnProperty(f))return;if(o[f]===c)if(u=a[f],l=u.textContent.length,n>l)n=n-l;else{u.nodeType===Si?s=u.childNodes[0]:s=u;break}}return{container:s,offset:n}}toRange(e,n){var r=e||document,i,s,a,o,u,l=this,c,f,h=n?r.querySelector("."+n)!=null:!1,p;if(typeof r.createRange<"u"?i=r.createRange():i=new Xm,l.range?(s=l.start,c=l.path.steps.concat(s.steps),o=this.findNode(c,r,h?n:null),a=l.end,f=l.path.steps.concat(a.steps),u=this.findNode(f,r,h?n:null)):(s=l.path,c=l.path.steps,o=this.findNode(l.path.steps,r,h?n:null)),o)try{s.terminal.offset!=null?i.setStart(o,s.terminal.offset):i.setStart(o,0)}catch{p=this.fixMiss(c,s.terminal.offset,r,h?n:null),i.setStart(p.container,p.offset)}else return console.log("No startContainer found for",this.toString()),null;if(u)try{a.terminal.offset!=null?i.setEnd(u,a.terminal.offset):i.setEnd(u,0)}catch{p=this.fixMiss(f,l.end.terminal.offset,r,h?n:null),i.setEnd(p.container,p.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,n,r){var i=parseInt(n),s=(e+1)*2,a="/"+s+"/";return a+=(i+1)*2,r&&(a+="["+r+"]"),a}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Rn{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var n=0;n<arguments[e].length;++n)this.hooks.push(arguments[e][n])}deregister(e){let n;for(let r=0;r<this.hooks.length;r++)if(n=this.hooks[r],n===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,n=this.context,r=[];return this.hooks.forEach(function(i){try{var s=i.apply(n,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function Jm(t,e){var n,r,i=e.url,s=i.indexOf("://")>-1;t&&(r=ht(t,"head"),n=ht(r,"base"),n||(n=t.createElement("base"),r.insertBefore(n,r.firstChild)),!s&&window&&window.location&&(i=window.location.origin+i),n.setAttribute("href",i))}function a1(t,e){var n,r,i=e.canonical;t&&(n=ht(t,"head"),r=ht(n,"link[rel='canonical']"),r?r.setAttribute("href",i):(r=t.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",i),n.appendChild(r)))}function o1(t,e){var n,r,i=e.idref;t&&(n=ht(t,"head"),r=ht(n,"link[property='dc.identifier']"),r?r.setAttribute("content",i):(r=t.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",i),n.appendChild(r)))}function u1(t,e){var n=t.querySelectorAll("a[href]");if(n.length)for(var r=ht(t.ownerDocument,"base"),i=r?r.getAttribute("href"):void 0,s=(function(o){var u=o.getAttribute("href");if(u.indexOf("mailto:")!==0){var l=u.indexOf("://")>-1;if(l)o.setAttribute("target","_blank");else{var c;try{c=new On(u,i)}catch{}o.onclick=function(){return c&&c.hash?e(c.Path.path+c.hash):e(c?c.Path.path:u),!1}}}}).bind(this),a=0;a<n.length;a++)s(n[a])}function $h(t,e,n){return e.forEach(function(r,i){r&&n[i]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp(r,"g"),n[i]))}),t}function ea(t,e,n,r){var i=typeof window<"u"?window.URL:!1,s=i?"blob":"arraybuffer",a=new et,o=new XMLHttpRequest,u=XMLHttpRequest.prototype,l;"overrideMimeType"in u||Object.defineProperty(u,"overrideMimeType",{value:function(){}}),n&&(o.withCredentials=!0),o.onreadystatechange=f,o.onerror=c,o.open("GET",t,!0);for(l in r)o.setRequestHeader(l,r[l]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new hr(t).extension),e=="blob"&&(o.responseType=s),Js(e)&&o.overrideMimeType("text/xml"),e=="binary"&&(o.responseType="arraybuffer"),o.send();function c(h){a.reject(h)}function f(){if(this.readyState===XMLHttpRequest.DONE){var h=!1;if((this.responseType===""||this.responseType==="document")&&(h=this.responseXML),this.status===200||this.status===0||h){var p;if(!this.response&&!h)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;h?p=this.responseXML:Js(e)?p=Hn(this.response,"text/xml"):e=="xhtml"?p=Hn(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?p=Hn(this.response,"text/html"):e=="json"?p=JSON.parse(this.response):e=="blob"?i?p=this.response:p=new Blob([this.response]):p=this.response,a.resolve(p)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}class l1{constructor(e,n){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,n?this.hooks=n:(this.hooks={},this.hooks.serialize=new Rn(this),this.hooks.content=new Rn(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var n=e||this.request||ea,r=new et,i=r.promise;return this.contents?r.resolve(this.contents):n(this.url).then((function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){r.resolve(this.contents)}).bind(this)).catch(function(s){r.reject(s)}),i}base(){return Jm(this.document,this)}render(e){var n=new et,r=n.promise;return this.output,this.load(e).then((function(i){var s=typeof navigator<"u"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer>"u"||a?o=zm:o=XMLSerializer;var u=new o;return this.output=u.serializeToString(i),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){n.resolve(this.output)}).bind(this)).catch(function(i){n.reject(i)}),r}find(e){var n=this,r=[],i=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),u=n.document.createRange(),l,c,f=-1,h,p=150;c!=-1;)c=o.indexOf(i,f+1),c!=-1&&(u=n.document.createRange(),u.setStart(a,c),u.setEnd(a,c+i.length),l=n.cfiFromRange(u),a.textContent.length<p?h=a.textContent:(h=a.textContent.substring(c-p/2,c+p/2),h="..."+h+"..."),r.push({cfi:l,excerpt:h})),f=c};return _o(n.document,function(a){s(a)}),r}search(e,n=5){if(typeof document.createTreeWalker>"u")return this.find(e);let r=[];const i=150,s=this,a=e.toLowerCase(),o=function(f){const E=f.reduce((x,v)=>x+v.textContent,"").toLowerCase().indexOf(a);if(E!=-1){const v=E+a.length;let d=0,m=0;if(E<f[0].length){let y;for(;d<f.length-1&&(m+=f[d].length,!(v<=m));)d+=1;let w=f[0],g=f[d],_=s.document.createRange();_.setStart(w,E);let C=f.slice(0,d).reduce((O,B)=>O+B.textContent.length,0);_.setEnd(g,C>v?v:v-C),y=s.cfiFromRange(_);let S=f.slice(0,d+1).reduce((O,B)=>O+B.textContent,"");S.length>i&&(S=S.substring(E-i/2,E+i/2),S="..."+S+"..."),r.push({cfi:y,excerpt:S})}}},u=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let l,c=[];for(;l=u.nextNode();)c.push(l),c.length==n&&(o(c.slice(0,n)),c=c.slice(1,n));return c.length>0&&o(c),r}reconcileLayoutSettings(e){var n={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var i=r.replace("rendition:",""),s=i.indexOf("-"),a,o;s!=-1&&(a=i.slice(0,s),o=i.slice(s+1),n[a]=o)}),n}cfiFromRange(e){return new tt(e,this.cfiBase).toString()}cfiFromElement(e){return new tt(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class c1{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Rn,this.hooks.content=new Rn,this.hooks.content.register(Jm),this.hooks.content.register(a1),this.hooks.content.register(o1),this.epubcfi=new tt,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,n,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,s)=>{var a=this.manifest[i.idref],o;i.index=s,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=n(i.href,!0),i.canonical=r(i.href)),a&&(i.href=a.href,i.url=n(i.href,!0),i.canonical=r(i.href),a.properties.length&&i.properties.push.apply(i.properties,a.properties)),i.linear==="yes"?(i.prev=(function(){let u=i.index;for(;u>0;){let l=this.get(u-1);if(l&&l.linear)return l;u-=1}}).bind(this),i.next=(function(){let u=i.index;for(;u<this.spineItems.length-1;){let l=this.get(u+1);if(l&&l.linear)return l;u+=1}}).bind(this)):(i.prev=function(){},i.next=function(){}),o=new l1(i,this.hooks),this.append(o)}),this.loaded=!0}get(e){var n=0;if(typeof e>"u")for(;n<this.spineItems.length;){let r=this.spineItems[n];if(r&&r.linear)break;n+=1}else this.epubcfi.isCfiString(e)?n=new tt(e).spinePos:typeof e=="number"||isNaN(e)===!1?n=e:typeof e=="string"&&e.indexOf("#")===0?n=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],n=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[n]||null}append(e){var n=this.spineItems.length;return e.index=n,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=n,this.spineByHref[encodeURI(e.href)]=n,this.spineByHref[e.href]=n,this.spineById[e.idref]=n,n}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(n,r){n.index=r}),0}remove(e){var n=this.spineItems.indexOf(e);if(n>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(n,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let n=this.get(e);if(n&&n.linear)return n;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let n=this.get(e);if(n&&n.linear)return n;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class Hc{constructor(e){this._q=[],this.context=e,this.tick=Wc,this.running=!1,this.paused=!1}enqueue(){var e,n,r,i=[].shift.call(arguments),s=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new et,n=e.promise,r={task:i,args:s,deferred:e,promise:n}):r={promise:i},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,n,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),n=e.task,n)return r=n.apply(this.context,e.args),r&&typeof r.then=="function"?r.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new et,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new et),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const Zo="0.3",Ya=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],we={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class eg{constructor(e,n,r){this.spine=e,this.request=n,this.pause=r||100,this.q=new Hc(this),this.epubcfi=new tt,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(n){n.linear&&this.q.enqueue(this.process.bind(this),n)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(n){var r=new et,i=this.parse(n,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(i),this.pause),r.promise}).bind(this))}parse(e,n,r){var i=[],s,a=e.ownerDocument,o=ht(a,"body"),u=0,l,c=r||this.break,f=function(h){var p=h.length,E,x=0;if(h.textContent.trim().length===0)return!1;for(u==0&&(s=this.createRange(),s.startContainer=h,s.startOffset=0),E=c-u,E>p&&(u+=p,x=p);x<p;)if(E=c-u,u===0&&(x+=1,s=this.createRange(),s.startContainer=h,s.startOffset=x),x+E>=p)u+=p-x,x=p;else{x+=E,s.endContainer=h,s.endOffset=x;let v=new tt(s,n).toString();i.push(v),u=0}l=h};if(_o(o,f.bind(this)),s&&s.startContainer&&l){s.endContainer=l,s.endOffset=l.length;let h=new tt(s,n).toString();i.push(h),u=0}return i}generateFromWords(e,n,r){var i=e?new tt(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(s){s.linear&&(i?s.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),s,n,i,r):this.q.enqueue(this.processWords.bind(this),s,n,i,r))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,n,r,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then((function(s){var a=new et,o=this.parseWords(s,e,n,r),u=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=i?o.slice(0,u):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,n,r,i){var s=n.cfiBase,a=[],o=e.ownerDocument,u=ht(o,"body"),l=r,c=i?i.spinePos!==n.index:!0,f;i&&n.index===i.spinePos&&(f=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var h=function(p){if(!c)if(p===f)c=!0;else return!1;if(p.textContent.length<10&&p.textContent.trim().length===0)return!1;var E=this.countWords(p.textContent),x,v=0;if(E===0)return!1;for(x=l-this._wordCounter,x>E&&(this._wordCounter+=E,v=E);v<E;)if(x=l-this._wordCounter,v+x>=E)this._wordCounter+=E-v,v=E;else{v+=x;let d=new tt(p,s);a.push({cfi:d.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return _o(u,h.bind(this)),a}locationFromCfi(e){let n;return tt.prototype.isCfiString(e)&&(e=new tt(e)),this._locations.length===0?-1:(n=Qi(e,this._locations,this.epubcfi.compare),n>this.total?this.total:n)}percentageFromCfi(e){if(this._locations.length===0)return null;var n=this.locationFromCfi(e);return this.percentageFromLocation(n)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var n=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(n=this._locations[e]),n}cfiFromPercentage(e){let n;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new tt(this._locations[this.total]);return r.collapse(),r.toString()}return n=Math.ceil(this.total*e),this.cfiFromLocation(n)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var n;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(n=this.locationFromCfi(e),this._current=n):n=e,this.emit(we.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(n)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Yn(eg.prototype);class f1{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var n;if(!e)throw new Error("Container File Not Found");if(n=ht(e,"rootfile"),!n)throw new Error("No RootFile Found");this.packagePath=n.getAttribute("full-path"),this.directory=kr.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Hh{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var n,r,i;if(!e)throw new Error("Package File Not Found");if(n=ht(e,"metadata"),!n)throw new Error("No Metadata Found");if(r=ht(e,"manifest"),!r)throw new Error("No Manifest Found");if(i=ht(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=Hm(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(n),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var n={};return n.title=this.getElementText(e,"title"),n.creator=this.getElementText(e,"creator"),n.description=this.getElementText(e,"description"),n.pubdate=this.getElementText(e,"date"),n.publisher=this.getElementText(e,"publisher"),n.identifier=this.getElementText(e,"identifier"),n.language=this.getElementText(e,"language"),n.rights=this.getElementText(e,"rights"),n.modified_date=this.getPropertyText(e,"dcterms:modified"),n.layout=this.getPropertyText(e,"rendition:layout"),n.orientation=this.getPropertyText(e,"rendition:orientation"),n.flow=this.getPropertyText(e,"rendition:flow"),n.viewport=this.getPropertyText(e,"rendition:viewport"),n.media_active_class=this.getPropertyText(e,"media:active-class"),n.spread=this.getPropertyText(e,"rendition:spread"),n}parseManifest(e){var n={},r=fr(e,"item"),i=Array.prototype.slice.call(r);return i.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",u=s.getAttribute("media-type")||"",l=s.getAttribute("media-overlay")||"",c=s.getAttribute("properties")||"";n[a]={href:o,type:u,overlay:l,properties:c.length?c.split(" "):[]}}),n}parseSpine(e,n){var r=[],i=fr(e,"itemref"),s=Array.prototype.slice.call(i);return s.forEach(function(a,o){var u=a.getAttribute("idref"),l=a.getAttribute("properties")||"",c=l.length?l.split(" "):[],f={id:a.getAttribute("id"),idref:u,linear:a.getAttribute("linear")||"yes",properties:c,index:o};r.push(f)}),r}findUniqueIdentifier(e){var n=e.documentElement.getAttribute("unique-identifier");if(!n)return"";var r=e.getElementById(n);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var n=Bi(e,"item",{properties:"nav"});return n?n.getAttribute("href"):!1}findNcxPath(e,n){var r=Bi(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return r||(i=n.getAttribute("toc"),i&&(r=e.querySelector(`#${i}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var n=ht(e,"package");n.getAttribute("version");var r=Bi(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var i=Bi(e,"meta",{name:"cover"});if(i){var s=i.getAttribute("content"),a=e.getElementById(s);return a?a.getAttribute("href"):""}else return!1}getElementText(e,n){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",n),i;return!r||r.length===0?"":(i=r[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,n){var r=Bi(e,"meta",{property:n});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let n=e.readingOrder||e.spine;return this.spine=n.map((r,i)=>(r.index=i,r.linear=r.linear||"yes",r)),e.resources.forEach((r,i)=>{this.manifest[i]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,i)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Nu{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let n=e.nodeType,r,i;n&&(r=ht(e,"html"),i=ht(e,"ncx")),n?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var n,r=0;r<e.length;r++)n=e[r],n.href&&(this.tocByHref[n.href]=r),n.id&&(this.tocById[n.id]=r),this.length++,n.subitems.length&&this.unpack(n.subitems)}get(e){var n;return e?(e.indexOf("#")===0?n=this.tocById[e.substring(1)]:e in this.tocByHref&&(n=this.tocByHref[e]),this.getByIndex(e,n,this.toc)):this.toc}getByIndex(e,n,r){if(r.length===0)return;const i=r[n];if(i&&(e===i.id||e===i.href))return i;{let s;for(let a=0;a<r.length&&(s=this.getByIndex(e,n,r[a].subitems),!s);++a);return s}}landmark(e){var n;return e?(n=this.landmarksByType[e],this.landmarks[n]):this.landmarks}parseNav(e){var n=wo(e,"nav","toc"),r=[];if(!n)return r;let i=Pi(n,"ol",!0);return i&&(r=this.parseNavList(i)),r}parseNavList(e,n){const r=[];if(!e||!e.children)return r;for(let i=0;i<e.children.length;i++){const s=this.navItem(e.children[i],n);s&&r.push(s)}return r}navItem(e,n){let r=e.getAttribute("id")||void 0,i=Pi(e,"a",!0)||Pi(e,"span",!0);if(!i)return;let s=i.getAttribute("href")||"";r||(r=s);let a=i.textContent||"",o=[],u=Pi(e,"ol",!0);return u&&(o=this.parseNavList(u,r)),{id:r,href:s,label:a,subitems:o,parent:n}}parseLandmarks(e){var n=wo(e,"nav","landmarks"),r=n?fr(n,"li"):[],i=r.length,s,a=[],o;if(!r||i===0)return a;for(s=0;s<i;++s)o=this.landmarkItem(r[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let n=Pi(e,"a",!0);if(!n)return;let r=n.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=n.getAttribute("href")||"",s=n.textContent||"";return{href:i,label:s,type:r}}parseNcx(e){var n=fr(e,"navPoint"),r=n.length,i,s={},a=[],o,u;if(!n||r===0)return a;for(i=0;i<r;++i)o=this.ncxItem(n[i]),s[o.id]=o,o.parent?(u=s[o.parent],u.subitems.push(o)):a.push(o);return a}ncxItem(e){var n=e.getAttribute("id")||!1,r=ht(e,"content"),i=r.getAttribute("src"),s=ht(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],u=e.parentNode,l;return u&&(u.nodeName==="navPoint"||u.nodeName.split(":").slice(-1)[0]==="navPoint")&&(l=u.getAttribute("id")),{id:n,href:i,label:a,subitems:o,parent:l}}load(e){return e.map(n=>(n.label=n.title,n.subitems=n.children?this.load(n.children):[],n))}forEach(e){return this.toc.forEach(e)}}var ps={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},h1=function(){var t,e,n,r,i={};for(t in ps)if(ps.hasOwnProperty(t)){for(e in ps[t])if(ps[t].hasOwnProperty(e))if(n=ps[t][e],typeof n=="string")i[n]=t+"/"+e;else for(r=0;r<n.length;r++)i[n[r]]=t+"/"+e}return i}(),d1="text/plain";function p1(t){return t&&h1[t.split(".").pop().toLowerCase()]||d1}const qi={lookup:p1};class m1{constructor(e,n){this.settings={replacements:n&&n.replacements||"base64",archive:n&&n.archive,resolver:n&&n.resolver,request:n&&n.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(n){return e[n]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var n=new On(e),r=qi.lookup(n.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>Zm(i)).then(i=>Pl(i,r)):this.settings.request(e,"blob").then(i=>bo(i,r))}replacements(){if(this.settings.replacements==="none")return new Promise((function(n){n(this.urls)}).bind(this));var e=this.urls.map(n=>{var r=this.settings.resolver(n);return this.createUrl(r).catch(i=>(console.error(i),null))});return Promise.all(e).then(n=>(this.replacementUrls=n.filter(r=>typeof r=="string"),n))}replaceCss(e,n){var r=[];return e=e||this.settings.archive,n=n||this.settings.resolver,this.cssUrls.forEach((function(i){var s=this.createCssFile(i,e,n).then((function(a){var o=this.urls.indexOf(i);o>-1&&(this.replacementUrls[o]=a)}).bind(this));r.push(s)}).bind(this)),Promise.all(r)}createCssFile(e){var n;if(kr.isAbsolute(e))return new Promise(function(a){a()});var r=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(r):i=this.settings.request(r,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),u=new hr(r).relative(o);return u});return i?i.then(a=>(a=$h(a,s,this.replacementUrls),this.settings.replacements==="base64"?n=Pl(a,"text/css"):n=bo(a,"text/css"),n),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,n){return n=n||this.settings.resolver,this.urls.map((function(r){var i=n(r),s=new hr(e).relative(i);return s}).bind(this))}get(e){var n=this.urls.indexOf(e);if(n!==-1)return this.replacementUrls.length?new Promise((function(r,i){r(this.replacementUrls[n])}).bind(this)):this.createUrl(e)}substitute(e,n){var r;return n?r=this.relativeTo(n):r=this.urls,$h(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class Bu{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new tt,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var n=ht(e,"html"),r=ht(e,"ncx");if(n)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var n=wo(e,"nav","page-list"),r=n?fr(n,"li"):[],i=r.length,s,a=[],o;if(!r||i===0)return a;for(s=0;s<i;++s)o=this.item(r[s]),a.push(o);return a}parseNcx(e){var n=[],r=0,i,s,a,o=0;if(s=ht(e,"pageList"),!s||(a=fr(s,"pageTarget"),o=a.length,!a||a.length===0))return n;for(r=0;r<o;++r)i=this.ncxItem(a[r]),n.push(i);return n}ncxItem(e){var n=ht(e,"navLabel"),r=ht(n,"text"),i=r.textContent,s=ht(e,"content"),a=s.getAttribute("src"),o=parseInt(i,10);return{href:a,page:o}}item(e){var n=ht(e,"a"),r=n.getAttribute("href")||"",i=n.textContent||"",s=parseInt(i),a=r.indexOf("epubcfi"),o,u,l;return a!=-1?(o=r.split("#"),u=o[0],l=o.length>1?o[1]:!1,{cfi:l,href:r,packageUrl:u,page:s}):{href:r,page:s}}process(e){e.forEach(function(n){this.pages.push(n.page),n.cfi&&this.locations.push(n.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var n=-1;if(this.locations.length===0)return-1;var r=go(e,this.locations,this.epubcfi.compare);return r!=-1?n=this.pages[r]:(r=Qi(e,this.locations,this.epubcfi.compare),n=r-1>=0?this.pages[r-1]:this.pages[0],n!==void 0||(n=-1)),n}cfiFromPage(e){var n=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(n=this.locations[r]),n}pageFromPercentage(e){var n=Math.round(this.totalPages*e);return n}percentageFromPage(e){var n=(e-this.firstPage)/this.totalPages;return Math.round(n*1e3)/1e3}percentageFromCfi(e){var n=this.pageFromCfi(e),r=this.percentageFromPage(n);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class tg{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,n){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),n>=0&&(this._minSpreadWidth=n),this._spread}calculate(e,n,r){var i=1,s=r||0,a=e,o=n,u=Math.floor(a/12),l,c,f,h;this._spread&&a>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=u%2===0?u:u-1),this.name==="pre-paginated"&&(s=0),i>1?(l=a/i-s,f=l+s):(l=a,f=a),this.name==="pre-paginated"&&i>1&&(a=l),c=l*i+s,h=a,this.width=a,this.height=o,this.spreadWidth=c,this.pageWidth=f,this.delta=h,this.columnWidth=l,this.gap=s,this.divisor=i,this.update({width:a,height:o,spreadWidth:c,pageWidth:f,delta:h,columnWidth:l,gap:s,divisor:i})}format(e,n,r){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,n):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,n){let r,i;return this.name==="pre-paginated"?(r=1,i=1):this._flow==="paginated"?(n=n||this.delta,r=Math.ceil(e/n),i=r*this.divisor):(n=n||this.height,r=Math.ceil(e/n),i=r),{spreads:r,pages:i}}update(e){if(Object.keys(e).forEach(n=>{this.props[n]===e[n]&&delete e[n]}),Object.keys(e).length>0){let n=Vt(this.props,e);this.emit(we.LAYOUT.UPDATED,n,e)}}}Yn(tg.prototype);class g1{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var n in e)e.hasOwnProperty(n)&&(typeof e[n]=="string"?this.registerUrl(n,e[n]):this.registerRules(n,e[n]))}registerCss(e,n){this._themes[e]={serialized:n},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,n){var r=new On(n);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,n){this._themes[e]={rules:n},(this._injected[e]||e=="default")&&this.update(e)}select(e){var n=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(i=>{i.removeClass(n),i.addClass(e)})}update(e){var n=this.rendition.getContents();n.forEach(r=>{this.add(e,r)})}inject(e){var n=[],r=this._themes,i;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(i=r[s],(i.rules&&Object.keys(i.rules).length>0||i.url&&n.indexOf(i.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,n){var r=this._themes[e];!r||!n||(r.url?n.addStylesheet(r.url):r.serialized?(n.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(n.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,n,r){var i=this.rendition.getContents();this._overrides[e]={value:n,priority:r===!0},i.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var n=this.rendition.getContents();delete this._overrides[e],n.forEach(r=>{r.css(e)})}overrides(e){var n=this._overrides;for(var r in n)n.hasOwnProperty(r)&&e.css(r,n[r].value,n[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class Eo{constructor(e,n,r,i=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=n||"ltr",this._dev=i}section(e){var n=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,n);return r}page(e,n,r,i){var s=e&&e.document?e.document.body:!1,a;if(s){if(a=this.rangePairToCfiPair(n,{start:this.findStart(s,r,i),end:this.findEnd(s,r,i)}),this._dev===!0){let o=e.document,u=new tt(a.start).toRange(o),l=new tt(a.end).toRange(o),c=o.defaultView.getSelection(),f=o.createRange();c.removeAllRanges(),f.setStart(u.startContainer,u.startOffset),f.setEnd(l.endContainer,l.endOffset),c.addRange(f)}return a}}walk(e,n){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(u){return u.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=r.acceptNode;i.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),a,o;(a=s.nextNode())&&(o=n(a),!o););return o}}findRanges(e){for(var n=[],r=e.contents.scrollWidth(),i=Math.ceil(r/this.layout.spreadWidth),s=i*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,u,l,c=0;c<s.pages;c++)u=(a+o)*c,l=a*(c+1)+o*c,n.push({start:this.findStart(e.document.body,u,l),end:this.findEnd(e.document.body,u,l)});return n}findStart(e,n,r){for(var i=[e],s,a,o=e;i.length;)if(s=i.shift(),a=this.walk(s,u=>{var l,c,f,h,p;if(p=Bl(u),this.horizontal&&this.direction==="ltr"){if(l=this.horizontal?p.left:p.top,c=this.horizontal?p.right:p.bottom,l>=n&&l<=r)return u;if(c>n)return u;o=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=p.left,c=p.right,c<=r&&c>=n)return u;if(l<r)return u;o=u,i.push(u)}else{if(f=p.top,h=p.bottom,f>=n&&f<=r)return u;if(h>n)return u;o=u,i.push(u)}}),a)return this.findTextStartRange(a,n,r);return this.findTextStartRange(o,n,r)}findEnd(e,n,r){for(var i=[e],s,a=e,o;i.length;)if(s=i.shift(),o=this.walk(s,u=>{var l,c,f,h,p;if(p=Bl(u),this.horizontal&&this.direction==="ltr"){if(l=Math.round(p.left),c=Math.round(p.right),l>r&&a)return a;if(c>r)return u;a=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=Math.round(this.horizontal?p.left:p.top),c=Math.round(this.horizontal?p.right:p.bottom),c<n&&a)return a;if(l<n)return u;a=u,i.push(u)}else{if(f=Math.round(p.top),h=Math.round(p.bottom),f>r&&a)return a;if(h>r)return u;a=u,i.push(u)}}),o)return this.findTextEndRange(o,n,r);return this.findTextEndRange(a,n,r)}findTextStartRange(e,n,r){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c=0;c<i.length;c++)if(s=i[c],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=n)return s}else if(this.horizontal&&this.direction==="rtl"){if(l=a.right,l<=r)return s}else if(u=a.top,u>=n)return s;return i[0]}findTextEndRange(e,n,r){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c,f,h=0;h<i.length;h++){if(a=i[h],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(u=o.left,l=o.right,u>r&&s)return s;if(l>r)return a}else if(this.horizontal&&this.direction==="rtl"){if(u=o.left,l=o.right,l<n&&s)return s;if(u<n)return a}else{if(c=o.top,f=o.bottom,c>r&&s)return s;if(f>r)return a}s=a}return i[i.length-1]}splitTextNodeIntoRanges(e,n){var r=[],i=e.textContent||"",s=i.trim(),a,o=e.ownerDocument,u=n||" ",l=s.indexOf(u);if(l===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,l),r.push(a),a=!1;l!=-1;)l=s.indexOf(u,l+1),l>0&&(a&&(a.setEnd(e,l),r.push(a)),a=o.createRange(),a.setStart(e,l+1));return a&&(a.setEnd(e,s.length),r.push(a)),r}rangePairToCfiPair(e,n){var r=n.start,i=n.end;r.collapse(!0),i.collapse(!1);let s=new tt(r,e).toString(),a=new tt(i,e).toString();return{start:s,end:a}}rangeListToCfiList(e,n){for(var r=[],i,s=0;s<n.length;s++)i=this.rangePairToCfiPair(e,n[s]),r.push(i);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const ng=typeof navigator<"u",v1=ng&&/Chrome/.test(navigator.userAgent),Vh=ng&&!v1&&/AppleWebKit/.test(navigator.userAgent),y1=1;class Vc{constructor(e,n,r,i){this.epubcfi=new tt,this.document=e,this.documentElement=this.document.documentElement,this.content=n||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",Zo),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return Ya}width(e){var n=this.content;return e&&Dt(e)&&(e=e+"px"),e&&(n.style.width=e),parseInt(this.window.getComputedStyle(n).width)}height(e){var n=this.content;return e&&Dt(e)&&(e=e+"px"),e&&(n.style.height=e),parseInt(this.window.getComputedStyle(n).height)}contentWidth(e){var n=this.content||this.document.body;return e&&Dt(e)&&(e=e+"px"),e&&(n.style.width=e),parseInt(this.window.getComputedStyle(n).width)}contentHeight(e){var n=this.content||this.document.body;return e&&Dt(e)&&(e=e+"px"),e&&(n.style.height=e),parseInt(this.window.getComputedStyle(n).height)}textWidth(){let e,n,r=this.document.createRange(),i=this.content||this.document.body,s=vo(i);return r.selectNodeContents(i),e=r.getBoundingClientRect(),n=e.width,s&&s.width&&(n+=s.width),Math.round(n)}textHeight(){let e,n,r=this.document.createRange(),i=this.content||this.document.body;return r.selectNodeContents(i),e=r.getBoundingClientRect(),n=e.bottom,Math.round(n)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,n,r){var i=this.content||this.document.body;return n?i.style.setProperty(e,n,r?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var n=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],s={};if(n&&n.hasAttribute("content")){let a=n.getAttribute("content"),o=a.match(/width\s*=\s*([^,]*)/),u=a.match(/height\s*=\s*([^,]*)/),l=a.match(/initial-scale\s*=\s*([^,]*)/),c=a.match(/minimum-scale\s*=\s*([^,]*)/),f=a.match(/maximum-scale\s*=\s*([^,]*)/),h=a.match(/user-scalable\s*=\s*([^,]*)/);o&&o.length&&typeof o[1]<"u"&&(r.width=o[1]),u&&u.length&&typeof u[1]<"u"&&(r.height=u[1]),l&&l.length&&typeof l[1]<"u"&&(r.scale=l[1]),c&&c.length&&typeof c[1]<"u"&&(r.minimum=c[1]),f&&f.length&&typeof f[1]<"u"&&(r.maximum=f[1]),h&&h.length&&typeof h[1]<"u"&&(r.scalable=h[1])}return s=$m(e||{},r),e&&(s.width&&i.push("width="+s.width),s.height&&i.push("height="+s.height),s.scale&&i.push("initial-scale="+s.scale),s.scalable==="no"?(i.push("minimum-scale="+s.scale),i.push("maximum-scale="+s.scale),i.push("user-scalable="+s.scalable)):(s.scalable&&i.push("user-scalable="+s.scalable),s.minimum&&i.push("minimum-scale="+s.minimum),s.maximum&&i.push("minimum-scale="+s.maximum)),n||(n=this.document.createElement("meta"),n.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(n)),n.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(we.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),n=this.textHeight();(e!=this._size.width||n!=this._size.height)&&(this._size={width:e,height:n},this.onResize&&this.onResize(this._size),this.emit(we.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,n=(function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),r=0;r<e.length;r+=1){var i;try{i=e[r].cssRules}catch{return}if(!i)return;for(var s=0;s<i.length;s+=1)if(i[s].media){var a=this.window.matchMedia(i[s].media.mediaText);a.addListener(n)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(n=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),n,r=0;r<e.length;r++)n=e[r],typeof n.naturalWidth<"u"&&n.naturalWidth===0&&(n.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,n){var r,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let s=new tt(e).toRange(this.document,n);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),i.left=r.left,i.top=r.top;else if(Vh){let a=s.startContainer,o=new Range;try{a.nodeType===y1?r=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),r=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),r=o.getBoundingClientRect()):r=a.parentNode.getBoundingClientRect()}catch(u){console.error(u,u.stack)}}else r=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Vh){let o=new Range;o.selectNode(a),r=o.getBoundingClientRect()}else r=a.getBoundingClientRect()}return r&&(i.left=r.left,i.top=r.top),i}addStylesheet(e){return new Promise((function(n,r){var i,s=!1;if(!this.document){n(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){n(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{n(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(e){var n;return e="epubjs-inserted-css-"+(e||""),this.document?(n=this.document.getElementById(e),n||(n=this.document.createElement("style"),n.id=e,this.document.head.appendChild(n)),n):!1}addStylesheetCss(e,n){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(n),r.innerHTML=e,!0}addStylesheetRules(e,n){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(n).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,s=e.length;i<s;i++){var a=1,o=e[i],u=e[i][0],l="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var c=o.length;a<c;a++){var f=o[a];l+=f[0]+":"+f[1]+(f[2]?" !important":"")+`;
`}r.insertRule(u+"{"+l+"}",r.cssRules.length)}else Object.keys(e).forEach(p=>{const E=e[p];if(Array.isArray(E))E.forEach(x=>{const d=Object.keys(x).map(m=>`${m}:${x[m]}`).join(";");r.insertRule(`${p}{${d}}`,r.cssRules.length)});else{const v=Object.keys(E).map(d=>`${d}:${E[d]}`).join(";");r.insertRule(`${p}{${v}}`,r.cssRules.length)}})}addScript(e){return new Promise((function(n,r){var i,s=!1;if(!this.document){n(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){n(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(e){var n;this.document&&(n=this.content||this.document.body,n&&n.classList.add(e))}removeClass(e){var n;this.document&&(n=this.content||this.document.body,n&&n.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),Ya.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(Ya.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var n=this.window.getSelection();this.triggerSelectedEvent(n)}).bind(this),250)}triggerSelectedEvent(e){var n,r;e&&e.rangeCount>0&&(n=e.getRangeAt(0),n.collapsed||(r=new tt(n,this.cfiBase).toString(),this.emit(we.CONTENTS.SELECTED,r),this.emit(we.CONTENTS.SELECTED_RANGE,n)))}range(e,n){var r=new tt(e);return r.toRange(this.document,n)}cfiFromRange(e,n){return new tt(e,this.cfiBase,n).toString()}cfiFromNode(e,n){return new tt(e,this.cfiBase,n).toString()}map(e){var n=new Eo(e);return n.section()}size(e,n){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),n>=0&&(this.height(n),r.height=n),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,n,r,i,s){let a=Ni("column-axis"),o=Ni("column-gap"),u=Ni("column-width"),l=Ni("column-fill"),f=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&f==="horizontal"&&this.direction(s),this.width(e),this.height(n),this.viewport({width:e,height:n,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),f==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(l,"auto"),this.css(o,i+"px"),this.css(u,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,n,r){var i="scale("+e+")",s="";this.css("transform-origin","top left"),(n>=0||r>=0)&&(s=" translate("+(n||0)+"px, "+(r||0)+"px )"),this.css("transform",i+s)}fit(e,n,r){var i=this.viewport(),s=parseInt(i.width),a=parseInt(i.height),o=e/s,u=n/a,l=o<u?o:u;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(l,0,0),this.css("background-size",s*l+"px "+a*l+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var c=e-s*l;this.css("margin-left",c+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,n,r,i,s){var a=new Eo(n,s);return a.page(this,e,r,i)}linksHandler(){u1(this.content,e=>{this.emit(we.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let n=Ni("writing-mode");return e&&this.documentElement&&(this.documentElement.style[n]=e),this.window.getComputedStyle(this.documentElement)[n]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,n){return navigator.epubReadingSystem={name:e,version:n,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Yn(Vc.prototype);class b1{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,n,r,i,s,a){let o=encodeURI(n+e),l=new tt(n).spinePos,c=new rg({type:e,cfiRange:n,data:r,sectionIndex:l,cb:i,className:s,styles:a});return this._annotations[o]=c,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(o):this._annotationsBySectionIndex[l]=[o],this.rendition.views().forEach(h=>{c.sectionIndex===h.index&&c.attach(h)}),c}remove(e,n){let r=encodeURI(e+n);if(r in this._annotations){let i=this._annotations[r];if(n&&i.type!==n)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,r),i.sectionIndex===a.index&&i.detach(a)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,n){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==n)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,n,r,i,s){return this.add("highlight",e,n,r,i,s)}underline(e,n,r,i,s){return this.add("underline",e,n,r,i,s)}mark(e,n,r){return this.add("mark",e,n,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let n=e.index;n in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[n].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let n=e.index;n in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[n].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class rg{constructor({type:e,cfiRange:n,data:r,sectionIndex:i,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=n,this.data=r,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:n,data:r,type:i,mark:s,cb:a,className:o,styles:u}=this,l;return i==="highlight"?l=e.highlight(n,r,a,o,u):i==="underline"?l=e.underline(n,r,a,o,u):i==="mark"&&(l=e.mark(n,r,a)),this.mark=l,this.emit(we.ANNOTATION.ATTACH,l),l}detach(e){let{cfiRange:n,type:r}=this,i;return e&&(r==="highlight"?i=e.unhighlight(n):r==="underline"?i=e.ununderline(n):r==="mark"&&(i=e.unmark(n))),this.mark=void 0,this.emit(we.ANNOTATION.DETACH,i),i}text(){}}Yn(rg.prototype);var nr={},Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.createElement=ig;function ig(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}Xo.default={createElement:ig};var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.proxyMouse=sg;ha.clone=ag;ha.default={proxyMouse:sg};function sg(t,e){function n(a){for(var o=e.length-1;o>=0;o--){var u=e[o],l=a.clientX,c=a.clientY;if(a.touches&&a.touches.length&&(l=a.touches[0].clientX,c=a.touches[0].clientY),!!_1(u,t,l,c)){u.dispatchEvent(ag(a));break}}}if(t.nodeName==="iframe"||t.nodeName==="IFRAME")try{this.target=t.contentDocument}catch{this.target=t}else this.target=t;for(var r=["mouseup","mousedown","click","touchstart"],i=0;i<r.length;i++){var s=r[i];this.target.addEventListener(s,function(a){return n(a)},!1)}}function ag(t){var e=Object.assign({},t,{bubbles:!1});try{return new MouseEvent(t.type,e)}catch{var n=document.createEvent("MouseEvents");return n.initMouseEvent(t.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n}}function _1(t,e,n,r){var i=e.getBoundingClientRect();function s(c,f,h){var p=c.top-i.top,E=c.left-i.left,x=p+c.height,v=E+c.width;return p<=h&&E<=f&&x>h&&v>f}var a=t.getBoundingClientRect();if(!s(a,n,r))return!1;for(var o=t.getClientRects(),u=0,l=o.length;u<l;u++)if(s(o[u],n,r))return!0;return!1}var xo,Kc;Object.defineProperty(nr,"__esModule",{value:!0});var og=nr.Underline=Kc=nr.Highlight=nr.Mark=xo=nr.Pane=void 0,w1=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,n,r)}else{if("value"in i)return i.value;var a=i.get;return a===void 0?void 0:a.call(r)}},Qo=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),E1=Xo,ta=ug(E1),x1=ha,C1=ug(x1);function ug(t){return t&&t.__esModule?t:{default:t}}function lg(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Jo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}xo=nr.Pane=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;Jo(this,t),this.target=e,this.element=ta.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),C1.default.proxyMouse(this.target,this.marks),this.container=n,this.container.appendChild(this.element),this.render()}return Qo(t,[{key:"addMark",value:function(n){var r=ta.default.createElement("g");return this.element.appendChild(r),n.bind(r,this.container),this.marks.push(n),n.render(),n}},{key:"removeMark",value:function(n){var r=this.marks.indexOf(n);if(r!==-1){var i=n.unbind();this.element.removeChild(i),this.marks.splice(r,1)}}},{key:"render",value:function(){T1(this.element,S1(this.target,this.container));var n=!0,r=!1,i=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(n=(a=s.next()).done);n=!0){var o=a.value;o.render()}}catch(u){r=!0,i=u}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}}]),t}();var A1=nr.Mark=function(){function t(){Jo(this,t),this.element=null}return Qo(t,[{key:"bind",value:function(n,r){this.element=n,this.container=r}},{key:"unbind",value:function(){var n=this.element;return this.element=null,n}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(n){this.element&&this.element.dispatchEvent(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var n=[],r=this.element.firstChild;r;)n.push(r.getBoundingClientRect()),r=r.nextSibling;return n}},{key:"filteredRanges",value:function(){var n=Array.from(this.range.getClientRects());return n.filter(function(r){for(var i=0;i<n.length;i++){if(n[i]===r)return!0;var s=k1(n[i],r);if(s)return!1}return!0})}}]),t}(),D1=Kc=nr.Highlight=function(t){cg(e,t);function e(n,r,i,s){Jo(this,e);var a=lg(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=n,a.className=r,a.data=i||{},a.attributes=s||{},a}return Qo(e,[{key:"bind",value:function(r,i){w1(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,i);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=i.length;o<u;o++){var l=i[o],c=ta.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),r.appendChild(c)}this.element.appendChild(r)}}]),e}(A1);og=nr.Underline=function(t){cg(e,t);function e(n,r,i,s){return Jo(this,e),lg(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,i,s))}return Qo(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=i.length;o<u;o++){var l=i[o],c=ta.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),c.setAttribute("fill","none");var f=ta.default.createElement("line");f.setAttribute("x1",l.left-s.left+a.left),f.setAttribute("x2",l.left-s.left+a.left+l.width),f.setAttribute("y1",l.top-s.top+a.top+l.height-1),f.setAttribute("y2",l.top-s.top+a.top+l.height-1),f.setAttribute("stroke-width",1),f.setAttribute("stroke","black"),f.setAttribute("stroke-linecap","square"),r.appendChild(c),r.appendChild(f)}this.element.appendChild(r)}}]),e}(D1);function S1(t,e){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left,height:t.scrollHeight,width:t.scrollWidth}}function T1(t,e){t.style.setProperty("top",e.top+"px","important"),t.style.setProperty("left",e.left+"px","important"),t.style.setProperty("height",e.height+"px","important"),t.style.setProperty("width",e.width+"px","important")}function k1(t,e){return e.right<=t.right&&e.left>=t.left&&e.top>=t.top&&e.bottom<=t.bottom}class fg{constructor(e,n){this.settings=Vt({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},n||{}),this.id="epubjs-view-"+Go(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new tt,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var n=document.createElement("div");return n.classList.add("epub-view"),n.style.height="0px",n.style.width="0px",n.style.overflow="hidden",n.style.position="relative",n.style.display="block",e&&e=="horizontal"?n.style.flex="none":n.style.flex="initial",n}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Va(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,n){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(r){return this.load(r)}).bind(this)).then((function(){let r=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=r.indexOf("vertical")===0?"horizontal":"vertical":i=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(we.VIEWS.AXIS,i),this.setWritingMode(r),this.emit(we.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}).bind(this),(function(r){return this.emit(we.VIEWS.LOAD_ERROR,r),new Promise((i,s)=>{s(r)})}).bind(this)).then((function(){this.emit(we.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,n){var r=e||this.settings.width,i=n||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,i):this.settings.axis==="horizontal"?this.lock("height",r,i):this.lock("width",r,i),this.settings.width=r,this.settings.height=i}lock(e,n,r){var i=vo(this.element),s;this.iframe?s=vo(this.iframe):s={width:0,height:0},e=="width"&&Dt(n)&&(this.lockedWidth=n-i.width-s.width),e=="height"&&Dt(r)&&(this.lockedHeight=r-i.height-s.height),e==="both"&&Dt(n)&&Dt(r)&&(this.lockedWidth=n-i.width-s.width,this.lockedHeight=r-i.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var n=this.lockedWidth,r=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(n=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(n=this.contents.textWidth(),n%this.layout.pageWidth>0&&(n=Math.ceil(n/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=n/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(n+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||n!=this._width||r!=this._height)&&this.reframe(n,r),this._expanding=!1)}reframe(e,n){var r;Dt(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),Dt(n)&&(this.element.style.height=n+"px",this.iframe.style.height=n+"px",this._height=n);let i=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?n-this.prevBounds.height:n;r={width:e,height:n,widthDelta:i,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,r),this.emit(we.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=Va(this.element)}load(e){var n=new et,r=n.promise;if(!this.iframe)return n.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=(function(s){this.onLoad(s,n)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=bo(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return n.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,n){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Vc(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(we.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(we.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),n.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var n=new et;return this.displayed?n.resolve(this):this.render(e).then((function(){this.emit(we.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,n.resolve(this)}).bind(this),function(r){n.reject(r,this)}),n.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(we.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(we.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var n=this.contents.locationOf(e,this.settings.ignoreClass);return{left:n.left,top:n.top}}onDisplayed(e){}onResize(e,n){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=Va(this.element)),this.elementBounds}highlight(e,n={},r,i="epubjs-hl",s={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),u=()=>{this.emit(we.VIEWS.MARK_CLICKED,e,n)};n.epubcfi=e,this.pane||(this.pane=new xo(this.iframe,this.element));let l=new Kc(o,i,n,a),c=this.pane.addMark(l);return this.highlights[e]={mark:c,element:c.element,listeners:[u,r]},c.element.setAttribute("ref",i),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),r&&(c.element.addEventListener("click",r),c.element.addEventListener("touchstart",r)),c}underline(e,n={},r,i="epubjs-ul",s={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),u=()=>{this.emit(we.VIEWS.MARK_CLICKED,e,n)};n.epubcfi=e,this.pane||(this.pane=new xo(this.iframe,this.element));let l=new og(o,i,n,a),c=this.pane.addMark(l);return this.underlines[e]={mark:c,element:c.element,listeners:[u,r]},c.element.setAttribute("ref",i),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),r&&(c.element.addEventListener("click",r),c.element.addEventListener("touchstart",r)),c}mark(e,n={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let s=i.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=l=>{this.emit(we.VIEWS.MARK_CLICKED,e,n)};i.collapsed&&s.nodeType===1?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(a));let u=this.document.createElement("a");return u.setAttribute("ref","epubjs-mk"),u.style.position="absolute",u.dataset.epubcfi=e,n&&Object.keys(n).forEach(l=>{u.dataset[l]=n[l]}),r&&(u.addEventListener("click",r),u.addEventListener("touchstart",r)),u.addEventListener("click",o),u.addEventListener("touchstart",o),this.placeMark(u,i),this.element.appendChild(u),this.marks[e]={element:u,range:i,listeners:[o,r]},a}placeMark(e,n){let r,i,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=n.getBoundingClientRect();r=o.top,i=o.right}else{let o=n.getClientRects(),u;for(var a=0;a!=o.length;a++)u=o[a],(!s||u.left<s)&&(s=u.left,i=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=u.top)}e.style.top=`${r}px`,e.style.left=`${i}px`}unhighlight(e){let n;e in this.highlights&&(n=this.highlights[e],this.pane.removeMark(n.mark),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let n;e in this.underlines&&(n=this.underlines[e],this.pane.removeMark(n.mark),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let n;e in this.marks&&(n=this.marks[e],this.element.removeChild(n.element),n.listeners.forEach(r=>{r&&(n.element.removeEventListener("click",r),n.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&Km(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Yn(fg.prototype);function O1(){var t="reverse",e=R1();return document.body.appendChild(e),e.scrollLeft>0?t="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(t="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(t="negative")),document.body.removeChild(e),t}function R1(){var t=document.createElement("div");t.dir="rtl",t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="0px",t.style.left="0px",t.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var n=document.createElement("span");n.style.width="1px",n.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(n),e.appendChild(r),t.appendChild(e),t}function I1(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Yc=I1,N1=typeof xn=="object"&&xn&&xn.Object===Object&&xn,B1=N1,P1=B1,L1=typeof self=="object"&&self&&self.Object===Object&&self,F1=P1||L1||Function("return this")(),hg=F1,M1=hg,U1=function(){return M1.Date.now()},z1=U1,j1=/\s/;function W1(t){for(var e=t.length;e--&&j1.test(t.charAt(e)););return e}var q1=W1,$1=q1,H1=/^\s+/;function V1(t){return t&&t.slice(0,$1(t)+1).replace(H1,"")}var K1=V1,Y1=hg,G1=Y1.Symbol,dg=G1,Kh=dg,pg=Object.prototype,Z1=pg.hasOwnProperty,X1=pg.toString,ms=Kh?Kh.toStringTag:void 0;function Q1(t){var e=Z1.call(t,ms),n=t[ms];try{t[ms]=void 0;var r=!0}catch{}var i=X1.call(t);return r&&(e?t[ms]=n:delete t[ms]),i}var J1=Q1,eE=Object.prototype,tE=eE.toString;function nE(t){return tE.call(t)}var rE=nE,Yh=dg,iE=J1,sE=rE,aE="[object Null]",oE="[object Undefined]",Gh=Yh?Yh.toStringTag:void 0;function uE(t){return t==null?t===void 0?oE:aE:Gh&&Gh in Object(t)?iE(t):sE(t)}var lE=uE;function cE(t){return t!=null&&typeof t=="object"}var fE=cE,hE=lE,dE=fE,pE="[object Symbol]";function mE(t){return typeof t=="symbol"||dE(t)&&hE(t)==pE}var gE=mE,vE=K1,Zh=Yc,yE=gE,Xh=0/0,bE=/^[-+]0x[0-9a-f]+$/i,_E=/^0b[01]+$/i,wE=/^0o[0-7]+$/i,EE=parseInt;function xE(t){if(typeof t=="number")return t;if(yE(t))return Xh;if(Zh(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Zh(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=vE(t);var n=_E.test(t);return n||wE.test(t)?EE(t.slice(2),n?2:8):bE.test(t)?Xh:+t}var CE=xE,AE=Yc,Pu=z1,Qh=CE,DE="Expected a function",SE=Math.max,TE=Math.min;function kE(t,e,n){var r,i,s,a,o,u,l=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(DE);e=Qh(e)||0,AE(n)&&(c=!!n.leading,f="maxWait"in n,s=f?SE(Qh(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function p(_){var C=r,S=i;return r=i=void 0,l=_,a=t.apply(S,C),a}function E(_){return l=_,o=setTimeout(d,e),c?p(_):a}function x(_){var C=_-u,S=_-l,O=e-C;return f?TE(O,s-S):O}function v(_){var C=_-u,S=_-l;return u===void 0||C>=e||C<0||f&&S>=s}function d(){var _=Pu();if(v(_))return m(_);o=setTimeout(d,x(_))}function m(_){return o=void 0,h&&r?p(_):(r=i=void 0,a)}function y(){o!==void 0&&clearTimeout(o),l=0,r=u=i=o=void 0}function w(){return o===void 0?a:m(Pu())}function g(){var _=Pu(),C=v(_);if(r=arguments,i=this,u=_,C){if(o===void 0)return E(u);if(f)return clearTimeout(o),o=setTimeout(d,e),p(u)}return o===void 0&&(o=setTimeout(d,e)),a}return g.cancel=y,g.flush=w,g}var mg=kE;const OE=pi(mg);var RE=mg,IE=Yc,NE="Expected a function";function BE(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(NE);return IE(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),RE(t,e,{leading:r,maxWait:e,trailing:i})}var PE=BE;const LE=pi(PE);class FE{constructor(e){this.settings=e||{},this.id="epubjs-container-"+Go(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let n=e.height,r=e.width,i=e.overflow||!1,s=e.axis||"vertical",a=e.direction;Vt(this.settings,e),e.height&&Dt(e.height)&&(n=e.height+"px"),e.width&&Dt(e.width)&&(r=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),r&&(o.style.width=r),n&&(o.style.height=n),i&&(i==="scroll"&&s==="vertical"?(o.style["overflow-y"]=i,o.style["overflow-x"]="hidden"):i==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=i):o.style.overflow=i),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var n=document.createElement("div");return n.style.visibility="hidden",n.style.overflow="hidden",n.style.width="0",n.style.height="0",n.appendChild(e),n}getElement(e){var n;if(Wm(e)?n=e:typeof e=="string"&&(n=document.getElementById(e)),!n)throw new Error("Not an Element");return n}attachTo(e){var n=this.getElement(e),r;if(n)return this.settings.hidden?r=this.wrapper:r=this.container,n.appendChild(r),this.element=n,n}getContainer(){return this.container}onResize(e){(!Dt(this.settings.width)||!Dt(this.settings.height))&&(this.resizeFunc=LE(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,n){var r;let i=e||this.settings.width,s=n||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):Dt(e)?this.container.style.width=e+"px":this.container.style.width=e,n===null?(r=r||this.element.getBoundingClientRect(),r.height&&(n=r.height,this.container.style.height=n+"px")):Dt(n)?this.container.style.height=n+"px":this.container.style.height=n,Dt(e)||(e=this.container.clientWidth),Dt(n)||(n=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=yo(),o=window.getComputedStyle(document.body),u={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return i||(e=a.width-u.left-u.right),(this.settings.fullsize&&!s||!s)&&(n=a.height-u.top-u.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:n-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?yo():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,n){var r="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),n.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(i+=a+":"+s[a]+";")}),this.sheet.insertRule(r+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class ME{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,n){return this._views.splice(n,0,e),this.container&&(n<this.container.children.length?this.container.insertBefore(e.element,this.container.children[n]):this.container.appendChild(e.element)),this.length++,e}remove(e){var n=this._views.indexOf(e);n>-1&&this._views.splice(n,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,n=this.length;if(this.length){for(var r=0;r<n;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var n,r=this.length,i=0;i<r;i++)if(n=this._views[i],n.displayed&&n.section.index==e.index)return n}displayed(){for(var e=[],n,r=this.length,i=0;i<r;i++)n=this._views[i],n.displayed&&e.push(n);return e}show(){for(var e,n=this.length,r=0;r<n;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,n=this.length,r=0;r<n;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class Co{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new Hc(this),this.settings=Vt(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Vt(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,n){let r=e.tagName;typeof this.settings.fullsize>"u"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=n,this.settings.rtlScrollType=O1(),this.stage=new FE({width:n.width,height:n.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new ME(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(n){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:n}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(we.MANAGERS.ORIENTATION_CHANGE,n)}).bind(this),500)}onResized(e){this.resize()}resize(e,n,r){let i=this.stage.size(e,n);if(this.winBounds=yo(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(we.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,n){return new this.View(e,Vt(this.viewSettings,{forceRight:n}))}handleNextPrePaginated(e,n,r){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||n.index===0)return;if(i=n.next(),i&&!i.properties.includes("page-spread-left"))return r.call(this,i)}}display(e,n){var r=new et,i=r.promise;(n===e.href||Dt(n))&&(n=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let u=s.width();this.scrollTo(o.left+u,o.top,!0)}if(n){let u=s.locationOf(n),l=s.width();this.moveTo(u,l)}return r.resolve(),i}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then((function(o){if(n){let u=o.locationOf(n),l=o.width();this.moveTo(u,l)}}).bind(this),o=>{r.reject(o)}).then((function(){return this.handleNextPrePaginated(a,e,this.add)}).bind(this)).then((function(){this.views.show(),r.resolve()}).bind(this)),i}afterDisplayed(e){this.emit(we.MANAGERS.ADDED,e)}afterResized(e){this.emit(we.MANAGERS.RESIZE,e.section)}moveTo(e,n){var r=0,i=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-n),this.scrollTo(r,i,!0)}add(e,n){var r=this.createView(e,n);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(we.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(we.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}append(e,n){var r=this.createView(e,n);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(we.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(we.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}prepend(e,n){var r=this.createView(e,n);return r.on(we.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(we.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(we.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,n;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,n<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(n=this.container.scrollLeft,n>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(n=this.container.scrollLeft+this.layout.delta*-1,n>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then((function(){return this.handleNextPrePaginated(i,e,this.append)}).bind(this),s=>s).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,n;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,n=this.container.scrollLeft,n>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(n=this.container.scrollLeft+this.container.offsetWidth,n<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(n=this.container.scrollLeft,n<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then((function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}).bind(this),s=>s).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),n=this.container.getBoundingClientRect(),r=n.height<window.innerHeight?n.height:window.innerHeight,i=n.width<window.innerWidth?n.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let a=0,o=0;return this.settings.fullsize&&(a=s?window.scrollY:window.scrollX),e.map(l=>{let{index:c,href:f}=l.section,h=l.position(),p=l.width(),E=l.height(),x,v,d,m;s?(x=a+n.top-h.top+o,v=x+r-o,m=this.layout.count(E,r).pages,d=r):(x=a+n.left-h.left+o,v=x+i-o,m=this.layout.count(p,i).pages,d=i);let y=Math.ceil(x/d),w=[],g=Math.ceil(v/d);if(this.settings.direction==="rtl"&&!s){let S=y;y=m-g,g=m-S}w=[];for(var _=y;_<=g;_++){let S=_+1;w.push(S)}let C=this.mapping.page(l.contents,l.section.cfiBase,x,v);return{index:c,href:f,pages:w,totalPages:m,mapping:C}})}paginatedLocation(){let e=this.visible(),n=this.container.getBoundingClientRect(),r=0,i=0;return this.settings.fullsize&&(r=window.scrollX),e.map(a=>{let{index:o,href:u}=a.section,l,c=a.position(),f=a.width(),h,p,E;this.settings.direction==="rtl"?(l=n.right-r,E=Math.min(Math.abs(l-c.left),this.layout.width)-i,p=c.width-(c.right-l)-i,h=p-E):(l=n.left+r,E=Math.min(c.right-l,this.layout.width)-i,h=l-c.left+i,p=h+E),i+=E;let x=this.mapping.page(a.contents,a.section.cfiBase,h,p),v=this.layout.count(f).pages,d=Math.floor(h/this.layout.pageWidth),m=[],y=Math.floor(p/this.layout.pageWidth);if(d<0&&(d=0,y=y+1),this.settings.direction==="rtl"){let g=d;d=v-y,y=v-g}for(var w=d+1;w<=y;w++){let g=w;m.push(g)}return{index:o,href:u,pages:m,totalPages:v,mapping:x}})}isVisible(e,n,r,i){var s=e.position(),a=i||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-n&&s.left<a.right+r?!0:this.settings.axis==="vertical"&&s.bottom>a.top-n&&s.top<a.bottom+r}visible(){for(var e=this.bounds(),n=this.views.displayed(),r=n.length,i=[],s,a,o=0;o<r;o++)a=n[o],s=this.isVisible(a,0,0,e),s===!0&&i.push(a);return i}scrollBy(e,n,r){let i=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,n*i):(e&&(this.container.scrollLeft+=e*i),n&&(this.container.scrollTop+=n)),this.scrolled=!0}scrollTo(e,n,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,n):(this.container.scrollLeft=e,this.container.scrollTop=n),this.scrolled=!0}onScroll(){let e,n;this.settings.fullsize?(e=window.scrollY,n=window.scrollX):(e=this.container.scrollTop,n=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=n,this.ignore?this.ignore=!1:(this.emit(we.MANAGERS.SCROLL,{top:e,left:n}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(we.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Eo(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(n){n&&n.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,n){!n&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Eo(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,n="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":n,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(n){const r=n&&n.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}Yn(Co.prototype);const UE=Math.PI/2,zE={easeOutSine:function(t){return Math.sin(t*UE)},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInCubic:function(t){return Math.pow(t,3)}};class Ml{constructor(e,n){this.settings=Vt({duration:80,minVelocity:.2,minDistance:10,easing:zE.easeInCubic},n||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(we.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(we.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let n=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{n.on(r,i=>this.triggerViewEvent(i,n))})}triggerViewEvent(e,n){this.emit(e.type,e,n)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:n,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=n,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=n,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:n,screenY:r}=e.touches[0],i=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=n-this.endTouchX),this.endTouchX=n,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let n=this.wasSwiped();n!==0?this.snap(n):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,n=this.endTouchX-this.startTouchX,r=Math.abs(n),i=this.endTime-this.startTime,s=n/i,a=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor;return e%n!==0}snap(e=0){let n=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,i=Math.round(n/r)*r;return e&&(i+=e*r),this.smoothScrollTo(i)}smoothScrollTo(e){const n=new et,r=this.scrollLeft,i=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){const u=this.now(),l=Math.min(1,(u-i)/s);if(a(l),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,n.resolve();return}l<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(r+(e-r)*l,0)):(this.scrollTo(e,0),this.snapping=!1,n.resolve())}return o.call(this),n.promise}scrollTo(e=0,n=0){this.fullsize?window.scroll(e,n):(this.scroller.scrollLeft=e,this.scroller.scrollTop=n)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Yn(Ml.prototype);class jE extends Co{constructor(e){super(e),this.name="continuous",this.settings=Vt(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Vt(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,n){return Co.prototype.display.call(this,e,n).then((function(){return this.fill()}).bind(this))}fill(e){var n=e||new et;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(n):n.resolve()}),n.promise}moveTo(e){var n=0,r=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(n>0||r>0)&&this.scrollBy(n,r,!0)}afterResized(e){this.emit(we.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var n=this.createView(e);return this.views.append(n),n.on(we.VIEWS.RESIZED,r=>{n.expanded=!0}),n.on(we.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(we.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.display(this.request)}append(e){var n=this.createView(e);return n.on(we.VIEWS.RESIZED,r=>{n.expanded=!0}),n.on(we.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(we.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n}prepend(e){var n=this.createView(e);return n.on(we.VIEWS.RESIZED,r=>{this.counter(r),n.expanded=!0}),n.on(we.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(we.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var n=this.bounds(),r=this.views.all(),i=r.length,s=typeof e<"u"?e:this.settings.offset||0,a,o,u=new et,l=[],c=0;c<i;c++)if(o=r[c],a=this.isVisible(o,s,s,n),a===!0)if(o.displayed)o.show();else{let f=o.display(this.request).then(function(h){h.show()},h=>{o.hide()});l.push(f)}else this.q.enqueue(o.destroy.bind(o)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return l.length?Promise.all(l).catch(f=>{u.reject(f)}):(u.resolve(),u.promise)}check(e,n){var r=new et,i=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),n&&!s&&(a=n);var o=this._bounds;let u=s?this.scrollLeft:this.scrollTop,l=s?Math.floor(o.width):o.height,c=s?this.container.scrollWidth:this.container.scrollHeight,f=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",h=this.settings.rtlScrollType,p=this.settings.direction==="rtl";this.settings.fullsize?(s&&p&&h==="negative"||!s&&p&&h==="default")&&(u=u*-1):(p&&h==="default"&&f==="horizontal"&&(u=c-l-u),p&&h==="negative"&&f==="horizontal"&&(u=u*-1));let E=()=>{let y=this.views.first(),w=y&&y.section.prev();w&&i.push(this.prepend(w))},x=()=>{let y=this.views.last(),w=y&&y.section.next();w&&i.push(this.append(w))},v=u+l+a,d=u-a;v>=c&&x(),d<0&&E();let m=i.map(y=>y.display(this.request));return i.length?Promise.all(m).then(()=>this.check()).then(()=>this.update(a),y=>y):(this.q.enqueue((function(){this.update()}).bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new et,n=this.views.displayed(),r=n[0],i=n[n.length-1],s=this.views.indexOf(r),a=this.views.indexOf(i),o=this.views.slice(0,s),u=this.views.slice(a+1),l=0;l<o.length-1;l++)this.erase(o[l],o);for(var c=1;c<u.length;c++)this.erase(u[c]);return e.resolve(),e.promise}erase(e,n){var r,i;this.settings.fullsize?(r=window.scrollY,i=window.scrollX):(r=this.container.scrollTop,i=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),n&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(s.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(n){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Ml(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Wc;let n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*n,this.scrollLeft=window.scrollX*n):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=OE(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,n,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,n=window.scrollX*r):(e=this.container.scrollTop,n=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=n,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(n-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=n,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(we.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(we.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Ml(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class Gc{constructor(e,n){this.settings=Vt(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Vt(this.settings,n),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Rn(this),this.hooks.serialize=new Rn(this),this.hooks.content=new Rn(this),this.hooks.unloaded=new Rn(this),this.hooks.layout=new Rn(this),this.hooks.render=new Rn(this),this.hooks.show=new Rn(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new g1(this),this.annotations=new b1(this),this.epubcfi=new tt,this.q=new Hc(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new et,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var n;return typeof e=="string"&&e==="default"?n=Co:typeof e=="string"&&e==="continuous"?n=jE:n=e,n}requireView(e){var n;return typeof e=="string"&&e==="iframe"?n=fg:n=e,n}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(we.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(we.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(we.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(we.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(we.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(we.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(we.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var n=new et,r=n.promise,i;return this.displaying=n,this.book.locations.length()&&qm(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{n.resolve(i),this.displaying=void 0,this.emit(we.RENDITION.DISPLAYED,i),this.reportLocation()},s=>{this.emit(we.RENDITION.DISPLAY_ERROR,s)}),r):(n.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(we.VIEWS.MARK_CLICKED,(n,r)=>this.triggerMarkEvent(n,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(we.RENDITION.RENDERED,e.section,e)}):this.emit(we.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(we.RENDITION.REMOVED,e.section,e)})}onResized(e,n){this.emit(we.RENDITION.RESIZED,{width:e.width,height:e.height},n),this.location&&this.location.start&&this.display(n||this.location.start.cfi)}onOrientationChange(e){this.emit(we.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,n,r){e&&(this.settings.width=e),n&&(this.settings.height=n),this.manager.resize(e,n,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var n,r=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",u=this.settings.minSpreadWidth||e.minSpreadWidth||800,l=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),n={layout:r,spread:i,orientation:s,flow:a,viewport:o,minSpreadWidth:u,direction:l},n}flow(e){var n=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(n="scrolled"),(e==="auto"||e==="paginated")&&(n="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(n),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(n),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new tg(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(we.LAYOUT.UPDATED,(n,r)=>{this.emit(we.RENDITION.LAYOUT,n,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,n){this.settings.spread=e,n&&(this.settings.minSpreadWidth=n),this._layout&&this._layout.spread(e,n),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then((function(i){let s=this.located(i);!s||!s.start||!s.end||(this.location=s,this.emit(we.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(we.RENDITION.RELOCATED,this.location))}).bind(this));else if(r){let i=this.located(r);if(!i||!i.start||!i.end)return;this.location=i,this.emit(we.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(we.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(n){return this.located(n)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let n=e[0],r=e[e.length-1],i={start:{index:n.index,href:n.href,cfi:n.mapping.start,displayed:{page:n.pages[0]||1,total:n.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(n.mapping.start),a=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(i.start.location=s,i.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(i.end.location=a,i.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(n.mapping.start),u=this.book.pageList.pageFromCfi(r.mapping.end);return o!=-1&&(i.start.page=o),u!=-1&&(i.end.page=u),r.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),n.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){Ya.forEach(n=>{e.on(n,r=>this.triggerViewEvent(r,e))}),e.on(we.CONTENTS.SELECTED,n=>this.triggerSelectedEvent(n,e))}triggerViewEvent(e,n){this.emit(e.type,e,n)}triggerSelectedEvent(e,n){this.emit(we.RENDITION.SELECTED,e,n)}triggerMarkEvent(e,n,r){this.emit(we.RENDITION.MARK_CLICKED,e,n,r)}getRange(e,n){var r=new tt(e),i=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(i.length)return i[0].contents.range(r,n)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let n=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)))*.95,i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(we.CONTENTS.LINK_CLICKED,n=>{let r=this.book.path.relative(n);this.display(r)})}injectStylesheet(e,n){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,n){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,n){let r=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),r&&i.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(i)}}Yn(Gc.prototype);function Or(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gg={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function a(l,c){if(!i[l]){if(!r[l]){var f=typeof Or=="function"&&Or;if(!c&&f)return f(l,!0);if(o)return o(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[l]={exports:{}};r[l][0].call(p.exports,function(E){var x=r[l][1][E];return a(x||E)},p,p.exports,n,r,i,s)}return i[l].exports}for(var o=typeof Or=="function"&&Or,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l=[],c,f,h,p,E,x,v,d=0,m=u.length,y=m,w=s.getTypeOf(u)!=="string";d<u.length;)y=m-d,w?(c=u[d++],f=d<m?u[d++]:0,h=d<m?u[d++]:0):(c=u.charCodeAt(d++),f=d<m?u.charCodeAt(d++):0,h=d<m?u.charCodeAt(d++):0),p=c>>2,E=(c&3)<<4|f>>4,x=y>1?(f&15)<<2|h>>6:64,v=y>2?h&63:64,l.push(o.charAt(p)+o.charAt(E)+o.charAt(x)+o.charAt(v));return l.join("")},i.decode=function(u){var l,c,f,h,p,E,x,v=0,d=0,m="data:";if(u.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");u=u.replace(/[^A-Za-z0-9+/=]/g,"");var y=u.length*3/4;if(u.charAt(u.length-1)===o.charAt(64)&&y--,u.charAt(u.length-2)===o.charAt(64)&&y--,y%1!==0)throw new Error("Invalid base64 input, bad content length.");var w;for(a.uint8array?w=new Uint8Array(y|0):w=new Array(y|0);v<u.length;)h=o.indexOf(u.charAt(v++)),p=o.indexOf(u.charAt(v++)),E=o.indexOf(u.charAt(v++)),x=o.indexOf(u.charAt(v++)),l=h<<2|p>>4,c=(p&15)<<4|E>>2,f=(E&3)<<6|x,w[d++]=l,E!==64&&(w[d++]=c),x!==64&&(w[d++]=f);return w}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function l(c,f,h,p,E){this.compressedSize=c,this.uncompressedSize=f,this.crc32=h,this.compression=p,this.compressedContent=E}l.prototype={getContentWorker:function(){var c=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(c,f,h){return c.pipe(new o).pipe(new u("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils");function a(){for(var c,f=[],h=0;h<256;h++){c=h;for(var p=0;p<8;p++)c=c&1?3988292384^c>>>1:c>>>1;f[h]=c}return f}var o=a();function u(c,f,h,p){var E=o,x=p+h;c=c^-1;for(var v=p;v<x;v++)c=c>>>8^E[(c^f[v])&255];return c^-1}function l(c,f,h,p){var E=o,x=p+h;c=c^-1;for(var v=p;v<x;v++)c=c>>>8^E[(c^f.charCodeAt(v))&255];return c^-1}r.exports=function(f,h){if(typeof f>"u"||!f.length)return 0;var p=s.getTypeOf(f)!=="string";return p?u(h|0,f,f.length,0):l(h|0,f,f.length,0)}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;typeof Promise<"u"?s=Promise:s=n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),u=n("./stream/GenericWorker"),l=s?"uint8array":"array";i.magic="\b\0";function c(f,h){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}o.inherits(c,u),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,f.data),!1)},c.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},i.compressWorker=function(f){return new c("Deflate",f)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker"),o=n("../utf8"),u=n("../crc32"),l=n("../signature"),c=function(d,m){var y="",w;for(w=0;w<m;w++)y+=String.fromCharCode(d&255),d=d>>>8;return y},f=function(d,m){var y=d;return d||(y=m?16893:33204),(y&65535)<<16},h=function(d){return(d||0)&63},p=function(d,m,y,w,g,_){var C=d.file,S=d.compression,O=_!==o.utf8encode,B=s.transformTo("string",_(C.name)),q=s.transformTo("string",o.utf8encode(C.name)),M=C.comment,X=s.transformTo("string",_(M)),he=s.transformTo("string",o.utf8encode(M)),oe=q.length!==C.name.length,ee=he.length!==M.length,te,ie,Pe="",Ke="",He="",Ce=C.dir,Qe=C.date,Ve={crc32:0,compressedSize:0,uncompressedSize:0};(!m||y)&&(Ve.crc32=d.crc32,Ve.compressedSize=d.compressedSize,Ve.uncompressedSize=d.uncompressedSize);var Et=0;m&&(Et|=8),!O&&(oe||ee)&&(Et|=2048);var Ze=0,Y=0;Ce&&(Ze|=16),g==="UNIX"?(Y=798,Ze|=f(C.unixPermissions,Ce)):(Y=20,Ze|=h(C.dosPermissions)),te=Qe.getUTCHours(),te=te<<6,te=te|Qe.getUTCMinutes(),te=te<<5,te=te|Qe.getUTCSeconds()/2,ie=Qe.getUTCFullYear()-1980,ie=ie<<4,ie=ie|Qe.getUTCMonth()+1,ie=ie<<5,ie=ie|Qe.getUTCDate(),oe&&(Ke=c(1,1)+c(u(B),4)+q,Pe+="up"+c(Ke.length,2)+Ke),ee&&(He=c(1,1)+c(u(X),4)+he,Pe+="uc"+c(He.length,2)+He);var se="";se+=`
\0`,se+=c(Et,2),se+=S.magic,se+=c(te,2),se+=c(ie,2),se+=c(Ve.crc32,4),se+=c(Ve.compressedSize,4),se+=c(Ve.uncompressedSize,4),se+=c(B.length,2),se+=c(Pe.length,2);var ce=l.LOCAL_FILE_HEADER+se+B+Pe,_e=l.CENTRAL_FILE_HEADER+c(Y,2)+se+c(X.length,2)+"\0\0\0\0"+c(Ze,4)+c(w,4)+B+Pe+X;return{fileRecord:ce,dirRecord:_e}},E=function(d,m,y,w,g){var _="",C=s.transformTo("string",g(w));return _=l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(d,2)+c(d,2)+c(m,4)+c(y,4)+c(C.length,2)+C,_},x=function(d){var m="";return m=l.DATA_DESCRIPTOR+c(d.crc32,4)+c(d.compressedSize,4)+c(d.uncompressedSize,4),m};function v(d,m,y,w){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=y,this.encodeFileName=w,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(v,a),v.prototype.push=function(d){var m=d.meta.percent||0,y=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,a.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:y?(m+100*(y-w-1))/y:100}}))},v.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var y=p(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,y=p(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),m)this.push({data:x(d),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var y=this.bytesWritten-d,w=E(this.dirRecords.length,y,d,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(y){m.processChunk(y)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(y){m.error(y)}),this},v.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},v.prototype.error=function(d){var m=this._sources;if(!a.prototype.error.call(this,d))return!1;for(var y=0;y<m.length;y++)try{m[y].error(d)}catch{}return!0},v.prototype.lock=function(){a.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker"),o=function(u,l){var c=u||l,f=s[c];if(!f)throw new Error(c+" is not a valid compression method !");return f};i.generateWorker=function(u,l,c){var f=new a(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{u.forEach(function(p,E){h++;var x=o(E.options.compression,l.compression),v=E.options.compressionOptions||l.compressionOptions||{},d=E.dir,m=E.date;E._compressWorker(x,v).withStreamInfo("file",{name:p,dir:d,date:m,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(p){f.error(p)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}s.prototype=n("./object"),s.prototype.loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),u=n("./zipEntries"),l=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function f(h){return new a.Promise(function(p,E){var x=h.decompressed.getContentWorker().pipe(new l);x.on("error",function(v){E(v)}).on("end",function(){x.streamInfo.crc32!==h.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(h,p){var E=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(x){var v=new u(p);return v.load(x),v}).then(function(v){var d=[a.Promise.resolve(v)],m=v.files;if(p.checkCRC32)for(var y=0;y<m.length;y++)d.push(f(m[y]));return a.Promise.all(d)}).then(function(v){for(var d=v.shift(),m=d.files,y=0;y<m.length;y++){var w=m[y],g=w.fileNameStr,_=s.resolve(w.fileNameStr);E.file(_,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:p.createFolders}),w.dir||(E.file(_).unsafeOriginalName=g)}return d.zipComment.length&&(E.comment=d.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(u,l){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(u){var l=this;this._stream=u,u.pause(),u.on("data",function(c){l.push({data:c,meta:{percent:0}})}).on("error",function(c){l.isPaused?this.generatedError=c:l.error(c)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return a.prototype.pause.call(this)?(this._stream.pause(),!0):!1},o.prototype.resume=function(){return a.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable,a=n("../utils");a.inherits(o,s);function o(u,l,c){s.call(this,l),this._helper=u;var f=this;u.on("data",function(h,p){f.push(h)||f._helper.pause(),c&&c(p)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){var s=n("./utf8"),a=n("./utils"),o=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),l=n("./defaults"),c=n("./compressedObject"),f=n("./zipObject"),h=n("./generate"),p=n("./nodejsUtils"),E=n("./nodejs/NodejsStreamInputAdapter"),x=function(g,_,C){var S=a.getTypeOf(_),O,B=a.extend(C||{},l);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&B.unixPermissions&16384&&(B.dir=!0),B.dosPermissions&&B.dosPermissions&16&&(B.dir=!0),B.dir&&(g=d(g)),B.createFolders&&(O=v(g))&&m.call(this,O,!0);var q=S==="string"&&B.binary===!1&&B.base64===!1;(!C||typeof C.binary>"u")&&(B.binary=!q);var M=_ instanceof c&&_.uncompressedSize===0;(M||B.dir||!_||_.length===0)&&(B.base64=!1,B.binary=!0,_="",B.compression="STORE",S="string");var X=null;_ instanceof c||_ instanceof o?X=_:p.isNode&&p.isStream(_)?X=new E(g,_):X=a.prepareContent(g,_,B.binary,B.optimizedBinaryString,B.base64);var he=new f(g,X,B);this.files[g]=he},v=function(g){g.slice(-1)==="/"&&(g=g.substring(0,g.length-1));var _=g.lastIndexOf("/");return _>0?g.substring(0,_):""},d=function(g){return g.slice(-1)!=="/"&&(g+="/"),g},m=function(g,_){return _=typeof _<"u"?_:l.createFolders,g=d(g),this.files[g]||x.call(this,g,null,{dir:!0,createFolders:_}),this.files[g]};function y(g){return Object.prototype.toString.call(g)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(g){var _,C,S;for(_ in this.files)S=this.files[_],C=_.slice(this.root.length,_.length),C&&_.slice(0,this.root.length)===this.root&&g(C,S)},filter:function(g){var _=[];return this.forEach(function(C,S){g(C,S)&&_.push(S)}),_},file:function(g,_,C){if(arguments.length===1)if(y(g)){var S=g;return this.filter(function(B,q){return!q.dir&&S.test(B)})}else{var O=this.files[this.root+g];return O&&!O.dir?O:null}else g=this.root+g,x.call(this,g,_,C);return this},folder:function(g){if(!g)return this;if(y(g))return this.filter(function(O,B){return B.dir&&g.test(O)});var _=this.root+g,C=m.call(this,_),S=this.clone();return S.root=C.name,S},remove:function(g){g=this.root+g;var _=this.files[g];if(_||(g.slice(-1)!=="/"&&(g+="/"),_=this.files[g]),_&&!_.dir)delete this.files[g];else for(var C=this.filter(function(O,B){return B.name.slice(0,g.length)===g}),S=0;S<C.length;S++)delete this.files[C[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(g){var _,C={};try{if(C=a.extend(g||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),C.type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");a.checkSupport(C.type),(C.platform==="darwin"||C.platform==="freebsd"||C.platform==="linux"||C.platform==="sunos")&&(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var S=C.comment||this.comment||"";_=h.generateWorker(this,C,S)}catch(O){_=new o("error"),_.error(O)}return new u(_,C.type||"string",C.mimeType)},generateAsync:function(g,_){return this.generateInternalStream(g).accumulate(_)},generateNodeStream:function(g,_){return g=g||{},g.type||(g.type="nodebuffer"),this.generateInternalStream(g).toNodejsStream(_)}};r.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader"),a=n("../utils");function o(u){s.call(this,u);for(var l=0;l<this.data.length;l++)u[l]=u[l]&255}a.inherits(o,s),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var l=u.charCodeAt(0),c=u.charCodeAt(1),f=u.charCodeAt(2),h=u.charCodeAt(3),p=this.length-4;p>=0;--p)if(this.data[p]===l&&this.data[p+1]===c&&this.data[p+2]===f&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var l=u.charCodeAt(0),c=u.charCodeAt(1),f=u.charCodeAt(2),h=u.charCodeAt(3),p=this.readData(4);return l===p[0]&&c===p[1]&&f===p[2]&&h===p[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u=0,l;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader"),a=n("../utils");function o(u){s.call(this,u)}a.inherits(o,s),o.prototype.readData=function(u){this.checkOffset(u);var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader"),a=n("../utils");function o(u){s.call(this,u)}a.inherits(o,s),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){var l=this.readData(4);return u===l},o.prototype.readData=function(u){this.checkOffset(u);var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader"),a=n("../utils");function o(u){s.call(this,u)}a.inherits(o,s),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),u=n("./StringReader"),l=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(f){var h=s.getTypeOf(f);return s.checkSupport(h),h==="string"&&!a.uint8array?new u(f):h==="nodebuffer"?new l(f):a.uint8array?new c(s.transformTo("uint8array",f)):new o(s.transformTo("array",f))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32"),o=n("../utils");function u(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o.inherits(u,s),u.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}a.prototype.processChunk.call(this,u)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker"),o=16*1024;function u(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=s.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}s.inherits(u,a),u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return a.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=o,c=null,f=Math.min(this.max,this.index+l);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f);break}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return this.isFinished?!1:(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),u=n("../base64"),l=n("../support"),c=n("../external"),f=null;if(l.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(v,d,m){switch(v){case"blob":return s.newBlob(s.transformTo("arraybuffer",d),m);case"base64":return u.encode(d);default:return s.transformTo(v,d)}}function p(v,d){var m,y=0,w=null,g=0;for(m=0;m<d.length;m++)g+=d[m].length;switch(v){case"string":return d.join("");case"array":return Array.prototype.concat.apply([],d);case"uint8array":for(w=new Uint8Array(g),m=0;m<d.length;m++)w.set(d[m],y),y+=d[m].length;return w;case"nodebuffer":return Buffer.concat(d);default:throw new Error("concat : unsupported type '"+v+"'")}}function E(v,d){return new c.Promise(function(m,y){var w=[],g=v._internalType,_=v._outputType,C=v._mimeType;v.on("data",function(S,O){w.push(S),d&&d(O)}).on("error",function(S){w=[],y(S)}).on("end",function(){try{var S=h(_,p(g,w),C);m(S)}catch(O){y(O)}w=[]}).resume()})}function x(v,d,m){var y=d;switch(d){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string";break}try{this._internalType=y,this._outputType=d,this._mimeType=m,s.checkSupport(y),this._worker=v.pipe(new a(y)),v.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}x.prototype={accumulate:function(v){return E(this,v)},on:function(v,d){var m=this;return v==="data"?this._worker.on(v,function(y){d.call(m,y.data,y.meta)}):this._worker.on(v,function(){s.delay(d,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),u=n("./stream/GenericWorker"),l=new Array(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1;var f=function(v){var d,m,y,w,g,_=v.length,C=0;for(w=0;w<_;w++)m=v.charCodeAt(w),(m&64512)===55296&&w+1<_&&(y=v.charCodeAt(w+1),(y&64512)===56320&&(m=65536+(m-55296<<10)+(y-56320),w++)),C+=m<128?1:m<2048?2:m<65536?3:4;for(a.uint8array?d=new Uint8Array(C):d=new Array(C),g=0,w=0;g<C;w++)m=v.charCodeAt(w),(m&64512)===55296&&w+1<_&&(y=v.charCodeAt(w+1),(y&64512)===56320&&(m=65536+(m-55296<<10)+(y-56320),w++)),m<128?d[g++]=m:m<2048?(d[g++]=192|m>>>6,d[g++]=128|m&63):m<65536?(d[g++]=224|m>>>12,d[g++]=128|m>>>6&63,d[g++]=128|m&63):(d[g++]=240|m>>>18,d[g++]=128|m>>>12&63,d[g++]=128|m>>>6&63,d[g++]=128|m&63);return d},h=function(v,d){var m;for(d=d||v.length,d>v.length&&(d=v.length),m=d-1;m>=0&&(v[m]&192)===128;)m--;return m<0||m===0?d:m+l[v[m]]>d?m:d},p=function(v){var d,m,y,w,g=v.length,_=new Array(g*2);for(m=0,d=0;d<g;){if(y=v[d++],y<128){_[m++]=y;continue}if(w=l[y],w>4){_[m++]=65533,d+=w-1;continue}for(y&=w===2?31:w===3?15:7;w>1&&d<g;)y=y<<6|v[d++]&63,w--;if(w>1){_[m++]=65533;continue}y<65536?_[m++]=y:(y-=65536,_[m++]=55296|y>>10&1023,_[m++]=56320|y&1023)}return _.length!==m&&(_.subarray?_=_.subarray(0,m):_.length=m),s.applyFromCharCode(_)};i.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):f(d)},i.utf8decode=function(d){return a.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):(d=s.transformTo(a.uint8array?"uint8array":"array",d),p(d))};function E(){u.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(E,u),E.prototype.processChunk=function(v){var d=s.transformTo(a.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=d;d=new Uint8Array(m.length+this.leftOver.length),d.set(this.leftOver,0),d.set(m,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var y=h(d),w=d;y!==d.length&&(a.uint8array?(w=d.subarray(0,y),this.leftOver=d.subarray(y,d.length)):(w=d.slice(0,y),this.leftOver=d.slice(y,d.length))),this.push({data:i.utf8decode(w),meta:v.meta})},E.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=E;function x(){u.call(this,"utf-8 encode")}s.inherits(x,u),x.prototype.processChunk=function(v){this.push({data:i.utf8encode(v.data),meta:v.meta})},i.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),u=n("./external");n("setimmediate");function l(v){var d=null;return s.uint8array?d=new Uint8Array(v.length):d=new Array(v.length),f(v,d)}i.newBlob=function(v,d){i.checkSupport("blob");try{return new Blob([v],{type:d})}catch{try{var m=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,y=new m;return y.append(v),y.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};function c(v){return v}function f(v,d){for(var m=0;m<v.length;++m)d[m]=v.charCodeAt(m)&255;return d}var h={stringifyByChunk:function(v,d,m){var y=[],w=0,g=v.length;if(g<=m)return String.fromCharCode.apply(null,v);for(;w<g;)d==="array"||d==="nodebuffer"?y.push(String.fromCharCode.apply(null,v.slice(w,Math.min(w+m,g)))):y.push(String.fromCharCode.apply(null,v.subarray(w,Math.min(w+m,g)))),w+=m;return y.join("")},stringifyByChar:function(v){for(var d="",m=0;m<v.length;m++)d+=String.fromCharCode(v[m]);return d},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var d=65536,m=i.getTypeOf(v),y=!0;if(m==="uint8array"?y=h.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=h.applyCanBeUsed.nodebuffer),y)for(;d>1;)try{return h.stringifyByChunk(v,m,d)}catch{d=Math.floor(d/2)}return h.stringifyByChar(v)}i.applyFromCharCode=p;function E(v,d){for(var m=0;m<v.length;m++)d[m]=v[m];return d}var x={};x.string={string:c,array:function(v){return f(v,new Array(v.length))},arraybuffer:function(v){return x.string.uint8array(v).buffer},uint8array:function(v){return f(v,new Uint8Array(v.length))},nodebuffer:function(v){return f(v,o.allocBuffer(v.length))}},x.array={string:p,array:c,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(v)}},x.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return E(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:c,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(new Uint8Array(v))}},x.uint8array={string:p,array:function(v){return E(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:c,nodebuffer:function(v){return o.newBufferFrom(v)}},x.nodebuffer={string:p,array:function(v){return E(v,new Array(v.length))},arraybuffer:function(v){return x.nodebuffer.uint8array(v).buffer},uint8array:function(v){return E(v,new Uint8Array(v.length))},nodebuffer:c},i.transformTo=function(v,d){if(d||(d=""),!v)return d;i.checkSupport(v);var m=i.getTypeOf(d),y=x[m][v](d);return y},i.resolve=function(v){for(var d=v.split("/"),m=[],y=0;y<d.length;y++){var w=d[y];w==="."||w===""&&y!==0&&y!==d.length-1||(w===".."?m.pop():m.push(w))}return m.join("/")},i.getTypeOf=function(v){if(typeof v=="string")return"string";if(Object.prototype.toString.call(v)==="[object Array]")return"array";if(s.nodebuffer&&o.isBuffer(v))return"nodebuffer";if(s.uint8array&&v instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&v instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(v){var d=s[v.toLowerCase()];if(!d)throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var d="",m,y;for(y=0;y<(v||"").length;y++)m=v.charCodeAt(y),d+="\\x"+(m<16?"0":"")+m.toString(16).toUpperCase();return d},i.delay=function(v,d,m){setImmediate(function(){v.apply(m||null,d||[])})},i.inherits=function(v,d){var m=function(){};m.prototype=d.prototype,v.prototype=new m},i.extend=function(){var v={},d,m;for(d=0;d<arguments.length;d++)for(m in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],m)&&typeof v[m]>"u"&&(v[m]=arguments[d][m]);return v},i.prepareContent=function(v,d,m,y,w){var g=u.Promise.resolve(d).then(function(_){var C=s.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1);return C&&typeof FileReader<"u"?new u.Promise(function(S,O){var B=new FileReader;B.onload=function(q){S(q.target.result)},B.onerror=function(q){O(q.target.error)},B.readAsArrayBuffer(_)}):_});return g.then(function(_){var C=i.getTypeOf(_);return C?(C==="arraybuffer"?_=i.transformTo("uint8array",_):C==="string"&&(w?_=a.decode(_):m&&y!==!0&&(_=l(_))),_):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),u=n("./zipEntry"),l=n("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(f)+")")}},isSignature:function(f,h){var p=this.reader.index;this.reader.setIndex(f);var E=this.reader.readString(4),x=E===h;return this.reader.setIndex(p),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",p=a.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f=this.zip64EndOfCentralSize-44,h=0,p,E,x;h<f;)p=this.reader.readInt(2),E=this.reader.readInt(4),x=this.reader.readData(E),this.zip64ExtensibleData[p]={id:p,length:E,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)f=new u({zip64:this.zip64},this.loadOptions),f.readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0){var h=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw h?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(f);var p=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),f<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var x=p-E;if(x>0)this.isSignature(p,o.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),u=n("./crc32"),l=n("./utf8"),c=n("./compressions"),f=n("./support"),h=0,p=3,E=function(v){for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)&&c[d].magic===v)return c[d];return null};function x(v,d){this.options=v,this.loadOptions=d}x.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(v){var d,m;if(v.skip(22),this.fileNameLength=v.readInt(2),m=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(d=E(this.compressionMethod),d===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,d,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var d=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(d),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),v===h&&(this.dosPermissions=this.externalFileAttributes&63),v===p&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var d=v.index+this.extraFieldsLength,m,y,w;for(this.extraFields||(this.extraFields={});v.index+4<d;)m=v.readInt(2),y=v.readInt(2),w=v.readData(y),this.extraFields[m]={id:m,length:y,value:w};v.setIndex(d)},handleUTF8:function(){var v=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var m=a.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var w=a.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var d=s(v.value);return d.readInt(1)!==1||u(this.fileName)!==d.readInt(4)?null:l.utf8decode(d.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var d=s(v.value);return d.readInt(1)!==1||u(this.fileComment)!==d.readInt(4)?null:l.utf8decode(d.readData(v.length-5))}return null}},r.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){var s=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),o=n("./utf8"),u=n("./compressedObject"),l=n("./stream/GenericWorker"),c=function(E,x,v){this.name=E,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=x,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}};c.prototype={internalStream:function(E){var x=null,v="string";try{if(!E)throw new Error("No output type specified.");v=E.toLowerCase();var d=v==="string"||v==="text";(v==="binarystring"||v==="text")&&(v="string"),x=this._decompressWorker();var m=!this._dataBinary;m&&!d&&(x=x.pipe(new o.Utf8EncodeWorker)),!m&&d&&(x=x.pipe(new o.Utf8DecodeWorker))}catch(y){x=new l("error"),x.error(y)}return new s(x,v,"")},async:function(E,x){return this.internalStream(E).accumulate(x)},nodeStream:function(E,x){return this.internalStream(E||"nodebuffer").toNodejsStream(x)},_compressWorker:function(E,x){if(this._data instanceof u&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new o.Utf8EncodeWorker)),u.createWorkerFrom(v,E,x)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<f.length;p++)c.prototype[f[p]]=h;r.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var u=0,l=new a(E),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=E,o=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var v=s.document.createElement("script");v.onreadystatechange=function(){E(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:o=function(){setTimeout(E,0)};var h,p=[];function E(){h=!0;for(var v,d,m=p.length;m;){for(d=p,p=[],v=-1;++v<m;)d[v]();m=p.length}h=!1}r.exports=x;function x(v){p.push(v)===1&&!h&&o()}}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==a&&x(this,g)}f.prototype.finally=function(g){if(typeof g!="function")return this;var _=this.constructor;return this.then(C,S);function C(O){function B(){return O}return _.resolve(g()).then(B)}function S(O){function B(){throw O}return _.resolve(g()).then(B)}},f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,_){if(typeof g!="function"&&this.state===l||typeof _!="function"&&this.state===u)return this;var C=new this.constructor(a);if(this.state!==c){var S=this.state===l?g:_;p(C,S,this.outcome)}else this.queue.push(new h(C,g,_));return C};function h(g,_,C){this.promise=g,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){p(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){o.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){p(this.promise,this.onRejected,g)};function p(g,_,C){s(function(){var S;try{S=_(C)}catch(O){return o.reject(g,O)}S===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,S)})}o.resolve=function(g,_){var C=v(E,_);if(C.status==="error")return o.reject(g,C.value);var S=C.value;if(S)x(g,S);else{g.state=l,g.outcome=_;for(var O=-1,B=g.queue.length;++O<B;)g.queue[O].callFulfilled(_)}return g},o.reject=function(g,_){g.state=u,g.outcome=_;for(var C=-1,S=g.queue.length;++C<S;)g.queue[C].callRejected(_);return g};function E(g){var _=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof _=="function")return function(){_.apply(g,arguments)}}function x(g,_){var C=!1;function S(M){C||(C=!0,o.reject(g,M))}function O(M){C||(C=!0,o.resolve(g,M))}function B(){_(O,S)}var q=v(B);q.status==="error"&&S(q.value)}function v(g,_){var C={};try{C.value=g(_),C.status="success"}catch(S){C.status="error",C.value=S}return C}f.resolve=d;function d(g){return g instanceof this?g:o.resolve(new this(a),g)}f.reject=m;function m(g){var _=new this(a);return o.reject(_,g)}f.all=y;function y(g){var _=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=g.length,S=!1;if(!C)return this.resolve([]);for(var O=new Array(C),B=0,q=-1,M=new this(a);++q<C;)X(g[q],q);return M;function X(he,oe){_.resolve(he).then(ee,function(te){S||(S=!0,o.reject(M,te))});function ee(te){O[oe]=te,++B===C&&!S&&(S=!0,o.resolve(M,O))}}}f.race=w;function w(g){var _=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=g.length,S=!1;if(!C)return this.resolve([]);for(var O=-1,B=new this(a);++O<C;)q(g[O]);return B;function q(M){_.resolve(M).then(function(X){S||(S=!0,o.resolve(B,X))},function(X){S||(S=!0,o.reject(B,X))})}}},{immediate:36}],38:[function(n,r,i){var s=n("./lib/utils/common").assign,a=n("./lib/deflate"),o=n("./lib/inflate"),u=n("./lib/zlib/constants"),l={};s(l,a,o,u),r.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/messages"),l=n("./zlib/zstream"),c=Object.prototype.toString,f=0,h=4,p=0,E=1,x=2,v=-1,d=0,m=8;function y(C){if(!(this instanceof y))return new y(C);this.options=a.assign({level:v,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},C||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(O!==p)throw new Error(u[O]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var B;if(typeof S.dictionary=="string"?B=o.string2buf(S.dictionary):c.call(S.dictionary)==="[object ArrayBuffer]"?B=new Uint8Array(S.dictionary):B=S.dictionary,O=s.deflateSetDictionary(this.strm,B),O!==p)throw new Error(u[O]);this._dict_set=!0}}y.prototype.push=function(C,S){var O=this.strm,B=this.options.chunkSize,q,M;if(this.ended)return!1;M=S===~~S?S:S===!0?h:f,typeof C=="string"?O.input=o.string2buf(C):c.call(C)==="[object ArrayBuffer]"?O.input=new Uint8Array(C):O.input=C,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new a.Buf8(B),O.next_out=0,O.avail_out=B),q=s.deflate(O,M),q!==E&&q!==p)return this.onEnd(q),this.ended=!0,!1;(O.avail_out===0||O.avail_in===0&&(M===h||M===x))&&(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(O.output,O.next_out))):this.onData(a.shrinkBuf(O.output,O.next_out)))}while((O.avail_in>0||O.avail_out===0)&&q!==E);return M===h?(q=s.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===p):(M===x&&(this.onEnd(p),O.avail_out=0),!0)},y.prototype.onData=function(C){this.chunks.push(C)},y.prototype.onEnd=function(C){C===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function w(C,S){var O=new y(S);if(O.push(C,!0),O.err)throw O.msg||u[O.err];return O.result}function g(C,S){return S=S||{},S.raw=!0,w(C,S)}function _(C,S){return S=S||{},S.gzip=!0,w(C,S)}i.Deflate=y,i.deflate=w,i.deflateRaw=g,i.gzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/constants"),l=n("./zlib/messages"),c=n("./zlib/zstream"),f=n("./zlib/gzheader"),h=Object.prototype.toString;function p(v){if(!(this instanceof p))return new p(v);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},v||{});var d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),d.windowBits>=0&&d.windowBits<16&&!(v&&v.windowBits)&&(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(d.windowBits&15||(d.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,d.windowBits);if(m!==u.Z_OK)throw new Error(l[m]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}p.prototype.push=function(v,d){var m=this.strm,y=this.options.chunkSize,w=this.options.dictionary,g,_,C,S,O,B,q=!1;if(this.ended)return!1;_=d===~~d?d:d===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?m.input=o.binstring2buf(v):h.call(v)==="[object ArrayBuffer]"?m.input=new Uint8Array(v):m.input=v,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new a.Buf8(y),m.next_out=0,m.avail_out=y),g=s.inflate(m,u.Z_NO_FLUSH),g===u.Z_NEED_DICT&&w&&(typeof w=="string"?B=o.string2buf(w):h.call(w)==="[object ArrayBuffer]"?B=new Uint8Array(w):B=w,g=s.inflateSetDictionary(this.strm,B)),g===u.Z_BUF_ERROR&&q===!0&&(g=u.Z_OK,q=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),this.ended=!0,!1;m.next_out&&(m.avail_out===0||g===u.Z_STREAM_END||m.avail_in===0&&(_===u.Z_FINISH||_===u.Z_SYNC_FLUSH))&&(this.options.to==="string"?(C=o.utf8border(m.output,m.next_out),S=m.next_out-C,O=o.buf2string(m.output,C),m.next_out=S,m.avail_out=y-S,S&&a.arraySet(m.output,m.output,C,S,0),this.onData(O)):this.onData(a.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(q=!0)}while((m.avail_in>0||m.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(g=s.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):(_===u.Z_SYNC_FLUSH&&(this.onEnd(u.Z_OK),m.avail_out=0),!0)},p.prototype.onData=function(v){this.chunks.push(v)},p.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg};function E(v,d){var m=new p(d);if(m.push(v,!0),m.err)throw m.msg||l[m.err];return m.result}function x(v,d){return d=d||{},d.raw=!0,E(v,d)}i.Inflate=p,i.inflate=E,i.inflateRaw=x,i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var c=l.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(u[f]=c[f])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var a={arraySet:function(u,l,c,f,h){if(l.subarray&&u.subarray){u.set(l.subarray(c,c+f),h);return}for(var p=0;p<f;p++)u[h+p]=l[c+p]},flattenChunks:function(u){var l,c,f,h,p,E;for(f=0,l=0,c=u.length;l<c;l++)f+=u[l].length;for(E=new Uint8Array(f),h=0,l=0,c=u.length;l<c;l++)p=u[l],E.set(p,h),h+=p.length;return E}},o={arraySet:function(u,l,c,f,h){for(var p=0;p<f;p++)u[h+p]=l[c+p]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),l=0;l<256;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,i.string2buf=function(f){var h,p,E,x,v,d=f.length,m=0;for(x=0;x<d;x++)p=f.charCodeAt(x),(p&64512)===55296&&x+1<d&&(E=f.charCodeAt(x+1),(E&64512)===56320&&(p=65536+(p-55296<<10)+(E-56320),x++)),m+=p<128?1:p<2048?2:p<65536?3:4;for(h=new s.Buf8(m),v=0,x=0;v<m;x++)p=f.charCodeAt(x),(p&64512)===55296&&x+1<d&&(E=f.charCodeAt(x+1),(E&64512)===56320&&(p=65536+(p-55296<<10)+(E-56320),x++)),p<128?h[v++]=p:p<2048?(h[v++]=192|p>>>6,h[v++]=128|p&63):p<65536?(h[v++]=224|p>>>12,h[v++]=128|p>>>6&63,h[v++]=128|p&63):(h[v++]=240|p>>>18,h[v++]=128|p>>>12&63,h[v++]=128|p>>>6&63,h[v++]=128|p&63);return h};function c(f,h){if(h<65537&&(f.subarray&&o||!f.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(f,h));for(var p="",E=0;E<h;E++)p+=String.fromCharCode(f[E]);return p}i.buf2binstring=function(f){return c(f,f.length)},i.binstring2buf=function(f){for(var h=new s.Buf8(f.length),p=0,E=h.length;p<E;p++)h[p]=f.charCodeAt(p);return h},i.buf2string=function(f,h){var p,E,x,v,d=h||f.length,m=new Array(d*2);for(E=0,p=0;p<d;){if(x=f[p++],x<128){m[E++]=x;continue}if(v=u[x],v>4){m[E++]=65533,p+=v-1;continue}for(x&=v===2?31:v===3?15:7;v>1&&p<d;)x=x<<6|f[p++]&63,v--;if(v>1){m[E++]=65533;continue}x<65536?m[E++]=x:(x-=65536,m[E++]=55296|x>>10&1023,m[E++]=56320|x&1023)}return c(m,E)},i.utf8border=function(f,h){var p;for(h=h||f.length,h>f.length&&(h=f.length),p=h-1;p>=0&&(f[p]&192)===128;)p--;return p<0||p===0?h:p+u[f[p]]>h?p:h}},{"./common":41}],43:[function(n,r,i){function s(a,o,u,l){for(var c=a&65535|0,f=a>>>16&65535|0,h=0;u!==0;){h=u>2e3?2e3:u,u-=h;do c=c+o[l++]|0,f=f+c|0;while(--h);c%=65521,f%=65521}return c|f<<16|0}r.exports=s},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){function s(){for(var u,l=[],c=0;c<256;c++){u=c;for(var f=0;f<8;f++)u=u&1?3988292384^u>>>1:u>>>1;l[c]=u}return l}var a=s();function o(u,l,c,f){var h=a,p=f+c;u^=-1;for(var E=f;E<p;E++)u=u>>>8^h[(u^l[E])&255];return u^-1}r.exports=o},{}],46:[function(n,r,i){var s=n("../utils/common"),a=n("./trees"),o=n("./adler32"),u=n("./crc32"),l=n("./messages"),c=0,f=1,h=3,p=4,E=5,x=0,v=1,d=-2,m=-3,y=-5,w=-1,g=1,_=2,C=3,S=4,O=0,B=2,q=8,M=9,X=15,he=8,oe=29,ee=256,te=ee+1+oe,ie=30,Pe=19,Ke=2*te+1,He=15,Ce=3,Qe=258,Ve=Qe+Ce+1,Et=32,Ze=42,Y=69,se=73,ce=91,_e=103,ke=113,I=666,N=1,j=2,V=3,Q=4,G=3;function me(b,H){return b.msg=l[H],H}function fe(b){return(b<<1)-(b>4?9:0)}function de(b){for(var H=b.length;--H>=0;)b[H]=0}function ne(b){var H=b.state,K=H.pending;K>b.avail_out&&(K=b.avail_out),K!==0&&(s.arraySet(b.output,H.pending_buf,H.pending_out,K,b.next_out),b.next_out+=K,H.pending_out+=K,b.total_out+=K,b.avail_out-=K,H.pending-=K,H.pending===0&&(H.pending_out=0))}function be(b,H){a._tr_flush_block(b,b.block_start>=0?b.block_start:-1,b.strstart-b.block_start,H),b.block_start=b.strstart,ne(b.strm)}function ue(b,H){b.pending_buf[b.pending++]=H}function Ae(b,H){b.pending_buf[b.pending++]=H>>>8&255,b.pending_buf[b.pending++]=H&255}function Ne(b,H,K,D){var L=b.avail_in;return L>D&&(L=D),L===0?0:(b.avail_in-=L,s.arraySet(H,b.input,b.next_in,L,K),b.state.wrap===1?b.adler=o(b.adler,H,L,K):b.state.wrap===2&&(b.adler=u(b.adler,H,L,K)),b.next_in+=L,b.total_in+=L,L)}function ze(b,H){var K=b.max_chain_length,D=b.strstart,L,$,Oe=b.prev_length,Ee=b.nice_match,Se=b.strstart>b.w_size-Ve?b.strstart-(b.w_size-Ve):0,Xe=b.window,Sn=b.w_mask,bt=b.prev,Je=b.strstart+Qe,Rt=Xe[D+Oe-1],jt=Xe[D+Oe];b.prev_length>=b.good_match&&(K>>=2),Ee>b.lookahead&&(Ee=b.lookahead);do if(L=H,!(Xe[L+Oe]!==jt||Xe[L+Oe-1]!==Rt||Xe[L]!==Xe[D]||Xe[++L]!==Xe[D+1])){D+=2,L++;do;while(Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&Xe[++D]===Xe[++L]&&D<Je);if($=Qe-(Je-D),D=Je-Qe,$>Oe){if(b.match_start=H,Oe=$,$>=Ee)break;Rt=Xe[D+Oe-1],jt=Xe[D+Oe]}}while((H=bt[H&Sn])>Se&&--K!==0);return Oe<=b.lookahead?Oe:b.lookahead}function qe(b){var H=b.w_size,K,D,L,$,Oe;do{if($=b.window_size-b.lookahead-b.strstart,b.strstart>=H+(H-Ve)){s.arraySet(b.window,b.window,H,H,0),b.match_start-=H,b.strstart-=H,b.block_start-=H,D=b.hash_size,K=D;do L=b.head[--K],b.head[K]=L>=H?L-H:0;while(--D);D=H,K=D;do L=b.prev[--K],b.prev[K]=L>=H?L-H:0;while(--D);$+=H}if(b.strm.avail_in===0)break;if(D=Ne(b.strm,b.window,b.strstart+b.lookahead,$),b.lookahead+=D,b.lookahead+b.insert>=Ce)for(Oe=b.strstart-b.insert,b.ins_h=b.window[Oe],b.ins_h=(b.ins_h<<b.hash_shift^b.window[Oe+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[Oe+Ce-1])&b.hash_mask,b.prev[Oe&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=Oe,Oe++,b.insert--,!(b.lookahead+b.insert<Ce)););}while(b.lookahead<Ve&&b.strm.avail_in!==0)}function Ye(b,H){var K=65535;for(K>b.pending_buf_size-5&&(K=b.pending_buf_size-5);;){if(b.lookahead<=1){if(qe(b),b.lookahead===0&&H===c)return N;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var D=b.block_start+K;if((b.strstart===0||b.strstart>=D)&&(b.lookahead=b.strstart-D,b.strstart=D,be(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-Ve&&(be(b,!1),b.strm.avail_out===0))return N}return b.insert=0,H===p?(be(b,!0),b.strm.avail_out===0?V:Q):(b.strstart>b.block_start&&(be(b,!1),b.strm.avail_out===0),N)}function it(b,H){for(var K,D;;){if(b.lookahead<Ve){if(qe(b),b.lookahead<Ve&&H===c)return N;if(b.lookahead===0)break}if(K=0,b.lookahead>=Ce&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Ce-1])&b.hash_mask,K=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),K!==0&&b.strstart-K<=b.w_size-Ve&&(b.match_length=ze(b,K)),b.match_length>=Ce)if(D=a._tr_tally(b,b.strstart-b.match_start,b.match_length-Ce),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=Ce){b.match_length--;do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Ce-1])&b.hash_mask,K=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(--b.match_length!==0);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else D=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(D&&(be(b,!1),b.strm.avail_out===0))return N}return b.insert=b.strstart<Ce-1?b.strstart:Ce-1,H===p?(be(b,!0),b.strm.avail_out===0?V:Q):b.last_lit&&(be(b,!1),b.strm.avail_out===0)?N:j}function dt(b,H){for(var K,D,L;;){if(b.lookahead<Ve){if(qe(b),b.lookahead<Ve&&H===c)return N;if(b.lookahead===0)break}if(K=0,b.lookahead>=Ce&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Ce-1])&b.hash_mask,K=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=Ce-1,K!==0&&b.prev_length<b.max_lazy_match&&b.strstart-K<=b.w_size-Ve&&(b.match_length=ze(b,K),b.match_length<=5&&(b.strategy===g||b.match_length===Ce&&b.strstart-b.match_start>4096)&&(b.match_length=Ce-1)),b.prev_length>=Ce&&b.match_length<=b.prev_length){L=b.strstart+b.lookahead-Ce,D=a._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-Ce),b.lookahead-=b.prev_length-1,b.prev_length-=2;do++b.strstart<=L&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Ce-1])&b.hash_mask,K=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(--b.prev_length!==0);if(b.match_available=0,b.match_length=Ce-1,b.strstart++,D&&(be(b,!1),b.strm.avail_out===0))return N}else if(b.match_available){if(D=a._tr_tally(b,0,b.window[b.strstart-1]),D&&be(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return N}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(D=a._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<Ce-1?b.strstart:Ce-1,H===p?(be(b,!0),b.strm.avail_out===0?V:Q):b.last_lit&&(be(b,!1),b.strm.avail_out===0)?N:j}function Kt(b,H){for(var K,D,L,$,Oe=b.window;;){if(b.lookahead<=Qe){if(qe(b),b.lookahead<=Qe&&H===c)return N;if(b.lookahead===0)break}if(b.match_length=0,b.lookahead>=Ce&&b.strstart>0&&(L=b.strstart-1,D=Oe[L],D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L])){$=b.strstart+Qe;do;while(D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L]&&D===Oe[++L]&&L<$);b.match_length=Qe-($-L),b.match_length>b.lookahead&&(b.match_length=b.lookahead)}if(b.match_length>=Ce?(K=a._tr_tally(b,1,b.match_length-Ce),b.lookahead-=b.match_length,b.strstart+=b.match_length,b.match_length=0):(K=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++),K&&(be(b,!1),b.strm.avail_out===0))return N}return b.insert=0,H===p?(be(b,!0),b.strm.avail_out===0?V:Q):b.last_lit&&(be(b,!1),b.strm.avail_out===0)?N:j}function on(b,H){for(var K;;){if(b.lookahead===0&&(qe(b),b.lookahead===0)){if(H===c)return N;break}if(b.match_length=0,K=a._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++,K&&(be(b,!1),b.strm.avail_out===0))return N}return b.insert=0,H===p?(be(b,!0),b.strm.avail_out===0?V:Q):b.last_lit&&(be(b,!1),b.strm.avail_out===0)?N:j}function mt(b,H,K,D,L){this.good_length=b,this.max_lazy=H,this.nice_length=K,this.max_chain=D,this.func=L}var $t;$t=[new mt(0,0,0,0,Ye),new mt(4,4,8,4,it),new mt(4,5,16,8,it),new mt(4,6,32,32,it),new mt(4,4,16,16,dt),new mt(8,16,32,32,dt),new mt(8,16,128,128,dt),new mt(8,32,128,256,dt),new mt(32,128,258,1024,dt),new mt(32,258,258,4096,dt)];function Ct(b){b.window_size=2*b.w_size,de(b.head),b.max_lazy_match=$t[b.level].max_lazy,b.good_match=$t[b.level].good_length,b.nice_match=$t[b.level].nice_length,b.max_chain_length=$t[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=Ce-1,b.match_available=0,b.ins_h=0}function k(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(Ke*2),this.dyn_dtree=new s.Buf16((2*ie+1)*2),this.bl_tree=new s.Buf16((2*Pe+1)*2),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(He+1),this.heap=new s.Buf16(2*te+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*te+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(b){var H;return!b||!b.state?me(b,d):(b.total_in=b.total_out=0,b.data_type=B,H=b.state,H.pending=0,H.pending_out=0,H.wrap<0&&(H.wrap=-H.wrap),H.status=H.wrap?Ze:ke,b.adler=H.wrap===2?0:1,H.last_flush=c,a._tr_init(H),x)}function pe(b){var H=re(b);return H===x&&Ct(b.state),H}function De(b,H){return!b||!b.state||b.state.wrap!==2?d:(b.state.gzhead=H,x)}function F(b,H,K,D,L,$){if(!b)return d;var Oe=1;if(H===w&&(H=6),D<0?(Oe=0,D=-D):D>15&&(Oe=2,D-=16),L<1||L>M||K!==q||D<8||D>15||H<0||H>9||$<0||$>S)return me(b,d);D===8&&(D=9);var Ee=new k;return b.state=Ee,Ee.strm=b,Ee.wrap=Oe,Ee.gzhead=null,Ee.w_bits=D,Ee.w_size=1<<Ee.w_bits,Ee.w_mask=Ee.w_size-1,Ee.hash_bits=L+7,Ee.hash_size=1<<Ee.hash_bits,Ee.hash_mask=Ee.hash_size-1,Ee.hash_shift=~~((Ee.hash_bits+Ce-1)/Ce),Ee.window=new s.Buf8(Ee.w_size*2),Ee.head=new s.Buf16(Ee.hash_size),Ee.prev=new s.Buf16(Ee.w_size),Ee.lit_bufsize=1<<L+6,Ee.pending_buf_size=Ee.lit_bufsize*4,Ee.pending_buf=new s.Buf8(Ee.pending_buf_size),Ee.d_buf=1*Ee.lit_bufsize,Ee.l_buf=(1+2)*Ee.lit_bufsize,Ee.level=H,Ee.strategy=$,Ee.method=K,pe(b)}function Z(b,H){return F(b,H,q,X,he,O)}function A(b,H){var K,D,L,$;if(!b||!b.state||H>E||H<0)return b?me(b,d):d;if(D=b.state,!b.output||!b.input&&b.avail_in!==0||D.status===I&&H!==p)return me(b,b.avail_out===0?y:d);if(D.strm=b,K=D.last_flush,D.last_flush=H,D.status===Ze)if(D.wrap===2)b.adler=0,ue(D,31),ue(D,139),ue(D,8),D.gzhead?(ue(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),ue(D,D.gzhead.time&255),ue(D,D.gzhead.time>>8&255),ue(D,D.gzhead.time>>16&255),ue(D,D.gzhead.time>>24&255),ue(D,D.level===9?2:D.strategy>=_||D.level<2?4:0),ue(D,D.gzhead.os&255),D.gzhead.extra&&D.gzhead.extra.length&&(ue(D,D.gzhead.extra.length&255),ue(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(b.adler=u(b.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=Y):(ue(D,0),ue(D,0),ue(D,0),ue(D,0),ue(D,0),ue(D,D.level===9?2:D.strategy>=_||D.level<2?4:0),ue(D,G),D.status=ke);else{var Oe=q+(D.w_bits-8<<4)<<8,Ee=-1;D.strategy>=_||D.level<2?Ee=0:D.level<6?Ee=1:D.level===6?Ee=2:Ee=3,Oe|=Ee<<6,D.strstart!==0&&(Oe|=Et),Oe+=31-Oe%31,D.status=ke,Ae(D,Oe),D.strstart!==0&&(Ae(D,b.adler>>>16),Ae(D,b.adler&65535)),b.adler=1}if(D.status===Y)if(D.gzhead.extra){for(L=D.pending;D.gzindex<(D.gzhead.extra.length&65535)&&!(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>L&&(b.adler=u(b.adler,D.pending_buf,D.pending-L,L)),ne(b),L=D.pending,D.pending===D.pending_buf_size));)ue(D,D.gzhead.extra[D.gzindex]&255),D.gzindex++;D.gzhead.hcrc&&D.pending>L&&(b.adler=u(b.adler,D.pending_buf,D.pending-L,L)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=se)}else D.status=se;if(D.status===se)if(D.gzhead.name){L=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>L&&(b.adler=u(b.adler,D.pending_buf,D.pending-L,L)),ne(b),L=D.pending,D.pending===D.pending_buf_size)){$=1;break}D.gzindex<D.gzhead.name.length?$=D.gzhead.name.charCodeAt(D.gzindex++)&255:$=0,ue(D,$)}while($!==0);D.gzhead.hcrc&&D.pending>L&&(b.adler=u(b.adler,D.pending_buf,D.pending-L,L)),$===0&&(D.gzindex=0,D.status=ce)}else D.status=ce;if(D.status===ce)if(D.gzhead.comment){L=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>L&&(b.adler=u(b.adler,D.pending_buf,D.pending-L,L)),ne(b),L=D.pending,D.pending===D.pending_buf_size)){$=1;break}D.gzindex<D.gzhead.comment.length?$=D.gzhead.comment.charCodeAt(D.gzindex++)&255:$=0,ue(D,$)}while($!==0);D.gzhead.hcrc&&D.pending>L&&(b.adler=u(b.adler,D.pending_buf,D.pending-L,L)),$===0&&(D.status=_e)}else D.status=_e;if(D.status===_e&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&ne(b),D.pending+2<=D.pending_buf_size&&(ue(D,b.adler&255),ue(D,b.adler>>8&255),b.adler=0,D.status=ke)):D.status=ke),D.pending!==0){if(ne(b),b.avail_out===0)return D.last_flush=-1,x}else if(b.avail_in===0&&fe(H)<=fe(K)&&H!==p)return me(b,y);if(D.status===I&&b.avail_in!==0)return me(b,y);if(b.avail_in!==0||D.lookahead!==0||H!==c&&D.status!==I){var Se=D.strategy===_?on(D,H):D.strategy===C?Kt(D,H):$t[D.level].func(D,H);if((Se===V||Se===Q)&&(D.status=I),Se===N||Se===V)return b.avail_out===0&&(D.last_flush=-1),x;if(Se===j&&(H===f?a._tr_align(D):H!==E&&(a._tr_stored_block(D,0,0,!1),H===h&&(de(D.head),D.lookahead===0&&(D.strstart=0,D.block_start=0,D.insert=0))),ne(b),b.avail_out===0))return D.last_flush=-1,x}return H!==p?x:D.wrap<=0?v:(D.wrap===2?(ue(D,b.adler&255),ue(D,b.adler>>8&255),ue(D,b.adler>>16&255),ue(D,b.adler>>24&255),ue(D,b.total_in&255),ue(D,b.total_in>>8&255),ue(D,b.total_in>>16&255),ue(D,b.total_in>>24&255)):(Ae(D,b.adler>>>16),Ae(D,b.adler&65535)),ne(b),D.wrap>0&&(D.wrap=-D.wrap),D.pending!==0?x:v)}function ae(b){var H;return!b||!b.state?d:(H=b.state.status,H!==Ze&&H!==Y&&H!==se&&H!==ce&&H!==_e&&H!==ke&&H!==I?me(b,d):(b.state=null,H===ke?me(b,m):x))}function Fe(b,H){var K=H.length,D,L,$,Oe,Ee,Se,Xe,Sn;if(!b||!b.state||(D=b.state,Oe=D.wrap,Oe===2||Oe===1&&D.status!==Ze||D.lookahead))return d;for(Oe===1&&(b.adler=o(b.adler,H,K,0)),D.wrap=0,K>=D.w_size&&(Oe===0&&(de(D.head),D.strstart=0,D.block_start=0,D.insert=0),Sn=new s.Buf8(D.w_size),s.arraySet(Sn,H,K-D.w_size,D.w_size,0),H=Sn,K=D.w_size),Ee=b.avail_in,Se=b.next_in,Xe=b.input,b.avail_in=K,b.next_in=0,b.input=H,qe(D);D.lookahead>=Ce;){L=D.strstart,$=D.lookahead-(Ce-1);do D.ins_h=(D.ins_h<<D.hash_shift^D.window[L+Ce-1])&D.hash_mask,D.prev[L&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=L,L++;while(--$);D.strstart=L,D.lookahead=Ce-1,qe(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=Ce-1,D.match_available=0,b.next_in=Se,b.input=Xe,b.avail_in=Ee,D.wrap=Oe,x}i.deflateInit=Z,i.deflateInit2=F,i.deflateReset=pe,i.deflateResetKeep=re,i.deflateSetHeader=De,i.deflate=A,i.deflateEnd=ae,i.deflateSetDictionary=Fe,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=s},{}],48:[function(n,r,i){var s=30,a=12;r.exports=function(u,l){var c,f,h,p,E,x,v,d,m,y,w,g,_,C,S,O,B,q,M,X,he,oe,ee,te,ie;c=u.state,f=u.next_in,te=u.input,h=f+(u.avail_in-5),p=u.next_out,ie=u.output,E=p-(l-u.avail_out),x=p+(u.avail_out-257),v=c.dmax,d=c.wsize,m=c.whave,y=c.wnext,w=c.window,g=c.hold,_=c.bits,C=c.lencode,S=c.distcode,O=(1<<c.lenbits)-1,B=(1<<c.distbits)-1;e:do{_<15&&(g+=te[f++]<<_,_+=8,g+=te[f++]<<_,_+=8),q=C[g&O];t:for(;;){if(M=q>>>24,g>>>=M,_-=M,M=q>>>16&255,M===0)ie[p++]=q&65535;else if(M&16){X=q&65535,M&=15,M&&(_<M&&(g+=te[f++]<<_,_+=8),X+=g&(1<<M)-1,g>>>=M,_-=M),_<15&&(g+=te[f++]<<_,_+=8,g+=te[f++]<<_,_+=8),q=S[g&B];n:for(;;){if(M=q>>>24,g>>>=M,_-=M,M=q>>>16&255,M&16){if(he=q&65535,M&=15,_<M&&(g+=te[f++]<<_,_+=8,_<M&&(g+=te[f++]<<_,_+=8)),he+=g&(1<<M)-1,he>v){u.msg="invalid distance too far back",c.mode=s;break e}if(g>>>=M,_-=M,M=p-E,he>M){if(M=he-M,M>m&&c.sane){u.msg="invalid distance too far back",c.mode=s;break e}if(oe=0,ee=w,y===0){if(oe+=d-M,M<X){X-=M;do ie[p++]=w[oe++];while(--M);oe=p-he,ee=ie}}else if(y<M){if(oe+=d+y-M,M-=y,M<X){X-=M;do ie[p++]=w[oe++];while(--M);if(oe=0,y<X){M=y,X-=M;do ie[p++]=w[oe++];while(--M);oe=p-he,ee=ie}}}else if(oe+=y-M,M<X){X-=M;do ie[p++]=w[oe++];while(--M);oe=p-he,ee=ie}for(;X>2;)ie[p++]=ee[oe++],ie[p++]=ee[oe++],ie[p++]=ee[oe++],X-=3;X&&(ie[p++]=ee[oe++],X>1&&(ie[p++]=ee[oe++]))}else{oe=p-he;do ie[p++]=ie[oe++],ie[p++]=ie[oe++],ie[p++]=ie[oe++],X-=3;while(X>2);X&&(ie[p++]=ie[oe++],X>1&&(ie[p++]=ie[oe++]))}}else if(M&64){u.msg="invalid distance code",c.mode=s;break e}else{q=S[(q&65535)+(g&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){c.mode=a;break e}else{u.msg="invalid literal/length code",c.mode=s;break e}else{q=C[(q&65535)+(g&(1<<M)-1)];continue t}break}}while(f<h&&p<x);X=_>>3,f-=X,_-=X<<3,g&=(1<<_)-1,u.next_in=f,u.next_out=p,u.avail_in=f<h?5+(h-f):5-(f-h),u.avail_out=p<x?257+(x-p):257-(p-x),c.hold=g,c.bits=_}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),u=n("./inffast"),l=n("./inftrees"),c=0,f=1,h=2,p=4,E=5,x=6,v=0,d=1,m=2,y=-2,w=-3,g=-4,_=-5,C=8,S=1,O=2,B=3,q=4,M=5,X=6,he=7,oe=8,ee=9,te=10,ie=11,Pe=12,Ke=13,He=14,Ce=15,Qe=16,Ve=17,Et=18,Ze=19,Y=20,se=21,ce=22,_e=23,ke=24,I=25,N=26,j=27,V=28,Q=29,G=30,me=31,fe=32,de=852,ne=592,be=15,ue=be;function Ae(F){return(F>>>24&255)+(F>>>8&65280)+((F&65280)<<8)+((F&255)<<24)}function Ne(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ze(F){var Z;return!F||!F.state?y:(Z=F.state,F.total_in=F.total_out=Z.total=0,F.msg="",Z.wrap&&(F.adler=Z.wrap&1),Z.mode=S,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new s.Buf32(de),Z.distcode=Z.distdyn=new s.Buf32(ne),Z.sane=1,Z.back=-1,v)}function qe(F){var Z;return!F||!F.state?y:(Z=F.state,Z.wsize=0,Z.whave=0,Z.wnext=0,ze(F))}function Ye(F,Z){var A,ae;return!F||!F.state||(ae=F.state,Z<0?(A=0,Z=-Z):(A=(Z>>4)+1,Z<48&&(Z&=15)),Z&&(Z<8||Z>15))?y:(ae.window!==null&&ae.wbits!==Z&&(ae.window=null),ae.wrap=A,ae.wbits=Z,qe(F))}function it(F,Z){var A,ae;return F?(ae=new Ne,F.state=ae,ae.window=null,A=Ye(F,Z),A!==v&&(F.state=null),A):y}function dt(F){return it(F,ue)}var Kt=!0,on,mt;function $t(F){if(Kt){var Z;for(on=new s.Buf32(512),mt=new s.Buf32(32),Z=0;Z<144;)F.lens[Z++]=8;for(;Z<256;)F.lens[Z++]=9;for(;Z<280;)F.lens[Z++]=7;for(;Z<288;)F.lens[Z++]=8;for(l(f,F.lens,0,288,on,0,F.work,{bits:9}),Z=0;Z<32;)F.lens[Z++]=5;l(h,F.lens,0,32,mt,0,F.work,{bits:5}),Kt=!1}F.lencode=on,F.lenbits=9,F.distcode=mt,F.distbits=5}function Ct(F,Z,A,ae){var Fe,b=F.state;return b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new s.Buf8(b.wsize)),ae>=b.wsize?(s.arraySet(b.window,Z,A-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(Fe=b.wsize-b.wnext,Fe>ae&&(Fe=ae),s.arraySet(b.window,Z,A-ae,Fe,b.wnext),ae-=Fe,ae?(s.arraySet(b.window,Z,A-ae,ae,0),b.wnext=ae,b.whave=b.wsize):(b.wnext+=Fe,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=Fe))),0}function k(F,Z){var A,ae,Fe,b,H,K,D,L,$,Oe,Ee,Se,Xe,Sn,bt=0,Je,Rt,jt,Yt,gi,vi,At,un,Mt=new s.Buf8(4),Tn,yn,da=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return y;A=F.state,A.mode===Pe&&(A.mode=Ke),H=F.next_out,Fe=F.output,D=F.avail_out,b=F.next_in,ae=F.input,K=F.avail_in,L=A.hold,$=A.bits,Oe=K,Ee=D,un=v;e:for(;;)switch(A.mode){case S:if(A.wrap===0){A.mode=Ke;break}for(;$<16;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(A.wrap&2&&L===35615){A.check=0,Mt[0]=L&255,Mt[1]=L>>>8&255,A.check=o(A.check,Mt,2,0),L=0,$=0,A.mode=O;break}if(A.flags=0,A.head&&(A.head.done=!1),!(A.wrap&1)||(((L&255)<<8)+(L>>8))%31){F.msg="incorrect header check",A.mode=G;break}if((L&15)!==C){F.msg="unknown compression method",A.mode=G;break}if(L>>>=4,$-=4,At=(L&15)+8,A.wbits===0)A.wbits=At;else if(At>A.wbits){F.msg="invalid window size",A.mode=G;break}A.dmax=1<<At,F.adler=A.check=1,A.mode=L&512?te:Pe,L=0,$=0;break;case O:for(;$<16;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(A.flags=L,(A.flags&255)!==C){F.msg="unknown compression method",A.mode=G;break}if(A.flags&57344){F.msg="unknown header flags set",A.mode=G;break}A.head&&(A.head.text=L>>8&1),A.flags&512&&(Mt[0]=L&255,Mt[1]=L>>>8&255,A.check=o(A.check,Mt,2,0)),L=0,$=0,A.mode=B;case B:for(;$<32;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}A.head&&(A.head.time=L),A.flags&512&&(Mt[0]=L&255,Mt[1]=L>>>8&255,Mt[2]=L>>>16&255,Mt[3]=L>>>24&255,A.check=o(A.check,Mt,4,0)),L=0,$=0,A.mode=q;case q:for(;$<16;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}A.head&&(A.head.xflags=L&255,A.head.os=L>>8),A.flags&512&&(Mt[0]=L&255,Mt[1]=L>>>8&255,A.check=o(A.check,Mt,2,0)),L=0,$=0,A.mode=M;case M:if(A.flags&1024){for(;$<16;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}A.length=L,A.head&&(A.head.extra_len=L),A.flags&512&&(Mt[0]=L&255,Mt[1]=L>>>8&255,A.check=o(A.check,Mt,2,0)),L=0,$=0}else A.head&&(A.head.extra=null);A.mode=X;case X:if(A.flags&1024&&(Se=A.length,Se>K&&(Se=K),Se&&(A.head&&(At=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),s.arraySet(A.head.extra,ae,b,Se,At)),A.flags&512&&(A.check=o(A.check,ae,Se,b)),K-=Se,b+=Se,A.length-=Se),A.length))break e;A.length=0,A.mode=he;case he:if(A.flags&2048){if(K===0)break e;Se=0;do At=ae[b+Se++],A.head&&At&&A.length<65536&&(A.head.name+=String.fromCharCode(At));while(At&&Se<K);if(A.flags&512&&(A.check=o(A.check,ae,Se,b)),K-=Se,b+=Se,At)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=oe;case oe:if(A.flags&4096){if(K===0)break e;Se=0;do At=ae[b+Se++],A.head&&At&&A.length<65536&&(A.head.comment+=String.fromCharCode(At));while(At&&Se<K);if(A.flags&512&&(A.check=o(A.check,ae,Se,b)),K-=Se,b+=Se,At)break e}else A.head&&(A.head.comment=null);A.mode=ee;case ee:if(A.flags&512){for(;$<16;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(L!==(A.check&65535)){F.msg="header crc mismatch",A.mode=G;break}L=0,$=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),F.adler=A.check=0,A.mode=Pe;break;case te:for(;$<32;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}F.adler=A.check=Ae(L),L=0,$=0,A.mode=ie;case ie:if(A.havedict===0)return F.next_out=H,F.avail_out=D,F.next_in=b,F.avail_in=K,A.hold=L,A.bits=$,m;F.adler=A.check=1,A.mode=Pe;case Pe:if(Z===E||Z===x)break e;case Ke:if(A.last){L>>>=$&7,$-=$&7,A.mode=j;break}for(;$<3;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}switch(A.last=L&1,L>>>=1,$-=1,L&3){case 0:A.mode=He;break;case 1:if($t(A),A.mode=Y,Z===x){L>>>=2,$-=2;break e}break;case 2:A.mode=Ve;break;case 3:F.msg="invalid block type",A.mode=G}L>>>=2,$-=2;break;case He:for(L>>>=$&7,$-=$&7;$<32;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if((L&65535)!==(L>>>16^65535)){F.msg="invalid stored block lengths",A.mode=G;break}if(A.length=L&65535,L=0,$=0,A.mode=Ce,Z===x)break e;case Ce:A.mode=Qe;case Qe:if(Se=A.length,Se){if(Se>K&&(Se=K),Se>D&&(Se=D),Se===0)break e;s.arraySet(Fe,ae,b,Se,H),K-=Se,b+=Se,D-=Se,H+=Se,A.length-=Se;break}A.mode=Pe;break;case Ve:for(;$<14;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(A.nlen=(L&31)+257,L>>>=5,$-=5,A.ndist=(L&31)+1,L>>>=5,$-=5,A.ncode=(L&15)+4,L>>>=4,$-=4,A.nlen>286||A.ndist>30){F.msg="too many length or distance symbols",A.mode=G;break}A.have=0,A.mode=Et;case Et:for(;A.have<A.ncode;){for(;$<3;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}A.lens[da[A.have++]]=L&7,L>>>=3,$-=3}for(;A.have<19;)A.lens[da[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,Tn={bits:A.lenbits},un=l(c,A.lens,0,19,A.lencode,0,A.work,Tn),A.lenbits=Tn.bits,un){F.msg="invalid code lengths set",A.mode=G;break}A.have=0,A.mode=Ze;case Ze:for(;A.have<A.nlen+A.ndist;){for(;bt=A.lencode[L&(1<<A.lenbits)-1],Je=bt>>>24,Rt=bt>>>16&255,jt=bt&65535,!(Je<=$);){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(jt<16)L>>>=Je,$-=Je,A.lens[A.have++]=jt;else{if(jt===16){for(yn=Je+2;$<yn;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(L>>>=Je,$-=Je,A.have===0){F.msg="invalid bit length repeat",A.mode=G;break}At=A.lens[A.have-1],Se=3+(L&3),L>>>=2,$-=2}else if(jt===17){for(yn=Je+3;$<yn;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}L>>>=Je,$-=Je,At=0,Se=3+(L&7),L>>>=3,$-=3}else{for(yn=Je+7;$<yn;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}L>>>=Je,$-=Je,At=0,Se=11+(L&127),L>>>=7,$-=7}if(A.have+Se>A.nlen+A.ndist){F.msg="invalid bit length repeat",A.mode=G;break}for(;Se--;)A.lens[A.have++]=At}}if(A.mode===G)break;if(A.lens[256]===0){F.msg="invalid code -- missing end-of-block",A.mode=G;break}if(A.lenbits=9,Tn={bits:A.lenbits},un=l(f,A.lens,0,A.nlen,A.lencode,0,A.work,Tn),A.lenbits=Tn.bits,un){F.msg="invalid literal/lengths set",A.mode=G;break}if(A.distbits=6,A.distcode=A.distdyn,Tn={bits:A.distbits},un=l(h,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,Tn),A.distbits=Tn.bits,un){F.msg="invalid distances set",A.mode=G;break}if(A.mode=Y,Z===x)break e;case Y:A.mode=se;case se:if(K>=6&&D>=258){F.next_out=H,F.avail_out=D,F.next_in=b,F.avail_in=K,A.hold=L,A.bits=$,u(F,Ee),H=F.next_out,Fe=F.output,D=F.avail_out,b=F.next_in,ae=F.input,K=F.avail_in,L=A.hold,$=A.bits,A.mode===Pe&&(A.back=-1);break}for(A.back=0;bt=A.lencode[L&(1<<A.lenbits)-1],Je=bt>>>24,Rt=bt>>>16&255,jt=bt&65535,!(Je<=$);){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(Rt&&!(Rt&240)){for(Yt=Je,gi=Rt,vi=jt;bt=A.lencode[vi+((L&(1<<Yt+gi)-1)>>Yt)],Je=bt>>>24,Rt=bt>>>16&255,jt=bt&65535,!(Yt+Je<=$);){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}L>>>=Yt,$-=Yt,A.back+=Yt}if(L>>>=Je,$-=Je,A.back+=Je,A.length=jt,Rt===0){A.mode=N;break}if(Rt&32){A.back=-1,A.mode=Pe;break}if(Rt&64){F.msg="invalid literal/length code",A.mode=G;break}A.extra=Rt&15,A.mode=ce;case ce:if(A.extra){for(yn=A.extra;$<yn;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}A.length+=L&(1<<A.extra)-1,L>>>=A.extra,$-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=_e;case _e:for(;bt=A.distcode[L&(1<<A.distbits)-1],Je=bt>>>24,Rt=bt>>>16&255,jt=bt&65535,!(Je<=$);){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(!(Rt&240)){for(Yt=Je,gi=Rt,vi=jt;bt=A.distcode[vi+((L&(1<<Yt+gi)-1)>>Yt)],Je=bt>>>24,Rt=bt>>>16&255,jt=bt&65535,!(Yt+Je<=$);){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}L>>>=Yt,$-=Yt,A.back+=Yt}if(L>>>=Je,$-=Je,A.back+=Je,Rt&64){F.msg="invalid distance code",A.mode=G;break}A.offset=jt,A.extra=Rt&15,A.mode=ke;case ke:if(A.extra){for(yn=A.extra;$<yn;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}A.offset+=L&(1<<A.extra)-1,L>>>=A.extra,$-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){F.msg="invalid distance too far back",A.mode=G;break}A.mode=I;case I:if(D===0)break e;if(Se=Ee-D,A.offset>Se){if(Se=A.offset-Se,Se>A.whave&&A.sane){F.msg="invalid distance too far back",A.mode=G;break}Se>A.wnext?(Se-=A.wnext,Xe=A.wsize-Se):Xe=A.wnext-Se,Se>A.length&&(Se=A.length),Sn=A.window}else Sn=Fe,Xe=H-A.offset,Se=A.length;Se>D&&(Se=D),D-=Se,A.length-=Se;do Fe[H++]=Sn[Xe++];while(--Se);A.length===0&&(A.mode=se);break;case N:if(D===0)break e;Fe[H++]=A.length,D--,A.mode=se;break;case j:if(A.wrap){for(;$<32;){if(K===0)break e;K--,L|=ae[b++]<<$,$+=8}if(Ee-=D,F.total_out+=Ee,A.total+=Ee,Ee&&(F.adler=A.check=A.flags?o(A.check,Fe,Ee,H-Ee):a(A.check,Fe,Ee,H-Ee)),Ee=D,(A.flags?L:Ae(L))!==A.check){F.msg="incorrect data check",A.mode=G;break}L=0,$=0}A.mode=V;case V:if(A.wrap&&A.flags){for(;$<32;){if(K===0)break e;K--,L+=ae[b++]<<$,$+=8}if(L!==(A.total&4294967295)){F.msg="incorrect length check",A.mode=G;break}L=0,$=0}A.mode=Q;case Q:un=d;break e;case G:un=w;break e;case me:return g;case fe:default:return y}return F.next_out=H,F.avail_out=D,F.next_in=b,F.avail_in=K,A.hold=L,A.bits=$,(A.wsize||Ee!==F.avail_out&&A.mode<G&&(A.mode<j||Z!==p))&&Ct(F,F.output,F.next_out,Ee-F.avail_out),Oe-=F.avail_in,Ee-=F.avail_out,F.total_in+=Oe,F.total_out+=Ee,A.total+=Ee,A.wrap&&Ee&&(F.adler=A.check=A.flags?o(A.check,Fe,Ee,F.next_out-Ee):a(A.check,Fe,Ee,F.next_out-Ee)),F.data_type=A.bits+(A.last?64:0)+(A.mode===Pe?128:0)+(A.mode===Y||A.mode===Ce?256:0),(Oe===0&&Ee===0||Z===p)&&un===v&&(un=_),un}function re(F){if(!F||!F.state)return y;var Z=F.state;return Z.window&&(Z.window=null),F.state=null,v}function pe(F,Z){var A;return!F||!F.state||(A=F.state,!(A.wrap&2))?y:(A.head=Z,Z.done=!1,v)}function De(F,Z){var A=Z.length,ae,Fe,b;return!F||!F.state||(ae=F.state,ae.wrap!==0&&ae.mode!==ie)?y:ae.mode===ie&&(Fe=1,Fe=a(Fe,Z,A,0),Fe!==ae.check)?w:(b=Ct(F,Z,A,A),b?(ae.mode=me,g):(ae.havedict=1,v))}i.inflateReset=qe,i.inflateReset2=Ye,i.inflateResetKeep=ze,i.inflateInit=dt,i.inflateInit2=it,i.inflate=k,i.inflateEnd=re,i.inflateGetHeader=pe,i.inflateSetDictionary=De,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=15,o=852,u=592,l=0,c=1,f=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,y,w,g,_,C,S){var O=S.bits,B=0,q=0,M=0,X=0,he=0,oe=0,ee=0,te=0,ie=0,Pe=0,Ke,He,Ce,Qe,Ve,Et=null,Ze=0,Y,se=new s.Buf16(a+1),ce=new s.Buf16(a+1),_e=null,ke=0,I,N,j;for(B=0;B<=a;B++)se[B]=0;for(q=0;q<w;q++)se[m[y+q]]++;for(he=O,X=a;X>=1&&se[X]===0;X--);if(he>X&&(he=X),X===0)return g[_++]=1<<24|64<<16|0,g[_++]=1<<24|64<<16|0,S.bits=1,0;for(M=1;M<X&&se[M]===0;M++);for(he<M&&(he=M),te=1,B=1;B<=a;B++)if(te<<=1,te-=se[B],te<0)return-1;if(te>0&&(d===l||X!==1))return-1;for(ce[1]=0,B=1;B<a;B++)ce[B+1]=ce[B]+se[B];for(q=0;q<w;q++)m[y+q]!==0&&(C[ce[m[y+q]]++]=q);if(d===l?(Et=_e=C,Y=19):d===c?(Et=h,Ze-=257,_e=p,ke-=257,Y=256):(Et=E,_e=x,Y=-1),Pe=0,q=0,B=M,Ve=_,oe=he,ee=0,Ce=-1,ie=1<<he,Qe=ie-1,d===c&&ie>o||d===f&&ie>u)return 1;for(;;){I=B-ee,C[q]<Y?(N=0,j=C[q]):C[q]>Y?(N=_e[ke+C[q]],j=Et[Ze+C[q]]):(N=32+64,j=0),Ke=1<<B-ee,He=1<<oe,M=He;do He-=Ke,g[Ve+(Pe>>ee)+He]=I<<24|N<<16|j|0;while(He!==0);for(Ke=1<<B-1;Pe&Ke;)Ke>>=1;if(Ke!==0?(Pe&=Ke-1,Pe+=Ke):Pe=0,q++,--se[B]===0){if(B===X)break;B=m[y+C[q]]}if(B>he&&(Pe&Qe)!==Ce){for(ee===0&&(ee=he),Ve+=M,oe=B-ee,te=1<<oe;oe+ee<X&&(te-=se[oe+ee],!(te<=0));)oe++,te<<=1;if(ie+=1<<oe,d===c&&ie>o||d===f&&ie>u)return 1;Ce=Pe&Qe,g[Ce]=he<<24|oe<<16|Ve-_|0}}return Pe!==0&&(g[Ve+Pe]=B-ee<<24|64<<16|0),S.bits=he,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=4,o=0,u=1,l=2;function c(k){for(var re=k.length;--re>=0;)k[re]=0}var f=0,h=1,p=2,E=3,x=258,v=29,d=256,m=d+1+v,y=30,w=19,g=2*m+1,_=15,C=16,S=7,O=256,B=16,q=17,M=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],he=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=512,ie=new Array((m+2)*2);c(ie);var Pe=new Array(y*2);c(Pe);var Ke=new Array(te);c(Ke);var He=new Array(x-E+1);c(He);var Ce=new Array(v);c(Ce);var Qe=new Array(y);c(Qe);function Ve(k,re,pe,De,F){this.static_tree=k,this.extra_bits=re,this.extra_base=pe,this.elems=De,this.max_length=F,this.has_stree=k&&k.length}var Et,Ze,Y;function se(k,re){this.dyn_tree=k,this.max_code=0,this.stat_desc=re}function ce(k){return k<256?Ke[k]:Ke[256+(k>>>7)]}function _e(k,re){k.pending_buf[k.pending++]=re&255,k.pending_buf[k.pending++]=re>>>8&255}function ke(k,re,pe){k.bi_valid>C-pe?(k.bi_buf|=re<<k.bi_valid&65535,_e(k,k.bi_buf),k.bi_buf=re>>C-k.bi_valid,k.bi_valid+=pe-C):(k.bi_buf|=re<<k.bi_valid&65535,k.bi_valid+=pe)}function I(k,re,pe){ke(k,pe[re*2],pe[re*2+1])}function N(k,re){var pe=0;do pe|=k&1,k>>>=1,pe<<=1;while(--re>0);return pe>>>1}function j(k){k.bi_valid===16?(_e(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):k.bi_valid>=8&&(k.pending_buf[k.pending++]=k.bi_buf&255,k.bi_buf>>=8,k.bi_valid-=8)}function V(k,re){var pe=re.dyn_tree,De=re.max_code,F=re.stat_desc.static_tree,Z=re.stat_desc.has_stree,A=re.stat_desc.extra_bits,ae=re.stat_desc.extra_base,Fe=re.stat_desc.max_length,b,H,K,D,L,$,Oe=0;for(D=0;D<=_;D++)k.bl_count[D]=0;for(pe[k.heap[k.heap_max]*2+1]=0,b=k.heap_max+1;b<g;b++)H=k.heap[b],D=pe[pe[H*2+1]*2+1]+1,D>Fe&&(D=Fe,Oe++),pe[H*2+1]=D,!(H>De)&&(k.bl_count[D]++,L=0,H>=ae&&(L=A[H-ae]),$=pe[H*2],k.opt_len+=$*(D+L),Z&&(k.static_len+=$*(F[H*2+1]+L)));if(Oe!==0){do{for(D=Fe-1;k.bl_count[D]===0;)D--;k.bl_count[D]--,k.bl_count[D+1]+=2,k.bl_count[Fe]--,Oe-=2}while(Oe>0);for(D=Fe;D!==0;D--)for(H=k.bl_count[D];H!==0;)K=k.heap[--b],!(K>De)&&(pe[K*2+1]!==D&&(k.opt_len+=(D-pe[K*2+1])*pe[K*2],pe[K*2+1]=D),H--)}}function Q(k,re,pe){var De=new Array(_+1),F=0,Z,A;for(Z=1;Z<=_;Z++)De[Z]=F=F+pe[Z-1]<<1;for(A=0;A<=re;A++){var ae=k[A*2+1];ae!==0&&(k[A*2]=N(De[ae]++,ae))}}function G(){var k,re,pe,De,F,Z=new Array(_+1);for(pe=0,De=0;De<v-1;De++)for(Ce[De]=pe,k=0;k<1<<X[De];k++)He[pe++]=De;for(He[pe-1]=De,F=0,De=0;De<16;De++)for(Qe[De]=F,k=0;k<1<<he[De];k++)Ke[F++]=De;for(F>>=7;De<y;De++)for(Qe[De]=F<<7,k=0;k<1<<he[De]-7;k++)Ke[256+F++]=De;for(re=0;re<=_;re++)Z[re]=0;for(k=0;k<=143;)ie[k*2+1]=8,k++,Z[8]++;for(;k<=255;)ie[k*2+1]=9,k++,Z[9]++;for(;k<=279;)ie[k*2+1]=7,k++,Z[7]++;for(;k<=287;)ie[k*2+1]=8,k++,Z[8]++;for(Q(ie,m+1,Z),k=0;k<y;k++)Pe[k*2+1]=5,Pe[k*2]=N(k,5);Et=new Ve(ie,X,d+1,m,_),Ze=new Ve(Pe,he,0,y,_),Y=new Ve(new Array(0),oe,0,w,S)}function me(k){var re;for(re=0;re<m;re++)k.dyn_ltree[re*2]=0;for(re=0;re<y;re++)k.dyn_dtree[re*2]=0;for(re=0;re<w;re++)k.bl_tree[re*2]=0;k.dyn_ltree[O*2]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function fe(k){k.bi_valid>8?_e(k,k.bi_buf):k.bi_valid>0&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function de(k,re,pe,De){fe(k),De&&(_e(k,pe),_e(k,~pe)),s.arraySet(k.pending_buf,k.window,re,pe,k.pending),k.pending+=pe}function ne(k,re,pe,De){var F=re*2,Z=pe*2;return k[F]<k[Z]||k[F]===k[Z]&&De[re]<=De[pe]}function be(k,re,pe){for(var De=k.heap[pe],F=pe<<1;F<=k.heap_len&&(F<k.heap_len&&ne(re,k.heap[F+1],k.heap[F],k.depth)&&F++,!ne(re,De,k.heap[F],k.depth));)k.heap[pe]=k.heap[F],pe=F,F<<=1;k.heap[pe]=De}function ue(k,re,pe){var De,F,Z=0,A,ae;if(k.last_lit!==0)do De=k.pending_buf[k.d_buf+Z*2]<<8|k.pending_buf[k.d_buf+Z*2+1],F=k.pending_buf[k.l_buf+Z],Z++,De===0?I(k,F,re):(A=He[F],I(k,A+d+1,re),ae=X[A],ae!==0&&(F-=Ce[A],ke(k,F,ae)),De--,A=ce(De),I(k,A,pe),ae=he[A],ae!==0&&(De-=Qe[A],ke(k,De,ae)));while(Z<k.last_lit);I(k,O,re)}function Ae(k,re){var pe=re.dyn_tree,De=re.stat_desc.static_tree,F=re.stat_desc.has_stree,Z=re.stat_desc.elems,A,ae,Fe=-1,b;for(k.heap_len=0,k.heap_max=g,A=0;A<Z;A++)pe[A*2]!==0?(k.heap[++k.heap_len]=Fe=A,k.depth[A]=0):pe[A*2+1]=0;for(;k.heap_len<2;)b=k.heap[++k.heap_len]=Fe<2?++Fe:0,pe[b*2]=1,k.depth[b]=0,k.opt_len--,F&&(k.static_len-=De[b*2+1]);for(re.max_code=Fe,A=k.heap_len>>1;A>=1;A--)be(k,pe,A);b=Z;do A=k.heap[1],k.heap[1]=k.heap[k.heap_len--],be(k,pe,1),ae=k.heap[1],k.heap[--k.heap_max]=A,k.heap[--k.heap_max]=ae,pe[b*2]=pe[A*2]+pe[ae*2],k.depth[b]=(k.depth[A]>=k.depth[ae]?k.depth[A]:k.depth[ae])+1,pe[A*2+1]=pe[ae*2+1]=b,k.heap[1]=b++,be(k,pe,1);while(k.heap_len>=2);k.heap[--k.heap_max]=k.heap[1],V(k,re),Q(pe,Fe,k.bl_count)}function Ne(k,re,pe){var De,F=-1,Z,A=re[0*2+1],ae=0,Fe=7,b=4;for(A===0&&(Fe=138,b=3),re[(pe+1)*2+1]=65535,De=0;De<=pe;De++)Z=A,A=re[(De+1)*2+1],!(++ae<Fe&&Z===A)&&(ae<b?k.bl_tree[Z*2]+=ae:Z!==0?(Z!==F&&k.bl_tree[Z*2]++,k.bl_tree[B*2]++):ae<=10?k.bl_tree[q*2]++:k.bl_tree[M*2]++,ae=0,F=Z,A===0?(Fe=138,b=3):Z===A?(Fe=6,b=3):(Fe=7,b=4))}function ze(k,re,pe){var De,F=-1,Z,A=re[0*2+1],ae=0,Fe=7,b=4;for(A===0&&(Fe=138,b=3),De=0;De<=pe;De++)if(Z=A,A=re[(De+1)*2+1],!(++ae<Fe&&Z===A)){if(ae<b)do I(k,Z,k.bl_tree);while(--ae!==0);else Z!==0?(Z!==F&&(I(k,Z,k.bl_tree),ae--),I(k,B,k.bl_tree),ke(k,ae-3,2)):ae<=10?(I(k,q,k.bl_tree),ke(k,ae-3,3)):(I(k,M,k.bl_tree),ke(k,ae-11,7));ae=0,F=Z,A===0?(Fe=138,b=3):Z===A?(Fe=6,b=3):(Fe=7,b=4)}}function qe(k){var re;for(Ne(k,k.dyn_ltree,k.l_desc.max_code),Ne(k,k.dyn_dtree,k.d_desc.max_code),Ae(k,k.bl_desc),re=w-1;re>=3&&k.bl_tree[ee[re]*2+1]===0;re--);return k.opt_len+=3*(re+1)+5+5+4,re}function Ye(k,re,pe,De){var F;for(ke(k,re-257,5),ke(k,pe-1,5),ke(k,De-4,4),F=0;F<De;F++)ke(k,k.bl_tree[ee[F]*2+1],3);ze(k,k.dyn_ltree,re-1),ze(k,k.dyn_dtree,pe-1)}function it(k){var re=4093624447,pe;for(pe=0;pe<=31;pe++,re>>>=1)if(re&1&&k.dyn_ltree[pe*2]!==0)return o;if(k.dyn_ltree[9*2]!==0||k.dyn_ltree[10*2]!==0||k.dyn_ltree[13*2]!==0)return u;for(pe=32;pe<d;pe++)if(k.dyn_ltree[pe*2]!==0)return u;return o}var dt=!1;function Kt(k){dt||(G(),dt=!0),k.l_desc=new se(k.dyn_ltree,Et),k.d_desc=new se(k.dyn_dtree,Ze),k.bl_desc=new se(k.bl_tree,Y),k.bi_buf=0,k.bi_valid=0,me(k)}function on(k,re,pe,De){ke(k,(f<<1)+(De?1:0),3),de(k,re,pe,!0)}function mt(k){ke(k,h<<1,3),I(k,O,ie),j(k)}function $t(k,re,pe,De){var F,Z,A=0;k.level>0?(k.strm.data_type===l&&(k.strm.data_type=it(k)),Ae(k,k.l_desc),Ae(k,k.d_desc),A=qe(k),F=k.opt_len+3+7>>>3,Z=k.static_len+3+7>>>3,Z<=F&&(F=Z)):F=Z=pe+5,pe+4<=F&&re!==-1?on(k,re,pe,De):k.strategy===a||Z===F?(ke(k,(h<<1)+(De?1:0),3),ue(k,ie,Pe)):(ke(k,(p<<1)+(De?1:0),3),Ye(k,k.l_desc.max_code+1,k.d_desc.max_code+1,A+1),ue(k,k.dyn_ltree,k.dyn_dtree)),me(k),De&&fe(k)}function Ct(k,re,pe){return k.pending_buf[k.d_buf+k.last_lit*2]=re>>>8&255,k.pending_buf[k.d_buf+k.last_lit*2+1]=re&255,k.pending_buf[k.l_buf+k.last_lit]=pe&255,k.last_lit++,re===0?k.dyn_ltree[pe*2]++:(k.matches++,re--,k.dyn_ltree[(He[pe]+d+1)*2]++,k.dyn_dtree[ce(re)*2]++),k.last_lit===k.lit_bufsize-1}i._tr_init=Kt,i._tr_stored_block=on,i._tr_flush_block=$t,i._tr_tally=Ct,i._tr_align=mt},{"../utils/common":41}],53:[function(n,r,i){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=s},{}],54:[function(n,r,i){(function(s){(function(a,o){if(a.setImmediate)return;var u=1,l={},c=!1,f=a.document,h;function p(S){typeof S!="function"&&(S=new Function(""+S));for(var O=new Array(arguments.length-1),B=0;B<O.length;B++)O[B]=arguments[B+1];var q={callback:S,args:O};return l[u]=q,h(u),u++}function E(S){delete l[S]}function x(S){var O=S.callback,B=S.args;switch(B.length){case 0:O();break;case 1:O(B[0]);break;case 2:O(B[0],B[1]);break;case 3:O(B[0],B[1],B[2]);break;default:O.apply(o,B);break}}function v(S){if(c)setTimeout(v,0,S);else{var O=l[S];if(O){c=!0;try{x(O)}finally{E(S),c=!1}}}}function d(){h=function(S){process.nextTick(function(){v(S)})}}function m(){if(a.postMessage&&!a.importScripts){var S=!0,O=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=O,S}}function y(){var S="setImmediate$"+Math.random()+"$",O=function(B){B.source===a&&typeof B.data=="string"&&B.data.indexOf(S)===0&&v(+B.data.slice(S.length))};a.addEventListener?a.addEventListener("message",O,!1):a.attachEvent("onmessage",O),h=function(B){a.postMessage(S+B,"*")}}function w(){var S=new MessageChannel;S.port1.onmessage=function(O){var B=O.data;v(B)},h=function(O){S.port2.postMessage(O)}}function g(){var S=f.documentElement;h=function(O){var B=f.createElement("script");B.onreadystatechange=function(){v(O),B.onreadystatechange=null,S.removeChild(B),B=null},S.appendChild(B)}}function _(){h=function(S){setTimeout(v,0,S)}}var C=Object.getPrototypeOf&&Object.getPrototypeOf(a);C=C&&C.setTimeout?C:a,{}.toString.call(a.process)==="[object process]"?d():m()?y():a.MessageChannel?w():f&&"onreadystatechange"in f.createElement("script")?g():_(),C.setImmediate=p,C.clearImmediate=E})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(gg);var WE=gg.exports;const qE=pi(WE);class $E{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new qE}catch{throw new Error("JSZip lib not loaded")}}open(e,n){return this.zip.loadAsync(e,{base64:n})}openUrl(e,n){return ea(e,"binary").then((function(r){return this.zip.loadAsync(r,{base64:n})}).bind(this))}request(e,n){var r=new et,i,s=new hr(e);return n||(n=s.extension),n=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then((function(a){let o=this.handleResponse(a,n);r.resolve(o)}).bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,n){var r;return n=="json"?r=JSON.parse(e):Js(n)?r=Hn(e,"text/xml"):n=="xhtml"?r=Hn(e,"application/xhtml+xml"):n=="html"||n=="htm"?r=Hn(e,"text/html"):r=e,r}getBlob(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return n=n||qi.lookup(i.name),i.async("uint8array").then(function(s){return new Blob([s],{type:n})})}getText(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return i.async("string").then(function(s){return s})}getBase64(e,n){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return n=n||qi.lookup(i.name),i.async("base64").then(function(s){return"data:"+n+";base64,"+s})}createUrl(e,n){var r=new et,i=window.URL||window.webkitURL||window.mozURL,s,a,o=n&&n.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then((function(u){this.urlCache[e]=u,r.resolve(u)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(u){s=i.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}).bind(this))),a||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var n=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&n.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let n in this.urlCache)e.revokeObjectURL(n);this.zip=void 0,this.urlCache={}}}var vg={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function a(l,c){if(!i[l]){if(!r[l]){var f=typeof Or=="function"&&Or;if(!c&&f)return f(l,!0);if(o)return o(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[l]={exports:{}};r[l][0].call(p.exports,function(E){var x=r[l][1][E];return a(x||E)},p,p.exports,n,r,i,s)}return i[l].exports}for(var o=typeof Or=="function"&&Or,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,r,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var u=0,l=new a(E),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=E,o=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var v=s.document.createElement("script");v.onreadystatechange=function(){E(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:o=function(){setTimeout(E,0)};var h,p=[];function E(){h=!0;for(var v,d,m=p.length;m;){for(d=p,p=[],v=-1;++v<m;)d[v]();m=p.length}h=!1}r.exports=x;function x(v){p.push(v)===1&&!h&&o()}}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function a(){}var o={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==a&&x(this,g)}f.prototype.catch=function(g){return this.then(null,g)},f.prototype.then=function(g,_){if(typeof g!="function"&&this.state===l||typeof _!="function"&&this.state===u)return this;var C=new this.constructor(a);if(this.state!==c){var S=this.state===l?g:_;p(C,S,this.outcome)}else this.queue.push(new h(C,g,_));return C};function h(g,_,C){this.promise=g,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){p(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){o.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){p(this.promise,this.onRejected,g)};function p(g,_,C){s(function(){var S;try{S=_(C)}catch(O){return o.reject(g,O)}S===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,S)})}o.resolve=function(g,_){var C=v(E,_);if(C.status==="error")return o.reject(g,C.value);var S=C.value;if(S)x(g,S);else{g.state=l,g.outcome=_;for(var O=-1,B=g.queue.length;++O<B;)g.queue[O].callFulfilled(_)}return g},o.reject=function(g,_){g.state=u,g.outcome=_;for(var C=-1,S=g.queue.length;++C<S;)g.queue[C].callRejected(_);return g};function E(g){var _=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof _=="function")return function(){_.apply(g,arguments)}}function x(g,_){var C=!1;function S(M){C||(C=!0,o.reject(g,M))}function O(M){C||(C=!0,o.resolve(g,M))}function B(){_(O,S)}var q=v(B);q.status==="error"&&S(q.value)}function v(g,_){var C={};try{C.value=g(_),C.status="success"}catch(S){C.status="error",C.value=S}return C}f.resolve=d;function d(g){return g instanceof this?g:o.resolve(new this(a),g)}f.reject=m;function m(g){var _=new this(a);return o.reject(_,g)}f.all=y;function y(g){var _=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=g.length,S=!1;if(!C)return this.resolve([]);for(var O=new Array(C),B=0,q=-1,M=new this(a);++q<C;)X(g[q],q);return M;function X(he,oe){_.resolve(he).then(ee,function(te){S||(S=!0,o.reject(M,te))});function ee(te){O[oe]=te,++B===C&&!S&&(S=!0,o.resolve(M,O))}}}f.race=w;function w(g){var _=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=g.length,S=!1;if(!C)return this.resolve([]);for(var O=-1,B=new this(a);++O<C;)q(g[O]);return B;function q(M){_.resolve(M).then(function(X){S||(S=!0,o.resolve(B,X))},function(X){S||(S=!0,o.reject(B,X))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};function a(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=o();function l(){try{if(!u||!u.open)return!1;var T=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!T||P)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(T,P){T=T||[],P=P||{};try{return new Blob(T,P)}catch(U){if(U.name!=="TypeError")throw U;for(var R=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,z=new R,W=0;W<T.length;W+=1)z.append(T[W]);return z.getBlob(P.type)}}typeof Promise>"u"&&n(3);var f=Promise;function h(T,P){P&&T.then(function(R){P(null,R)},function(R){P(R)})}function p(T,P,R){typeof P=="function"&&T.then(P),typeof R=="function"&&T.catch(R)}function E(T){return typeof T!="string"&&(console.warn(T+" used as a key, but it is not a string."),T=String(T)),T}function x(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",d=void 0,m={},y=Object.prototype.toString,w="readonly",g="readwrite";function _(T){for(var P=T.length,R=new ArrayBuffer(P),z=new Uint8Array(R),W=0;W<P;W++)z[W]=T.charCodeAt(W);return R}function C(T){return new f(function(P){var R=T.transaction(v,g),z=c([""]);R.objectStore(v).put(z,"key"),R.onabort=function(W){W.preventDefault(),W.stopPropagation(),P(!1)},R.oncomplete=function(){var W=navigator.userAgent.match(/Chrome\/(\d+)/),U=navigator.userAgent.match(/Edge\//);P(U||!W||parseInt(W[1],10)>=43)}}).catch(function(){return!1})}function S(T){return typeof d=="boolean"?f.resolve(d):C(T).then(function(P){return d=P,d})}function O(T){var P=m[T.name],R={};R.promise=new f(function(z,W){R.resolve=z,R.reject=W}),P.deferredOperations.push(R),P.dbReady?P.dbReady=P.dbReady.then(function(){return R.promise}):P.dbReady=R.promise}function B(T){var P=m[T.name],R=P.deferredOperations.pop();if(R)return R.resolve(),R.promise}function q(T,P){var R=m[T.name],z=R.deferredOperations.pop();if(z)return z.reject(P),z.promise}function M(T,P){return new f(function(R,z){if(m[T.name]=m[T.name]||Ce(),T.db)if(P)O(T),T.db.close();else return R(T.db);var W=[T.name];P&&W.push(T.version);var U=u.open.apply(u,W);P&&(U.onupgradeneeded=function(J){var le=U.result;try{le.createObjectStore(T.storeName),J.oldVersion<=1&&le.createObjectStore(v)}catch(ge){if(ge.name==="ConstraintError")console.warn('The database "'+T.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+T.storeName+'" already exists.');else throw ge}}),U.onerror=function(J){J.preventDefault(),z(U.error)},U.onsuccess=function(){var J=U.result;J.onversionchange=function(le){le.target.close()},R(J),B(T)}})}function X(T){return M(T,!1)}function he(T){return M(T,!0)}function oe(T,P){if(!T.db)return!0;var R=!T.db.objectStoreNames.contains(T.storeName),z=T.version<T.db.version,W=T.version>T.db.version;if(z&&(T.version!==P&&console.warn('The database "'+T.name+`" can't be downgraded from version `+T.db.version+" to version "+T.version+"."),T.version=T.db.version),W||R){if(R){var U=T.db.version+1;U>T.version&&(T.version=U)}return!0}return!1}function ee(T){return new f(function(P,R){var z=new FileReader;z.onerror=R,z.onloadend=function(W){var U=btoa(W.target.result||"");P({__local_forage_encoded_blob:!0,data:U,type:T.type})},z.readAsBinaryString(T)})}function te(T){var P=_(atob(T.data));return c([P],{type:T.type})}function ie(T){return T&&T.__local_forage_encoded_blob}function Pe(T){var P=this,R=P._initReady().then(function(){var z=m[P._dbInfo.name];if(z&&z.dbReady)return z.dbReady});return p(R,T,T),R}function Ke(T){O(T);for(var P=m[T.name],R=P.forages,z=0;z<R.length;z++){var W=R[z];W._dbInfo.db&&(W._dbInfo.db.close(),W._dbInfo.db=null)}return T.db=null,X(T).then(function(U){return T.db=U,oe(T)?he(T):U}).then(function(U){T.db=P.db=U;for(var J=0;J<R.length;J++)R[J]._dbInfo.db=U}).catch(function(U){throw q(T,U),U})}function He(T,P,R,z){z===void 0&&(z=1);try{var W=T.db.transaction(T.storeName,P);R(null,W)}catch(U){if(z>0&&(!T.db||U.name==="InvalidStateError"||U.name==="NotFoundError"))return f.resolve().then(function(){if(!T.db||U.name==="NotFoundError"&&!T.db.objectStoreNames.contains(T.storeName)&&T.version<=T.db.version)return T.db&&(T.version=T.db.version+1),he(T)}).then(function(){return Ke(T).then(function(){He(T,P,R,z-1)})}).catch(R);R(U)}}function Ce(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Qe(T){var P=this,R={db:null};if(T)for(var z in T)R[z]=T[z];var W=m[R.name];W||(W=Ce(),m[R.name]=W),W.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=Pe);var U=[];function J(){return f.resolve()}for(var le=0;le<W.forages.length;le++){var ge=W.forages[le];ge!==P&&U.push(ge._initReady().catch(J))}var ve=W.forages.slice(0);return f.all(U).then(function(){return R.db=W.db,X(R)}).then(function(ye){return R.db=ye,oe(R,P._defaultConfig.version)?he(R):ye}).then(function(ye){R.db=W.db=ye,P._dbInfo=R;for(var Re=0;Re<ve.length;Re++){var Ge=ve[Re];Ge!==P&&(Ge._dbInfo.db=R.db,Ge._dbInfo.version=R.version)}})}function Ve(T,P){var R=this;T=E(T);var z=new f(function(W,U){R.ready().then(function(){He(R._dbInfo,w,function(J,le){if(J)return U(J);try{var ge=le.objectStore(R._dbInfo.storeName),ve=ge.get(T);ve.onsuccess=function(){var ye=ve.result;ye===void 0&&(ye=null),ie(ye)&&(ye=te(ye)),W(ye)},ve.onerror=function(){U(ve.error)}}catch(ye){U(ye)}})}).catch(U)});return h(z,P),z}function Et(T,P){var R=this,z=new f(function(W,U){R.ready().then(function(){He(R._dbInfo,w,function(J,le){if(J)return U(J);try{var ge=le.objectStore(R._dbInfo.storeName),ve=ge.openCursor(),ye=1;ve.onsuccess=function(){var Re=ve.result;if(Re){var Ge=Re.value;ie(Ge)&&(Ge=te(Ge));var st=T(Ge,Re.key,ye++);st!==void 0?W(st):Re.continue()}else W()},ve.onerror=function(){U(ve.error)}}catch(Re){U(Re)}})}).catch(U)});return h(z,P),z}function Ze(T,P,R){var z=this;T=E(T);var W=new f(function(U,J){var le;z.ready().then(function(){return le=z._dbInfo,y.call(P)==="[object Blob]"?S(le.db).then(function(ge){return ge?P:ee(P)}):P}).then(function(ge){He(z._dbInfo,g,function(ve,ye){if(ve)return J(ve);try{var Re=ye.objectStore(z._dbInfo.storeName);ge===null&&(ge=void 0);var Ge=Re.put(ge,T);ye.oncomplete=function(){ge===void 0&&(ge=null),U(ge)},ye.onabort=ye.onerror=function(){var st=Ge.error?Ge.error:Ge.transaction.error;J(st)}}catch(st){J(st)}})}).catch(J)});return h(W,R),W}function Y(T,P){var R=this;T=E(T);var z=new f(function(W,U){R.ready().then(function(){He(R._dbInfo,g,function(J,le){if(J)return U(J);try{var ge=le.objectStore(R._dbInfo.storeName),ve=ge.delete(T);le.oncomplete=function(){W()},le.onerror=function(){U(ve.error)},le.onabort=function(){var ye=ve.error?ve.error:ve.transaction.error;U(ye)}}catch(ye){U(ye)}})}).catch(U)});return h(z,P),z}function se(T){var P=this,R=new f(function(z,W){P.ready().then(function(){He(P._dbInfo,g,function(U,J){if(U)return W(U);try{var le=J.objectStore(P._dbInfo.storeName),ge=le.clear();J.oncomplete=function(){z()},J.onabort=J.onerror=function(){var ve=ge.error?ge.error:ge.transaction.error;W(ve)}}catch(ve){W(ve)}})}).catch(W)});return h(R,T),R}function ce(T){var P=this,R=new f(function(z,W){P.ready().then(function(){He(P._dbInfo,w,function(U,J){if(U)return W(U);try{var le=J.objectStore(P._dbInfo.storeName),ge=le.count();ge.onsuccess=function(){z(ge.result)},ge.onerror=function(){W(ge.error)}}catch(ve){W(ve)}})}).catch(W)});return h(R,T),R}function _e(T,P){var R=this,z=new f(function(W,U){if(T<0){W(null);return}R.ready().then(function(){He(R._dbInfo,w,function(J,le){if(J)return U(J);try{var ge=le.objectStore(R._dbInfo.storeName),ve=!1,ye=ge.openKeyCursor();ye.onsuccess=function(){var Re=ye.result;if(!Re){W(null);return}T===0||ve?W(Re.key):(ve=!0,Re.advance(T))},ye.onerror=function(){U(ye.error)}}catch(Re){U(Re)}})}).catch(U)});return h(z,P),z}function ke(T){var P=this,R=new f(function(z,W){P.ready().then(function(){He(P._dbInfo,w,function(U,J){if(U)return W(U);try{var le=J.objectStore(P._dbInfo.storeName),ge=le.openKeyCursor(),ve=[];ge.onsuccess=function(){var ye=ge.result;if(!ye){z(ve);return}ve.push(ye.key),ye.continue()},ge.onerror=function(){W(ge.error)}}catch(ye){W(ye)}})}).catch(W)});return h(R,T),R}function I(T,P){P=x.apply(this,arguments);var R=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||R.name,T.storeName=T.storeName||R.storeName);var z=this,W;if(!T.name)W=f.reject("Invalid arguments");else{var U=T.name===R.name&&z._dbInfo.db,J=U?f.resolve(z._dbInfo.db):X(T).then(function(le){var ge=m[T.name],ve=ge.forages;ge.db=le;for(var ye=0;ye<ve.length;ye++)ve[ye]._dbInfo.db=le;return le});T.storeName?W=J.then(function(le){if(le.objectStoreNames.contains(T.storeName)){var ge=le.version+1;O(T);var ve=m[T.name],ye=ve.forages;le.close();for(var Re=0;Re<ye.length;Re++){var Ge=ye[Re];Ge._dbInfo.db=null,Ge._dbInfo.version=ge}var st=new f(function(at,Pt){var It=u.open(T.name,ge);It.onerror=function(bn){var os=It.result;os.close(),Pt(bn)},It.onupgradeneeded=function(){var bn=It.result;bn.deleteObjectStore(T.storeName)},It.onsuccess=function(){var bn=It.result;bn.close(),at(bn)}});return st.then(function(at){ve.db=at;for(var Pt=0;Pt<ye.length;Pt++){var It=ye[Pt];It._dbInfo.db=at,B(It._dbInfo)}}).catch(function(at){throw(q(T,at)||f.resolve()).catch(function(){}),at})}}):W=J.then(function(le){O(T);var ge=m[T.name],ve=ge.forages;le.close();for(var ye=0;ye<ve.length;ye++){var Re=ve[ye];Re._dbInfo.db=null}var Ge=new f(function(st,at){var Pt=u.deleteDatabase(T.name);Pt.onerror=function(){var It=Pt.result;It&&It.close(),at(Pt.error)},Pt.onblocked=function(){console.warn('dropInstance blocked for database "'+T.name+'" until all open connections are closed')},Pt.onsuccess=function(){var It=Pt.result;It&&It.close(),st(It)}});return Ge.then(function(st){ge.db=st;for(var at=0;at<ve.length;at++){var Pt=ve[at];B(Pt._dbInfo)}}).catch(function(st){throw(q(T,st)||f.resolve()).catch(function(){}),st})})}return h(W,P),W}var N={_driver:"asyncStorage",_initStorage:Qe,_support:l(),iterate:Et,getItem:Ve,setItem:Ze,removeItem:Y,clear:se,length:ce,key:_e,keys:ke,dropInstance:I};function j(){return typeof openDatabase=="function"}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="~~local_forage_type~",G=/^~~local_forage_type~([^~]+)~/,me="__lfsc__:",fe=me.length,de="arbf",ne="blob",be="si08",ue="ui08",Ae="uic8",Ne="si16",ze="si32",qe="ur16",Ye="ui32",it="fl32",dt="fl64",Kt=fe+de.length,on=Object.prototype.toString;function mt(T){var P=T.length*.75,R=T.length,z,W=0,U,J,le,ge;T[T.length-1]==="="&&(P--,T[T.length-2]==="="&&P--);var ve=new ArrayBuffer(P),ye=new Uint8Array(ve);for(z=0;z<R;z+=4)U=V.indexOf(T[z]),J=V.indexOf(T[z+1]),le=V.indexOf(T[z+2]),ge=V.indexOf(T[z+3]),ye[W++]=U<<2|J>>4,ye[W++]=(J&15)<<4|le>>2,ye[W++]=(le&3)<<6|ge&63;return ve}function $t(T){var P=new Uint8Array(T),R="",z;for(z=0;z<P.length;z+=3)R+=V[P[z]>>2],R+=V[(P[z]&3)<<4|P[z+1]>>4],R+=V[(P[z+1]&15)<<2|P[z+2]>>6],R+=V[P[z+2]&63];return P.length%3===2?R=R.substring(0,R.length-1)+"=":P.length%3===1&&(R=R.substring(0,R.length-2)+"=="),R}function Ct(T,P){var R="";if(T&&(R=on.call(T)),T&&(R==="[object ArrayBuffer]"||T.buffer&&on.call(T.buffer)==="[object ArrayBuffer]")){var z,W=me;T instanceof ArrayBuffer?(z=T,W+=de):(z=T.buffer,R==="[object Int8Array]"?W+=be:R==="[object Uint8Array]"?W+=ue:R==="[object Uint8ClampedArray]"?W+=Ae:R==="[object Int16Array]"?W+=Ne:R==="[object Uint16Array]"?W+=qe:R==="[object Int32Array]"?W+=ze:R==="[object Uint32Array]"?W+=Ye:R==="[object Float32Array]"?W+=it:R==="[object Float64Array]"?W+=dt:P(new Error("Failed to get type for BinaryArray"))),P(W+$t(z))}else if(R==="[object Blob]"){var U=new FileReader;U.onload=function(){var J=Q+T.type+"~"+$t(this.result);P(me+ne+J)},U.readAsArrayBuffer(T)}else try{P(JSON.stringify(T))}catch(J){console.error("Couldn't convert value into a JSON string: ",T),P(null,J)}}function k(T){if(T.substring(0,fe)!==me)return JSON.parse(T);var P=T.substring(Kt),R=T.substring(fe,Kt),z;if(R===ne&&G.test(P)){var W=P.match(G);z=W[1],P=P.substring(W[0].length)}var U=mt(P);switch(R){case de:return U;case ne:return c([U],{type:z});case be:return new Int8Array(U);case ue:return new Uint8Array(U);case Ae:return new Uint8ClampedArray(U);case Ne:return new Int16Array(U);case qe:return new Uint16Array(U);case ze:return new Int32Array(U);case Ye:return new Uint32Array(U);case it:return new Float32Array(U);case dt:return new Float64Array(U);default:throw new Error("Unkown type: "+R)}}var re={serialize:Ct,deserialize:k,stringToBuffer:mt,bufferToString:$t};function pe(T,P,R,z){T.executeSql("CREATE TABLE IF NOT EXISTS "+P.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],R,z)}function De(T){var P=this,R={db:null};if(T)for(var z in T)R[z]=typeof T[z]!="string"?T[z].toString():T[z];var W=new f(function(U,J){try{R.db=openDatabase(R.name,String(R.version),R.description,R.size)}catch(le){return J(le)}R.db.transaction(function(le){pe(le,R,function(){P._dbInfo=R,U()},function(ge,ve){J(ve)})},J)});return R.serializer=re,W}function F(T,P,R,z,W,U){T.executeSql(R,z,W,function(J,le){le.code===le.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[P.storeName],function(ge,ve){ve.rows.length?U(ge,le):pe(ge,P,function(){ge.executeSql(R,z,W,U)},U)},U):U(J,le)},U)}function Z(T,P){var R=this;T=E(T);var z=new f(function(W,U){R.ready().then(function(){var J=R._dbInfo;J.db.transaction(function(le){F(le,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[T],function(ge,ve){var ye=ve.rows.length?ve.rows.item(0).value:null;ye&&(ye=J.serializer.deserialize(ye)),W(ye)},function(ge,ve){U(ve)})})}).catch(U)});return h(z,P),z}function A(T,P){var R=this,z=new f(function(W,U){R.ready().then(function(){var J=R._dbInfo;J.db.transaction(function(le){F(le,J,"SELECT * FROM "+J.storeName,[],function(ge,ve){for(var ye=ve.rows,Re=ye.length,Ge=0;Ge<Re;Ge++){var st=ye.item(Ge),at=st.value;if(at&&(at=J.serializer.deserialize(at)),at=T(at,st.key,Ge+1),at!==void 0){W(at);return}}W()},function(ge,ve){U(ve)})})}).catch(U)});return h(z,P),z}function ae(T,P,R,z){var W=this;T=E(T);var U=new f(function(J,le){W.ready().then(function(){P===void 0&&(P=null);var ge=P,ve=W._dbInfo;ve.serializer.serialize(P,function(ye,Re){Re?le(Re):ve.db.transaction(function(Ge){F(Ge,ve,"INSERT OR REPLACE INTO "+ve.storeName+" (key, value) VALUES (?, ?)",[T,ye],function(){J(ge)},function(st,at){le(at)})},function(Ge){if(Ge.code===Ge.QUOTA_ERR){if(z>0){J(ae.apply(W,[T,ge,R,z-1]));return}le(Ge)}})})}).catch(le)});return h(U,R),U}function Fe(T,P,R){return ae.apply(this,[T,P,R,1])}function b(T,P){var R=this;T=E(T);var z=new f(function(W,U){R.ready().then(function(){var J=R._dbInfo;J.db.transaction(function(le){F(le,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[T],function(){W()},function(ge,ve){U(ve)})})}).catch(U)});return h(z,P),z}function H(T){var P=this,R=new f(function(z,W){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(J){F(J,U,"DELETE FROM "+U.storeName,[],function(){z()},function(le,ge){W(ge)})})}).catch(W)});return h(R,T),R}function K(T){var P=this,R=new f(function(z,W){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(J){F(J,U,"SELECT COUNT(key) as c FROM "+U.storeName,[],function(le,ge){var ve=ge.rows.item(0).c;z(ve)},function(le,ge){W(ge)})})}).catch(W)});return h(R,T),R}function D(T,P){var R=this,z=new f(function(W,U){R.ready().then(function(){var J=R._dbInfo;J.db.transaction(function(le){F(le,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[T+1],function(ge,ve){var ye=ve.rows.length?ve.rows.item(0).key:null;W(ye)},function(ge,ve){U(ve)})})}).catch(U)});return h(z,P),z}function L(T){var P=this,R=new f(function(z,W){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(J){F(J,U,"SELECT key FROM "+U.storeName,[],function(le,ge){for(var ve=[],ye=0;ye<ge.rows.length;ye++)ve.push(ge.rows.item(ye).key);z(ve)},function(le,ge){W(ge)})})}).catch(W)});return h(R,T),R}function $(T){return new f(function(P,R){T.transaction(function(z){z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(W,U){for(var J=[],le=0;le<U.rows.length;le++)J.push(U.rows.item(le).name);P({db:T,storeNames:J})},function(W,U){R(U)})},function(z){R(z)})})}function Oe(T,P){P=x.apply(this,arguments);var R=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||R.name,T.storeName=T.storeName||R.storeName);var z=this,W;return T.name?W=new f(function(U){var J;T.name===R.name?J=z._dbInfo.db:J=openDatabase(T.name,"","",0),T.storeName?U({db:J,storeNames:[T.storeName]}):U($(J))}).then(function(U){return new f(function(J,le){U.db.transaction(function(ge){function ve(st){return new f(function(at,Pt){ge.executeSql("DROP TABLE IF EXISTS "+st,[],function(){at()},function(It,bn){Pt(bn)})})}for(var ye=[],Re=0,Ge=U.storeNames.length;Re<Ge;Re++)ye.push(ve(U.storeNames[Re]));f.all(ye).then(function(){J()}).catch(function(st){le(st)})},function(ge){le(ge)})})}):W=f.reject("Invalid arguments"),h(W,P),W}var Ee={_driver:"webSQLStorage",_initStorage:De,_support:j(),iterate:A,getItem:Z,setItem:Fe,removeItem:b,clear:H,length:K,key:D,keys:L,dropInstance:Oe};function Se(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Xe(T,P){var R=T.name+"/";return T.storeName!==P.storeName&&(R+=T.storeName+"/"),R}function Sn(){var T="_localforage_support_test";try{return localStorage.setItem(T,!0),localStorage.removeItem(T),!1}catch{return!0}}function bt(){return!Sn()||localStorage.length>0}function Je(T){var P=this,R={};if(T)for(var z in T)R[z]=T[z];return R.keyPrefix=Xe(T,P._defaultConfig),bt()?(P._dbInfo=R,R.serializer=re,f.resolve()):f.reject()}function Rt(T){var P=this,R=P.ready().then(function(){for(var z=P._dbInfo.keyPrefix,W=localStorage.length-1;W>=0;W--){var U=localStorage.key(W);U.indexOf(z)===0&&localStorage.removeItem(U)}});return h(R,T),R}function jt(T,P){var R=this;T=E(T);var z=R.ready().then(function(){var W=R._dbInfo,U=localStorage.getItem(W.keyPrefix+T);return U&&(U=W.serializer.deserialize(U)),U});return h(z,P),z}function Yt(T,P){var R=this,z=R.ready().then(function(){for(var W=R._dbInfo,U=W.keyPrefix,J=U.length,le=localStorage.length,ge=1,ve=0;ve<le;ve++){var ye=localStorage.key(ve);if(ye.indexOf(U)===0){var Re=localStorage.getItem(ye);if(Re&&(Re=W.serializer.deserialize(Re)),Re=T(Re,ye.substring(J),ge++),Re!==void 0)return Re}}});return h(z,P),z}function gi(T,P){var R=this,z=R.ready().then(function(){var W=R._dbInfo,U;try{U=localStorage.key(T)}catch{U=null}return U&&(U=U.substring(W.keyPrefix.length)),U});return h(z,P),z}function vi(T){var P=this,R=P.ready().then(function(){for(var z=P._dbInfo,W=localStorage.length,U=[],J=0;J<W;J++){var le=localStorage.key(J);le.indexOf(z.keyPrefix)===0&&U.push(le.substring(z.keyPrefix.length))}return U});return h(R,T),R}function At(T){var P=this,R=P.keys().then(function(z){return z.length});return h(R,T),R}function un(T,P){var R=this;T=E(T);var z=R.ready().then(function(){var W=R._dbInfo;localStorage.removeItem(W.keyPrefix+T)});return h(z,P),z}function Mt(T,P,R){var z=this;T=E(T);var W=z.ready().then(function(){P===void 0&&(P=null);var U=P;return new f(function(J,le){var ge=z._dbInfo;ge.serializer.serialize(P,function(ve,ye){if(ye)le(ye);else try{localStorage.setItem(ge.keyPrefix+T,ve),J(U)}catch(Re){(Re.name==="QuotaExceededError"||Re.name==="NS_ERROR_DOM_QUOTA_REACHED")&&le(Re),le(Re)}})})});return h(W,R),W}function Tn(T,P){if(P=x.apply(this,arguments),T=typeof T!="function"&&T||{},!T.name){var R=this.config();T.name=T.name||R.name,T.storeName=T.storeName||R.storeName}var z=this,W;return T.name?W=new f(function(U){T.storeName?U(Xe(T,z._defaultConfig)):U(T.name+"/")}).then(function(U){for(var J=localStorage.length-1;J>=0;J--){var le=localStorage.key(J);le.indexOf(U)===0&&localStorage.removeItem(le)}}):W=f.reject("Invalid arguments"),h(W,P),W}var yn={_driver:"localStorageWrapper",_initStorage:Je,_support:Se(),iterate:Yt,getItem:jt,setItem:Mt,removeItem:un,clear:Rt,length:At,key:gi,keys:vi,dropInstance:Tn},da=function(P,R){return P===R||typeof P=="number"&&typeof R=="number"&&isNaN(P)&&isNaN(R)},Dg=function(P,R){for(var z=P.length,W=0;W<z;){if(da(P[W],R))return!0;W++}return!1},ef=Array.isArray||function(T){return Object.prototype.toString.call(T)==="[object Array]"},as={},tf={},yi={INDEXEDDB:N,WEBSQL:Ee,LOCALSTORAGE:yn},Sg=[yi.INDEXEDDB._driver,yi.WEBSQL._driver,yi.LOCALSTORAGE._driver],pa=["dropInstance"],tu=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(pa),Tg={description:"",driver:Sg.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function kg(T,P){T[P]=function(){var R=arguments;return T.ready().then(function(){return T[P].apply(T,R)})}}function nu(){for(var T=1;T<arguments.length;T++){var P=arguments[T];if(P)for(var R in P)P.hasOwnProperty(R)&&(ef(P[R])?arguments[0][R]=P[R].slice():arguments[0][R]=P[R])}return arguments[0]}var Og=function(){function T(P){a(this,T);for(var R in yi)if(yi.hasOwnProperty(R)){var z=yi[R],W=z._driver;this[R]=W,as[W]||this.defineDriver(z)}this._defaultConfig=nu({},Tg),this._config=nu({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return T.prototype.config=function(R){if((typeof R>"u"?"undefined":s(R))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var z in R){if(z==="storeName"&&(R[z]=R[z].replace(/\W/g,"_")),z==="version"&&typeof R[z]!="number")return new Error("Database version must be a number.");this._config[z]=R[z]}return"driver"in R&&R.driver?this.setDriver(this._config.driver):!0}else return typeof R=="string"?this._config[R]:this._config},T.prototype.defineDriver=function(R,z,W){var U=new f(function(J,le){try{var ge=R._driver,ve=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!R._driver){le(ve);return}for(var ye=tu.concat("_initStorage"),Re=0,Ge=ye.length;Re<Ge;Re++){var st=ye[Re],at=!Dg(pa,st);if((at||R[st])&&typeof R[st]!="function"){le(ve);return}}var Pt=function(){for(var os=function(Ng){return function(){var Bg=new Error("Method "+Ng+" is not implemented by the current driver"),nf=f.reject(Bg);return h(nf,arguments[arguments.length-1]),nf}},ru=0,Ig=pa.length;ru<Ig;ru++){var iu=pa[ru];R[iu]||(R[iu]=os(iu))}};Pt();var It=function(os){as[ge]&&console.info("Redefining LocalForage driver: "+ge),as[ge]=R,tf[ge]=os,J()};"_support"in R?R._support&&typeof R._support=="function"?R._support().then(It,le):It(!!R._support):It(!0)}catch(bn){le(bn)}});return p(U,z,W),U},T.prototype.driver=function(){return this._driver||null},T.prototype.getDriver=function(R,z,W){var U=as[R]?f.resolve(as[R]):f.reject(new Error("Driver not found."));return p(U,z,W),U},T.prototype.getSerializer=function(R){var z=f.resolve(re);return p(z,R),z},T.prototype.ready=function(R){var z=this,W=z._driverSet.then(function(){return z._ready===null&&(z._ready=z._initDriver()),z._ready});return p(W,R,R),W},T.prototype.setDriver=function(R,z,W){var U=this;ef(R)||(R=[R]);var J=this._getSupportedDrivers(R);function le(){U._config.driver=U.driver()}function ge(Re){return U._extend(Re),le(),U._ready=U._initStorage(U._config),U._ready}function ve(Re){return function(){var Ge=0;function st(){for(;Ge<Re.length;){var at=Re[Ge];return Ge++,U._dbInfo=null,U._ready=null,U.getDriver(at).then(ge).catch(st)}le();var Pt=new Error("No available storage method found.");return U._driverSet=f.reject(Pt),U._driverSet}return st()}}var ye=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ye.then(function(){var Re=J[0];return U._dbInfo=null,U._ready=null,U.getDriver(Re).then(function(Ge){U._driver=Ge._driver,le(),U._wrapLibraryMethodsWithReady(),U._initDriver=ve(J)})}).catch(function(){le();var Re=new Error("No available storage method found.");return U._driverSet=f.reject(Re),U._driverSet}),p(this._driverSet,z,W),this._driverSet},T.prototype.supports=function(R){return!!tf[R]},T.prototype._extend=function(R){nu(this,R)},T.prototype._getSupportedDrivers=function(R){for(var z=[],W=0,U=R.length;W<U;W++){var J=R[W];this.supports(J)&&z.push(J)}return z},T.prototype._wrapLibraryMethodsWithReady=function(){for(var R=0,z=tu.length;R<z;R++)kg(this,tu[R])},T.prototype.createInstance=function(R){return new T(R)},T}(),Rg=new Og;r.exports=Rg},{3:3}]},{},[4])(4)})})(vg);var HE=vg.exports;const Jh=pi(HE);class yg{constructor(e,n,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=n||ea,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Jh>"u"&&(e=Jh),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let n=navigator.onLine;this.online=n,n?this.emit("online",this):this.emit("offline",this)}add(e,n){let r=e.resources.map(i=>{let{href:s}=i,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(u=>!u||n?this.requester(a,"binary").then(l=>this.storage.setItem(o,l)):u)});return Promise.all(r)}put(e,n,r){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(s=>s||this.requester(e,"binary",n,r).then(a=>this.storage.setItem(i,a)))}request(e,n,r,i){return this.online?this.requester(e,n,r,i).then(s=>(this.put(e),s)):this.retrieve(e,n)}retrieve(e,n){new et;var r,i=new hr(e);return n||(n=i.extension),n=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(s=>{var a=new et,o;return s?(o=this.handleResponse(s,n),a.resolve(o)):a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise})}handleResponse(e,n){var r;return n=="json"?r=JSON.parse(e):Js(n)?r=Hn(e,"text/xml"):n=="xhtml"?r=Hn(e,"application/xhtml+xml"):n=="html"||n=="htm"?r=Hn(e,"text/html"):r=e,r}getBlob(e,n){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){if(i)return n=n||qi.lookup(e),new Blob([i],{type:n})})}getText(e,n){let r=window.encodeURIComponent(e);return n=n||qi.lookup(e),this.storage.getItem(r).then(function(i){var s=new et,a=new FileReader,o;if(i)return o=new Blob([i],{type:n}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,n),s.promise})}getBase64(e,n){let r=window.encodeURIComponent(e);return n=n||qi.lookup(e),this.storage.getItem(r).then(i=>{var s=new et,a=new FileReader,o;if(i)return o=new Blob([i],{type:n}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,n),s.promise})}createUrl(e,n){var r=new et,i=window.URL||window.webkitURL||window.mozURL,s,a,o=n&&n.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then((function(u){this.urlCache[e]=u,r.resolve(u)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(u){s=i.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}).bind(this))),a||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var n=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&n.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let n in this.urlCache)e.revokeObjectURL(n);this.urlCache={},this.removeListeners()}}Yn(yg.prototype);class Lu{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const n=ht(e,"display_options");return n?(fr(n,"option").forEach(i=>{let s="";switch(i.childNodes.length&&(s=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const ed="META-INF/container.xml",VE="META-INF/com.apple.ibooks.display-options.xml",kn={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Zc{constructor(e,n){typeof n>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(n=e,e=void 0),this.settings=Vt(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Vt(this.settings,n),this.opening=new et,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new et,spine:new et,metadata:new et,cover:new et,navigation:new et,pageList:new et,resources:new et,displayOptions:new et},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||ea,this.spine=new c1,this.locations=new eg(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var i=new Error("Cannot load book at "+e);this.emit(we.BOOK.OPEN_FAILED,i)})}open(e,n){var r,i=n||this.determineType(e);return i===kn.BINARY?(this.archived=!0,this.url=new On("/",""),r=this.openEpub(e)):i===kn.BASE64?(this.archived=!0,this.url=new On("/",""),r=this.openEpub(e,i)):i===kn.EPUB?(this.archived=!0,this.url=new On("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==kn.OPF?(this.url=new On(e),r=this.openPackaging(this.url.Path.toString())):i==kn.MANIFEST?(this.url=new On(e),r=this.openManifest(this.url.Path.toString())):(this.url=new On(e),r=this.openContainer(ed).then(this.openPackaging.bind(this))),r}openEpub(e,n){return this.unarchive(e,n||this.settings.encoding).then(()=>this.openContainer(ed)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(n=>(this.container=new f1(n),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new hr(e),this.load(e).then(n=>(this.packaging=new Hh(n),this.unpack(this.packaging)))}openManifest(e){return this.path=new hr(e),this.load(e).then(n=>(this.packaging=new Hh,this.packaging.load(n),this.unpack(this.packaging)))}load(e){var n=this.resolve(e);return this.archived?this.archive.request(n):this.request(n,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,n){if(e){var r=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(r=this.path.resolve(e)),n!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var n=e;return e?(this.settings.canonical?n=this.settings.canonical(e):n=this.resolve(e,!0),n):""}determineType(e){var n,r,i;if(this.settings.encoding==="base64")return kn.BASE64;if(typeof e!="string")return kn.BINARY;if(n=new On(e),r=n.path(),i=r.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return kn.DIRECTORY;if(i==="epub")return kn.EPUB;if(i==="opf")return kn.OPF;if(i==="json")return kn.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(VE)).then(n=>{this.displayOptions=new Lu(n),this.loading.displayOptions.resolve(this.displayOptions)}).catch(n=>{this.displayOptions=new Lu,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Lu,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new m1(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(n=>{console.error(n)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let n=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((i,s)=>{this.navigation=new Nu(r),e.pageList&&(this.pageList=new Bu(e.pageList)),i(this.navigation)}):n?this.load(n,"xml").then(i=>(this.navigation=new Nu(i),this.pageList=new Bu(i),this.navigation)):new Promise((i,s)=>{this.navigation=new Nu,this.pageList=new Bu,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,n){return this.rendition=new Gc(this,n),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,n){return this.archive=new $E,this.archive.open(e,n)}store(e){let n=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,i=this.settings.requestMethod||ea.bind(this);return this.storage=new yg(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=n||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new On("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,n)=>{n.output=this.resources.substitute(e,n.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var n=new tt(e),r=this.spine.get(n.spinePos),i=this.load.bind(this);return r?r.load(i).then(function(s){var a=n.toRange(r.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var n=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Zo}:${n}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Yn(Zc.prototype);function mi(t,e){return new Zc(t,e)}mi.VERSION=Zo;typeof global<"u"&&(global.EPUBJS_VERSION=Zo);mi.Book=Zc;mi.Rendition=Gc;mi.Contents=Vc;mi.CFI=tt;mi.utils=n1;const bg=t=>{if(!t.subitems||!t.subitems.length)return[t];let e=[t];return t.subitems.map(n=>{e=e.concat(bg(n))}),e},Xc=async t=>{const e=await t.arrayBuffer(),n=mi(e);return{arrayBuffer:e,epub:n}},_g=async t=>{const e=await t.loaded.navigation;let n=[];return e.forEach(r=>(n=n.concat(bg(r)),{})),n},KE=async t=>{const e=await kc.get(t);if(!e)throw new Error;const{epub:n}=await Xc(e.epub),r=await _g(n);return{epub:n,chapters:r}},YE={class:"cover-container"},GE={key:1,class:"mdi mdi-loading mdi-spin"},ZE={class:"title ellipsis"},XE=ct({__name:"BookCard",props:{book:{},loading:{type:Boolean},disabled:{type:Boolean}},emits:["select","dbclick","actionClick"],setup(t,{emit:e}){const n=t,{book:r,loading:i,disabled:s}=rn(n),{uid:a,title:o,cover:u,type:l}=rn(r.value),c={remote:"download",local:"upload"},f=E=>e("select",E),h=E=>e("dbclick",E),p=E=>e("actionClick",E);return(E,x)=>(xe(),Me("button",{class:Jt(["book-container",{disabled:Ie(s)}]),onClick:x[1]||(x[1]=v=>f(Ie(a))),onDblclick:x[2]||(x[2]=v=>h(Ie(a)))},[Le("div",YE,[We(no,{src:Ie(u),width:"100%",height:"196px",style:ci({opacity:Ie(s)?.7:1})},null,8,["src","style"]),Ie(l)!=="both"?(xe(),St(gn,{key:0,class:"btn-float",type:"icon",onClick:x[0]||(x[0]=fy(v=>p(Ie(a)),["stop"]))},{icon:yt(()=>[Ie(i)?(xe(),Me("span",GE)):(xe(),Me("span",{key:0,class:Jt(["mdi",[`mdi-cloud-${c[Ie(l)]}`]])},null,2))]),_:1})):Xt("",!0)]),Le("span",ZE,En(Ie(o)),1)],34))}});const QE=xt(XE,[["__scopeId","data-v-a2e80edb"]]),JE=t=>(dr("data-v-40f3550c"),t=t(),pr(),t),ex=JE(()=>Le("span",{class:"mdi mdi-plus-circle-outline"},null,-1)),tx=["accept"],nx=ct({__name:"UploadButton",props:{accept:{}},emits:["upload"],setup(t,{emit:e}){const n=t,{accept:r}=rn(n),i=Ot(null),s=()=>{i.value&&i.value.click()},a=o=>{const u=o.target;u.files&&e("upload",u.files)};return(o,u)=>(xe(),Me(Tt,null,[We(gn,{type:"primary",onClick:s},{icon:yt(()=>[ex]),default:yt(()=>[fi("  ")]),_:1}),Le("input",{type:"file",class:"input",ref_key:"inputRef",ref:i,onChange:a,accept:Ie(r)},null,40,tx)],64))}});const rx=xt(nx,[["__scopeId","data-v-40f3550c"]]),ix=t=>(dr("data-v-378ec977"),t=t(),pr(),t),sx={class:"tools"},ax={class:"input"},ox=ix(()=>Le("span",{class:"mdi mdi-close-circle-outline"},null,-1)),ux={class:"book-list"},lx=ct({__name:"HomeView",setup(t){const e=Ot(""),n=hc(),r=hi(),{books:i}=gr(r),s=async()=>{const h=await $a.get();i.value=h.map(p=>({...p,type:"local",cover:p.cover?URL.createObjectURL(p.cover):void 0}))},a=()=>e.value="",o=async(h,p)=>{const E=H_(h),{title:x,description:v,creator:d,publisher:m,pubdate:y,language:w}=await p.loaded.metadata,g={title:x,description:v,creator:d,publisher:m,pubdate:y?new Date(y):void 0,language:w},_=await p.coverUrl()??void 0;let C;return _&&(C=await(await fetch(_)).blob()),{md5:E,book:p,metadata:g,cover:C}},u=async(h,p,E,x)=>{const{title:v}=h,d={title:v,cover:p,md5:E},m=await $a.add(d);kc.add({uid:m,epub:x}),am.add({uid:m,data:h})},l=async h=>{const p=h[0];if(p.type!==wh)return;const{arrayBuffer:E,epub:x}=await Xc(p),{md5:v,metadata:d,cover:m}=await o(E,x);(await $a.get()).find(g=>g.md5===v)||(await u(d,m,v,p),s())},c=h=>n.push(`/book/detail/${h}`),f=kt(()=>i.value?e.value?i.value.filter(h=>h.title.includes(e.value)):i.value:[]);return ns(s),(h,p)=>(xe(),Me("div",null,[Le("div",sx,[Le("div",ax,[We(Sp,{modelValue:e.value,"onUpdate:modelValue":p[0]||(p[0]=E=>e.value=E),onActionClick:a},{default:yt(()=>[ox]),_:1},8,["modelValue"])]),We(rx,{onUpload:l,accept:Ie(wh)},null,8,["accept"])]),Le("div",ux,[(xe(!0),Me(Tt,null,Mr(f.value,E=>(xe(),St(QE,{key:E.uid,book:E,onSelect:x=>c(E.uid)},null,8,["book","onSelect"]))),128))])]))}});const cx=xt(lx,[["__scopeId","data-v-378ec977"]]);function Ao(t){"@babel/helpers - typeof";return Ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(t)}function li(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function an(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Gn(t){an(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Ao(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function fx(t,e){an(2,arguments);var n=Gn(t).getTime(),r=li(e);return new Date(n+r)}var hx={};function eu(){return hx}function dx(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function px(t){return an(1,arguments),t instanceof Date||Ao(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mx(t){if(an(1,arguments),!px(t)&&typeof t!="number")return!1;var e=Gn(t);return!isNaN(Number(e))}function gx(t,e){an(2,arguments);var n=li(e);return fx(t,-n)}var vx=864e5;function yx(t){an(1,arguments);var e=Gn(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/vx)+1}function Do(t){an(1,arguments);var e=1,n=Gn(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function wg(t){an(1,arguments);var e=Gn(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Do(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var a=Do(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function bx(t){an(1,arguments);var e=wg(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Do(n);return r}var _x=6048e5;function wx(t){an(1,arguments);var e=Gn(t),n=Do(e).getTime()-bx(e).getTime();return Math.round(n/_x)+1}function So(t,e){var n,r,i,s,a,o,u,l;an(1,arguments);var c=eu(),f=li((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Gn(t),p=h.getUTCDay(),E=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-E),h.setUTCHours(0,0,0,0),h}function Eg(t,e){var n,r,i,s,a,o,u,l;an(1,arguments);var c=Gn(t),f=c.getUTCFullYear(),h=eu(),p=li((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(u=h.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=new Date(0);E.setUTCFullYear(f+1,0,p),E.setUTCHours(0,0,0,0);var x=So(E,e),v=new Date(0);v.setUTCFullYear(f,0,p),v.setUTCHours(0,0,0,0);var d=So(v,e);return c.getTime()>=x.getTime()?f+1:c.getTime()>=d.getTime()?f:f-1}function Ex(t,e){var n,r,i,s,a,o,u,l;an(1,arguments);var c=eu(),f=li((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=Eg(t,e),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var E=So(p,e);return E}var xx=6048e5;function Cx(t,e){an(1,arguments);var n=Gn(t),r=So(n,e).getTime()-Ex(n,e).getTime();return Math.round(r/xx)+1}function ot(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Ax={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return ot(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):ot(r+1,2)},d:function(e,n){return ot(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return ot(e.getUTCHours()%12||12,n.length)},H:function(e,n){return ot(e.getUTCHours(),n.length)},m:function(e,n){return ot(e.getUTCMinutes(),n.length)},s:function(e,n){return ot(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return ot(s,n.length)}};const Er=Ax;var Ti={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Dx={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Er.y(e,n)},Y:function(e,n,r,i){var s=Eg(e,i),a=s>0?s:1-s;if(n==="YY"){var o=a%100;return ot(o,2)}return n==="Yo"?r.ordinalNumber(a,{unit:"year"}):ot(a,n.length)},R:function(e,n){var r=wg(e);return ot(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return ot(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return ot(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return ot(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return Er.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return ot(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=Cx(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):ot(s,n.length)},I:function(e,n,r){var i=wx(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):ot(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Er.d(e,n)},D:function(e,n,r){var i=yx(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):ot(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return ot(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return ot(a,n.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return ot(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=Ti.noon:i===0?s=Ti.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=Ti.evening:i>=12?s=Ti.afternoon:i>=4?s=Ti.morning:s=Ti.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Er.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Er.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):ot(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):ot(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Er.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Er.s(e,n)},S:function(e,n){return Er.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return nd(a);case"XXXX":case"XX":return Vr(a);case"XXXXX":case"XXX":default:return Vr(a,":")}},x:function(e,n,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(n){case"x":return nd(a);case"xxxx":case"xx":return Vr(a);case"xxxxx":case"xxx":default:return Vr(a,":")}},O:function(e,n,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+td(a,":");case"OOOO":default:return"GMT"+Vr(a,":")}},z:function(e,n,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+td(a,":");case"zzzz":default:return"GMT"+Vr(a,":")}},t:function(e,n,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return ot(a,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,a=s.getTime();return ot(a,n.length)}};function td(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var a=e||"";return n+String(i)+a+ot(s,2)}function nd(t,e){if(t%60===0){var n=t>0?"-":"+";return n+ot(Math.abs(t)/60,2)}return Vr(t,e)}function Vr(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=ot(Math.floor(i/60),2),a=ot(i%60,2);return r+s+n+a}const Sx=Dx;var rd=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},xg=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Tx=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return rd(e,n);var a;switch(i){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",rd(i,n)).replace("{{time}}",xg(s,n))},kx={p:xg,P:Tx};const Ox=kx;var Rx=["D","DD"],Ix=["YY","YYYY"];function Nx(t){return Rx.indexOf(t)!==-1}function Bx(t){return Ix.indexOf(t)!==-1}function id(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Px={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lx=function(e,n,r){var i,s=Px[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const Fx=Lx;function Fu(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Mx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ux={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jx={date:Fu({formats:Mx,defaultWidth:"full"}),time:Fu({formats:Ux,defaultWidth:"full"}),dateTime:Fu({formats:zx,defaultWidth:"full"})};const Wx=jx;var qx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$x=function(e,n,r,i){return qx[e]};const Hx=$x;function gs(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{var o=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[o]}var l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}var Vx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Yx={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qx=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Jx={ordinalNumber:Qx,era:gs({values:Vx,defaultWidth:"wide"}),quarter:gs({values:Kx,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:gs({values:Yx,defaultWidth:"wide"}),day:gs({values:Gx,defaultWidth:"wide"}),dayPeriod:gs({values:Zx,defaultWidth:"wide",formattingValues:Xx,defaultFormattingWidth:"wide"})};const eC=Jx;function vs(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(o)?nC(o,function(f){return f.test(a)}):tC(o,function(f){return f.test(a)}),l;l=t.valueCallback?t.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;var c=e.slice(a.length);return{value:l,rest:c}}}function tC(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function nC(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function rC(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;var o=e.slice(i.length);return{value:a,rest:o}}}var iC=/^(\d+)(th|st|nd|rd)?/i,sC=/\d+/i,aC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oC={any:[/^b/i,/^(a|c)/i]},uC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lC={any:[/1/i,/2/i,/3/i,/4/i]},cC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gC={ordinalNumber:rC({matchPattern:iC,parsePattern:sC,valueCallback:function(e){return parseInt(e,10)}}),era:vs({matchPatterns:aC,defaultMatchWidth:"wide",parsePatterns:oC,defaultParseWidth:"any"}),quarter:vs({matchPatterns:uC,defaultMatchWidth:"wide",parsePatterns:lC,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:vs({matchPatterns:cC,defaultMatchWidth:"wide",parsePatterns:fC,defaultParseWidth:"any"}),day:vs({matchPatterns:hC,defaultMatchWidth:"wide",parsePatterns:dC,defaultParseWidth:"any"}),dayPeriod:vs({matchPatterns:pC,defaultMatchWidth:"any",parsePatterns:mC,defaultParseWidth:"any"})};const vC=gC;var yC={code:"en-US",formatDistance:Fx,formatLong:Wx,formatRelative:Hx,localize:eC,match:vC,options:{weekStartsOn:0,firstWeekContainsDate:1}};const bC=yC;var _C=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EC=/^'([^]*?)'?$/,xC=/''/g,CC=/[a-zA-Z]/;function AC(t,e,n){var r,i,s,a,o,u,l,c,f,h,p,E,x,v,d,m,y,w;an(2,arguments);var g=String(e),_=eu(),C=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:_.locale)!==null&&r!==void 0?r:bC,S=li((s=(a=(o=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&o!==void 0?o:_.firstWeekContainsDate)!==null&&a!==void 0?a:(f=_.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=li((p=(E=(x=(v=n==null?void 0:n.weekStartsOn)!==null&&v!==void 0?v:n==null||(d=n.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&x!==void 0?x:_.weekStartsOn)!==null&&E!==void 0?E:(y=_.locale)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&p!==void 0?p:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var B=Gn(t);if(!mx(B))throw new RangeError("Invalid time value");var q=dx(B),M=gx(B,q),X={firstWeekContainsDate:S,weekStartsOn:O,locale:C,_originalDate:B},he=g.match(wC).map(function(oe){var ee=oe[0];if(ee==="p"||ee==="P"){var te=Ox[ee];return te(oe,C.formatLong)}return oe}).join("").match(_C).map(function(oe){if(oe==="''")return"'";var ee=oe[0];if(ee==="'")return DC(oe);var te=Sx[ee];if(te)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Bx(oe)&&id(oe,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Nx(oe)&&id(oe,e,String(t)),te(M,oe,C.localize,X);if(ee.match(CC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ee+"`");return oe}).join("");return he}function DC(t){var e=t.match(EC);return e?e[1].replace(xC,"'"):t}const sd=(t,e="yyyy/MM/dd")=>t?AC(t,e):"-",SC=ct({__name:"BaseSkeleton",props:{width:{default:"100%"},height:{default:"1rem"}},setup(t){const e=t,{width:n,height:r}=rn(e);return(i,s)=>(xe(),Me("div",{class:"skeleton",style:ci({width:Ie(n),height:Ie(r)})},null,4))}});const ki=xt(SC,[["__scopeId","data-v-933cbe7f"]]),Ul="readHistory",TC=()=>{const t=localStorage.getItem(Ul);return t?JSON.parse(t):null},ad=t=>{const e=TC();return e&&e.find(n=>n.uid===t)||null},Cg=t=>{const{uid:e,href:n,idref:r}=t,i=localStorage.getItem(Ul);let s=[],a="";if(i){const o=JSON.parse(i),u=o.find(l=>l.uid===e);u?s=o.map(l=>l.uid===u.uid?{...l,href:n,idref:r}:l):s=o.concat({uid:e,href:n,idref:r})}else s=[{uid:e,href:n,idref:r}];return a=JSON.stringify(s),localStorage.setItem(Ul,a),s},kC=t=>(dr("data-v-e4611e65"),t=t(),pr(),t),OC=kC(()=>Le("div",{class:"chapter-list"},"",-1)),RC={class:"chapter-item"},IC=ct({__name:"ChapterItem",setup(t){const e=hi(),{epubInfo:n}=gr(e),i=$o().params.uid,s=a=>{var l;const u=((l=n.value.epub)==null?void 0:l.spine).items.find(c=>c.href===a||c.idref===a);u&&Cg({uid:i,href:u.href,idref:u.idref})};return(a,o)=>{const u=rs("RouterLink");return xe(),Me("div",null,[OC,Le("div",RC,[(xe(!0),Me(Tt,null,Mr(Ie(n).chapters,l=>(xe(),St(u,{to:`/book/${Ie(i)}`,onClick:c=>s(l.href),key:l.id,title:l.label},{default:yt(()=>[We(gn,null,{default:yt(()=>[fi(En(l.label),1)]),_:2},1024)]),_:2},1032,["to","onClick","title"]))),128))])])}}});const NC=xt(IC,[["__scopeId","data-v-e4611e65"]]),BC=Le("span",{class:"mdi mdi-file"},null,-1),PC=ct({__name:"DownloadButton",setup(t){return(e,n)=>(xe(),Me("a",null,[We(gn,{type:"primary"},{icon:yt(()=>[BC]),default:yt(()=>[fi("  ")]),_:1})]))}}),LC="/ofa-reader/assets/book_completed-98542541.png",FC={class:"book-info"},MC={class:"book-metadata"},UC={class:"book-pubdata"},zC={key:0},jC={class:"title"},WC={key:1,class:"book-pubdata__loading"},qC={class:"title"},$C=["innerHTML"],HC={key:2,class:"last-time"},VC={class:"actions"},KC={key:0,class:"chapter-container"},YC=ct({__name:"BookDetailView",setup(t){const n=$o().params.uid,r=hc(),i=Ot(null),s=Ot(!1),a=Ot(!0),o=Ot(null),u=hi(),{epubInfo:l}=gr(u),c=async()=>{const f=await $a.getByUid(n),h=await am.get(n),p=await kc.get(n);if(f){const{title:E,cover:x}=f;i.value={uid:n,title:E,cover:x?URL.createObjectURL(x):void 0,...h==null?void 0:h.data}}if(p){o.value={href:URL.createObjectURL(p.epub),download:p.epub.name};const{epub:E}=await Xc(p.epub),x=await _g(E);l.value={epub:si(E),chapters:x}}};return ns(async()=>{await c(),a.value=!1,i.value||r.push("/404")}),(f,h)=>{var E,x,v,d,m,y,w,g,_;const p=rs("RouterLink");return xe(),Me("div",null,[Le("div",FC,[a.value?(xe(),St(ki,{key:1,height:"100%"})):(xe(),St(no,{key:0,src:(E=i.value)==null?void 0:E.cover},null,8,["src"])),Le("div",MC,[Le("div",UC,[a.value?(xe(),Me("div",WC,[Le("h1",qC,[We(ki,{height:"2.125rem"})]),(xe(),Me(Tt,null,Mr(4,C=>Le("p",{key:C},[We(ki)])),64))])):(xe(),Me("div",zC,[Le("h1",jC,En((x=i.value)==null?void 0:x.title),1),Le("p",null,""+En(Ie(xu)((v=i.value)==null?void 0:v.creator)),1),Le("p",null,""+En(Ie(xu)((d=i.value)==null?void 0:d.publisher)),1),Le("p",null,""+En(Ie(sd)((m=i.value)==null?void 0:m.pubdate)),1),Le("p",null,""+En(Ie(xu)((y=i.value)==null?void 0:y.language)),1)])),s.value?(xe(),St(no,{key:2,src:Ie(LC),alt:"completed"},null,8,["src"])):Xt("",!0)]),a.value?(xe(),St(ki,{key:1,class:"description"})):(xe(),Me("div",{key:0,class:"description",innerHTML:(w=i.value)==null?void 0:w.description},null,8,$C))]),(g=i.value)!=null&&g.lastTime?(xe(),Me("p",HC," "+En(Ie(sd)(i.value.lastTime)),1)):Xt("",!0),a.value?(xe(),St(ki,{key:3})):Xt("",!0),Le("div",VC,[We(p,{to:`/book/${(_=i.value)==null?void 0:_.uid}`},{default:yt(()=>[We(gn,{type:"primary",disabled:a.value},{default:yt(()=>[fi("")]),_:1},8,["disabled"])]),_:1},8,["to"]),o.value?(xe(),St(PC,{key:0,href:o.value.href,download:o.value.download},null,8,["href","download"])):Xt("",!0)])]),a.value?(xe(),St(ki,{key:1,height:"200px"})):(xe(),Me("div",KC,[We(NC)]))])}}});const GC=xt(YC,[["__scopeId","data-v-e8da5ba5"]]),Qc=t=>(dr("data-v-2af7ce9b"),t=t(),pr(),t),ZC={class:"container"},XC=Qc(()=>Le("h1",{class:"text-primary"},"404 Error",-1)),QC=Qc(()=>Le("p",{class:"text-primary"},"",-1)),JC=Qc(()=>Le("span",{class:"mdi mdi-home"},null,-1)),eA=ct({__name:"NotFoundView",setup(t){return(e,n)=>{const r=rs("router-link");return xe(),Me("div",ZC,[XC,QC,We(r,{to:"/"},{default:yt(()=>[We(gn,{reverse:""},{icon:yt(()=>[JC]),default:yt(()=>[fi("  ")]),_:1})]),_:1})])}}});const tA=xt(eA,[["__scopeId","data-v-2af7ce9b"]]),nA=["onClick","title"],rA=ct({__name:"ChapterNav",setup(t){const e=hi(),{readerSetting:n,epubInfo:r}=gr(e),i=s=>{var u,l,c;const o=((u=r.value.epub)==null?void 0:u.spine).items.find(f=>f.href===s||f.idref===s);try{(l=r.value.rendition)==null||l.display(o==null?void 0:o.href)}catch{(c=r.value.rendition)==null||c.display(o==null?void 0:o.idref)}};return(s,a)=>(xe(),Me("nav",{class:Jt({__hidden:!Ie(n).contents})},[(xe(!0),Me(Tt,null,Mr(Ie(r).chapters,o=>{var u;return xe(),Me("a",{href:"#",class:Jt(["nav-item ellipsis",[o.href===((u=Ie(r).currentNavChapter)==null?void 0:u.href)?"nav-item__active":""]]),key:o.id,onClick:l=>i(o.href),title:o.label},En(o.label),11,nA)}),128))],2))}});const iA=xt(rA,[["__scopeId","data-v-9f7f4edd"]]),Ag=t=>(dr("data-v-0db61824"),t=t(),pr(),t),sA={class:"reader-container"},aA={key:0,class:"reader-area"},oA={class:"reader-page"},uA={class:"reader-page-controller"},lA=Ag(()=>Le("span",{class:"mdi mdi-chevron-left"},null,-1)),cA={class:"reader-page-controller"},fA=Ag(()=>Le("span",{class:"mdi mdi-chevron-right"},null,-1)),od="calc(100vh - 56px)",hA="calc(100vh - 56px - 1px)",dA=ct({__name:"BookReader",setup(t){const e=hi(),{epubInfo:n,readerSetting:r}=gr(e),i=$o(),s=hc(),a=i.params.uid,o=Ot(null),u=kt(()=>n.value.direction==="ltr"),l=kt(()=>{const{pageWidth:g,displayMode:_}=r.value;return{width:`${g}px`,height:_==="scroll"?hA:od,spread:_==="single"?"none":"always",flow:_==="scroll"?"scrolled":"paginated",manager:_==="scroll"?"continuous":"default"}}),c=kt(()=>{const{lineHeight:g,fontFamily:_}=r.value;return{"*":{"line-height":`${g}rem !important`,"font-family":`${_} !important`,"writing-mode":u.value?"":"tb-rl"}}}),f=g=>{n.value.rendition&&n.value.rendition.destroy();const _=ad(a);if(n.value.rendition=si(g.renderTo("book",l.value)),n.value.rendition.themes.default(c.value),_)try{n.value.rendition.display(_.href)}catch{n.value.rendition.display(_.idref)}else n.value.rendition.display();n.value.rendition.on("rendered",()=>{var S;const C=(S=document.querySelector("iframe"))==null?void 0:S.contentDocument;o.value=C||null})},h=async()=>{try{if(n.value.epub){const O=await n.value.epub.loaded.metadata,{direction:B}=O;n.value.direction=B||"ltr",f(n.value.epub);return}const{epub:g,chapters:_}=await KE(a),C=await g.loaded.metadata,{direction:S}=C;n.value={epub:si(g),chapters:_,direction:S||"ltr"},f(g)}catch{s.push("/404")}},p=()=>{var g;return(g=n.value.rendition)==null?void 0:g.next()},E=()=>{var g;return(g=n.value.rendition)==null?void 0:g.prev()},x=()=>{if(!n.value.chapters)return;const{chapters:g,currentNavChapter:_,rendition:C}=n.value;for(let S=0;S<g.length-1;S++){const O=g[S+1];if(g[S].href===(_==null?void 0:_.href)){C==null||C.display(O.href);break}}},v=()=>{if(!n.value.chapters)return;const{chapters:g,currentNavChapter:_,rendition:C}=n.value;for(let S=1;S<g.length;S++){const O=g[S-1];if(g[S].href===(_==null?void 0:_.href)){C==null||C.display(O.href);break}}},d=()=>{u.value?E():p()},m=()=>{u.value?p():E()},y=g=>{g.ctrlKey||g.altKey?u.value?v():x():d()},w=g=>{g.ctrlKey||g.altKey?u.value?x():v():m()};return zd(()=>{n.value.rendition&&n.value.rendition.on("relocated",g=>{var M,X,he;const{href:_}=g.start,C=(M=n.value.epub)==null?void 0:M.spine,S=C.items.find(oe=>oe.href===_||oe.idref===_),O=(X=n.value.chapters)==null?void 0:X.find(oe=>oe.href===_),B=ad(a);let q;if(B&&(n.value.currentChapter={href:B.href,idref:B.idref}),S&&Cg({uid:a,href:S.href,idref:S.idref}),O)n.value.currentNavChapter=O;else for(let oe=0;oe<C.items.length;oe++){const ee=(he=n.value.chapters)==null?void 0:he.find(te=>{const{href:ie}=te;if(ie===C.items[oe].href||ie===C.items[oe].idref)return te});if(ee&&(q=ee),C.items[oe].href===_){n.value.currentNavChapter=q;break}}})}),ei([l,c],async()=>{f(n.value.epub)}),Xr("ArrowLeft",y),Xr("ArrowRight",w),Xr("ArrowLeft",y,{target:o}),Xr("ArrowRight",w,{target:o}),ns(h),(g,_)=>(xe(),Me("div",sA,[We(iA),Ie(n).rendition?(xe(),Me("div",aA,[Le("div",oA,[Le("div",uA,[We(gn,{type:"base-icon",onClick:d},{icon:yt(()=>[lA]),_:1})]),Le("article",{id:"book",style:ci({width:`${Ie(r).pageWidth}px`,height:od})},null,4),Le("div",cA,[We(gn,{type:"base-icon",onClick:m},{icon:yt(()=>[fA]),_:1})])])])):Xt("",!0)]))}});const pA=xt(dA,[["__scopeId","data-v-0db61824"]]),mA=Cb({history:zy("/ofa-reader/"),routes:[{path:"/",name:"home",component:cx},{path:"/book/detail/:uid",name:"book-detail",component:GC},{path:"/book/:uid",name:"reader",component:pA},{path:"/:pathMatch(.*)*",name:"not-found",redirect:"/404"},{path:"/404",name:"404",component:tA}]});const Jc=py($2);Jc.use(vy());Jc.use(mA);Jc.mount("#app");
